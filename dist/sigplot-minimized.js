/*

 File: tinycolor.js
 TinyColor v0.9.15+
 https://github.com/bgrins/TinyColor
 2013-02-24, Brian Grinstead, MIT License

 File: CanvasInput.js
  CanvasInput v1.0.10
  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input

  (c) 2013, James Simpson of GoldFire Studios
  goldfirestudios.com

  (c) 2013, Axios, Inc.
  Modifications made by Axios, Inc.
  axiosengineering.com

  MIT License

 File: spin.js
 Copyright (c) 2011-2013 Felix Gnass
 Licensed under the MIT license

 File: sigplot.layer1d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.layer2d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: license.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser 
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or 
 (at your option) any later version. This library is distributed in the hope that it will be useful, but 
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR 
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the 
 GNU Lesser General Public License along with SigPlot.

 Portions of SigPlot may utilize the following open-source software:

   loglevel.js          - MIT License; Copyright (c) 2014, Tim Perry
   typedarray.js        - MIT License; Copyright (c) 2010, Linden Research, Inc.
   tinycolor.js         - MIT License; Copyright (c) 2013, Brian Grinstead
   CanvasInput.js       - MIT License; Copyright (c) 2013, James Simpson of GoldFire Studios
   spin.js              - MIT License; Copyright (c) 2011-2013 Felix Gnass
   Array.remove         - MIT License; Copyright (c) 2007, John Resig
   Firefox subarray fix - Public Domain; Copyright (c) 2011, Ryan Berdeen

 File: typedarray.js
 $LicenseInfo:firstyear=2010&license=mit$

 Copyright (c) 2010, Linden Research, Inc.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$

 Copyright (c) 2013, Michael Ihde - Added big-endian/little-endian support

 File: common.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: bluefile.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: m.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: mx.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.
*/
var ArrayBuffer,ArrayBufferView,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,DataView;
(function(){function e(){document&&document.createTextNode("").splitText(1);throw new RangeError("INDEX_SIZE_ERR");}function d(a){if(Object.getOwnPropertyNames&&Object.defineProperty){var r=Object.getOwnPropertyNames(a),n;for(n=0;n<r.length;n+=1)Object.defineProperty(a,r[n],{value:a[r[n]],writable:!1,enumerable:!1,configurable:!1})}}function c(a){function r(n){Object.defineProperty(a,n,{get:function(){return a._getter(n)},set:function(r){a._setter(n,r)},enumerable:!0,configurable:!1})}if(Object.defineProperty){var n;
for(n=0;n<a.length;n+=1)r(n)}}function x(a){return[a&255]}function q(a){return n(a[0],8)}function h(a){return[a&255]}function g(a){return s(a[0],8)}function f(a){return[a>>8&255,a&255]}function l(a){return n(a[0]<<8|a[1],16)}function p(a){return[a>>8&255,a&255]}function B(a){return s(a[0]<<8|a[1],16)}function u(a){return[a>>24&255,a>>16&255,a>>8&255,a&255]}function w(a){return n(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function C(a){return[a>>24&255,a>>16&255,a>>8&255,a&255]}function y(a){return s(a[0]<<
24|a[1]<<16|a[2]<<8|a[3],32)}function F(a){var r=[];for(a=a.join("");a.length;)r.push(parseInt(a.substring(0,8),2)),a=a.substring(8);return r}function E(a){var r=[],n,k;for(n=a.length;n;n-=1)for(b=a[n-1],k=8;k;k-=1)r.push(b%2?1:0),b>>=1;r.reverse();return r}function K(a){return[a&255]}function U(a){return n(a[0],8)}function T(a){return[a&255]}function O(a){return s(a[0],8)}function J(a){return[a&255,a>>8&255]}function X(a){return n(a[1]<<8|a[0],16)}function a(a){return[a&255,a>>8&255]}function t(a){return s(a[1]<<
8|a[0],16)}function A(a){return[a&255,a>>8&255,a>>16&255,a>>24&255]}function G(a){return n(a[3]<<24|a[2]<<16|a[1]<<8|a[0],32)}function Q(a){return[a&255,a>>8&255,a>>16&255,a>>24&255]}function z(a){return s(a[3]<<24|a[2]<<16|a[1]<<8|a[0],32)}function S(a){var r=[];for(a=a.join("");a.length;)r.push(parseInt(a.substring(a.length-8,a.length),2)),a=a.substring(0,a.length-8);return r}function r(a){var r=[],n,k;for(n=0;n<a.length;n++)for(b=a[n],k=8;k;k-=1)r.push(b%2?1:0),b>>=1;r.reverse();return r}function n(a,
r){var n=32-r;return a<<n>>n}function s(a,r){var n=32-r;return a<<n>>>n}function k(a,r,n){var k=(1<<r-1)-1,t,s,c;isNaN(a)?(s=(1<<k)-1,k=Math.pow(2,n-1),t=0):Infinity===a||-Infinity===a?(s=(1<<k)-1,k=0,t=0>a?1:0):0===a?(k=s=0,t=-Infinity===1/a?1:0):(t=0>a,a=Math.abs(a),a>=Math.pow(2,1-k)?(c=Math.min(Math.floor(Math.log(a)/Math.LN2),k),s=c+k,k=Math.round(a*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,k=Math.round(a/Math.pow(2,1-k-n))));for(a=[];n;n-=1)a.push(k%2?1:0),k=Math.floor(k/2);for(n=r;n;n-=1)a.push(s%
2?1:0),s=Math.floor(s/2);a.push(t?1:0);a.reverse();return $(a)}function v(a,r,n){var k=[],t,s,k=aa(a);t=k.join("");a=(1<<r-1)-1;k=parseInt(t.substring(0,1),2)?-1:1;s=parseInt(t.substring(1,1+r),2);t=parseInt(t.substring(1+r),2);return s===(1<<r)-1?0!==t?NaN:Infinity*k:0<s?k*Math.pow(2,s-a)*(1+t/Math.pow(2,n)):0!==t?k*Math.pow(2,-(a-1))*(t/Math.pow(2,n)):0>k?-0:0}function D(a){return v(a,11,52)}function H(a){return k(a,11,52)}function P(a){return v(a,8,23)}function Y(a){return k(a,8,23)}var W={ToInt32:function(a){return a>>
0},ToUint32:function(a){return a>>>0}};Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,r,n){n.hasOwnProperty("get")&&a.__defineGetter__(r,n.get);n.hasOwnProperty("set")&&a.__defineSetter__(r,n.set)});var R=window.BIG_ENDIAN_ARRAYBUFFERS?x:K,N=window.BIG_ENDIAN_ARRAYBUFFERS?q:U,I=window.BIG_ENDIAN_ARRAYBUFFERS?h:T,ba=window.BIG_ENDIAN_ARRAYBUFFERS?g:O,ca=window.BIG_ENDIAN_ARRAYBUFFERS?f:J,da=window.BIG_ENDIAN_ARRAYBUFFERS?l:X,ea=window.BIG_ENDIAN_ARRAYBUFFERS?
p:a,fa=window.BIG_ENDIAN_ARRAYBUFFERS?B:t,ga=window.BIG_ENDIAN_ARRAYBUFFERS?u:A,ha=window.BIG_ENDIAN_ARRAYBUFFERS?w:G,L=window.BIG_ENDIAN_ARRAYBUFFERS?C:Q,M=window.BIG_ENDIAN_ARRAYBUFFERS?y:z,$=window.BIG_ENDIAN_ARRAYBUFFERS?F:S,aa=window.BIG_ENDIAN_ARRAYBUFFERS?E:r;ArrayBuffer||function(){function a(r,n,k){var t;t=function(a,r,n){var k,s,A;if(arguments.length&&"number"!==typeof arguments[0])if("object"===typeof arguments[0]&&arguments[0].constructor===t)for(k=arguments[0],this.length=k.length,this.byteLength=
this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),s=this.byteOffset=0;s<this.length;s+=1)this._setter(s,k._getter(s));else if("object"!==typeof arguments[0]||arguments[0]instanceof ArrayBuffer)if("object"===typeof arguments[0]&&arguments[0]instanceof ArrayBuffer){this.buffer=a;this.byteOffset=W.ToUint32(r);this.byteOffset>this.buffer.byteLength&&e();if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");
3>arguments.length?(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT&&e(),this.length=this.byteLength/this.BYTES_PER_ELEMENT):(this.length=W.ToUint32(n),this.byteLength=this.length*this.BYTES_PER_ELEMENT);this.byteOffset+this.byteLength>this.buffer.byteLength&&e()}else throw new TypeError("Unexpected argument type(s)");else for(k=arguments[0],this.length=W.ToUint32(k.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),
s=this.byteOffset=0;s<this.length;s+=1)A=k[s],this._setter(s,Number(A));else{this.length=W.ToInt32(arguments[0]);if(0>n)throw new RangeError("ArrayBufferView size is not a small enough positive integer.");this.byteLength=this.length*this.BYTES_PER_ELEMENT;this.buffer=new ArrayBuffer(this.byteLength);this.byteOffset=0}this.constructor=t;d(this);c(this)};t.prototype=new ArrayBufferView;t.prototype.BYTES_PER_ELEMENT=r;t.prototype.emulated=!0;t.prototype._pack=n;t.prototype._unpack=k;t.BYTES_PER_ELEMENT=
r;t.prototype._getter=function(a){if(1>arguments.length)throw new SyntaxError("Not enough arguments");a=W.ToUint32(a);if(!(a>=this.length)){var r=[],n,k;n=0;for(k=this.byteOffset+a*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,k+=1)r.push(this.buffer._bytes[k]);return this._unpack(r)}};t.prototype.get=t.prototype._getter;t.prototype._setter=function(a,n){if(2>arguments.length)throw new SyntaxError("Not enough arguments");a=W.ToUint32(a);if(!(a>=this.length)){var r=this._pack(n),k,t;k=0;for(t=
this.byteOffset+a*this.BYTES_PER_ELEMENT;k<this.BYTES_PER_ELEMENT;k+=1,t+=1)this.buffer._bytes[t]=r[k]}};t.prototype.set=function(a,n){if(1>arguments.length)throw new SyntaxError("Not enough arguments");var r,k,t,s,c,d;if("object"===typeof arguments[0]&&arguments[0].constructor===this.constructor)if(r=arguments[0],k=W.ToUint32(arguments[1]),k+r.length>this.length&&e(),d=this.byteOffset+k*this.BYTES_PER_ELEMENT,k=r.length*this.BYTES_PER_ELEMENT,r.buffer===this.buffer){t=[];s=0;for(c=r.byteOffset;s<
k;s+=1,c+=1)t[s]=r.buffer._bytes[c];for(s=0;s<k;s+=1,d+=1)this.buffer._bytes[d]=t[s]}else for(s=0,c=r.byteOffset;s<k;s+=1,c+=1,d+=1)this.buffer._bytes[d]=r.buffer._bytes[c];else if("object"===typeof arguments[0]&&"undefined"!==typeof arguments[0].length)for(r=arguments[0],t=W.ToUint32(r.length),k=W.ToUint32(arguments[1]),k+t>this.length&&e(),s=0;s<t;s+=1)c=r[s],this._setter(k+s,Number(c));else throw new TypeError("Unexpected argument type(s)");};t.prototype.subarray=function(a,r){a=W.ToInt32(a);r=
W.ToInt32(r);1>arguments.length&&(a=0);2>arguments.length&&(r=this.length);0>a&&(a=this.length+a);0>r&&(r=this.length+r);var n=this.length;a=0>a?0:a>n?n:a;n=this.length;n=(0>r?0:r>n?n:r)-a;0>n&&(n=0);return new this.constructor(this.buffer,a*this.BYTES_PER_ELEMENT,n)};return t}ArrayBuffer=function(a){a=W.ToInt32(a);if(0>a)throw new RangeError("ArrayBuffer size is not a small enough positive integer.");this.byteLength=a;this._bytes=[];this._bytes.length=a;for(a=0;a<this.byteLength;a+=1)this._bytes[a]=
0;d(this)};ArrayBuffer.isNative=!1;ArrayBufferView=function(){};Int8Array=Int8Array||a(1,R,N);Uint8Array=Uint8Array||a(1,I,ba);Int16Array=Int16Array||a(2,ca,da);Uint16Array=Uint16Array||a(2,ea,fa);Int32Array=Int32Array||a(4,ga,ha);Uint32Array=Uint32Array||a(4,L,M);Float32Array=Float32Array||a(4,Y,P);Float64Array=Float64Array||a(8,H,D)}();DataView||function(){function a(r,n){return"function"===typeof r.get?r.get(n):r[n]}function r(n){return function(r,t){r=W.ToUint32(r);r+n.BYTES_PER_ELEMENT>this.byteLength&&
e();r+=this.byteOffset;var s=new Uint8Array(this.buffer,r,n.BYTES_PER_ELEMENT),c=[],d;for(d=0;d<n.BYTES_PER_ELEMENT;d+=1)c.push(a(s,d));Boolean(t)===Boolean(k)&&c.reverse();return a(new n((new Uint8Array(c)).buffer),0)}}function n(r){return function(n,t,s){n=W.ToUint32(n);n+r.BYTES_PER_ELEMENT>this.byteLength&&e();t=new r([t]);t=new Uint8Array(t.buffer);var c=[],d;for(d=0;d<r.BYTES_PER_ELEMENT;d+=1)c.push(a(t,d));Boolean(s)===Boolean(k)&&c.reverse();(new Uint8Array(this.buffer,n,r.BYTES_PER_ELEMENT)).set(c)}}
var k=function(){var r=new Uint16Array([4660]),r=new Uint8Array(r.buffer);return 18===a(r,0)}();DataView=function(a,r,n){if(!("object"===typeof a&&a instanceof ArrayBuffer))throw new TypeError("TypeError");this.buffer=a;this.byteOffset=W.ToUint32(r);this.byteOffset>this.buffer.byteLength&&e();this.byteLength=3>arguments.length?this.buffer.byteLength-this.byteOffset:W.ToUint32(n);this.byteOffset+this.byteLength>this.buffer.byteLength&&e();d(this)};ArrayBufferView&&(DataView.prototype=new ArrayBufferView);
DataView.prototype.getUint8=r(Uint8Array);DataView.prototype.getInt8=r(Int8Array);DataView.prototype.getUint16=r(Uint16Array);DataView.prototype.getInt16=r(Int16Array);DataView.prototype.getUint32=r(Uint32Array);DataView.prototype.getInt32=r(Int32Array);DataView.prototype.getFloat32=r(Float32Array);DataView.prototype.getFloat64=r(Float64Array);DataView.prototype.setUint8=n(Uint8Array);DataView.prototype.setInt8=n(Int8Array);DataView.prototype.setUint16=n(Uint16Array);DataView.prototype.setInt16=n(Int16Array);
DataView.prototype.setUint32=n(Uint32Array);DataView.prototype.setInt32=n(Int32Array);DataView.prototype.setFloat32=n(Float32Array);DataView.prototype.setFloat64=n(Float64Array)}()})();window.ArrayBuffer&&!ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=function(e,d){var c=new Uint8Array(this);void 0===d&&(d=c.length);for(var x=new ArrayBuffer(d-e),q=new Uint8Array(x),h=0;h<q.length;h++)q[h]=c[h+e];return x});
Array.prototype.remove=function(e,d){var c=this.slice((d||e)+1||this.length);this.length=0>e?this.length+e:e;return this.push.apply(this,c)};window.requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){return window.setTimeout(d,1E3/60)}}();
window.cancelAnimFrame=function(e){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(d){window.clearTimeout(d)}}();function dashOn(e,d,c){return e.setLineDash?(e.setLineDash([d,c]),!0):void 0!==e.mozDash?(e.mozDash=[d,c],!0):e.webkitLineDash&&0===e.webkitLineDash.length?(e.webkitLineDash=[d,c],!0):!1}
function dashOff(e){e.setLineDash?e.setLineDash([]):e.mozDash?e.mozDash=null:e.webkitLineDash&&(e.webkitLineDash=[])}function getKeyCode(e){e=window.event||e;return e=e.charCode||e.keyCode}function setKeypressHandler(e){window.addEventListener?window.addEventListener("keypress",e,!1):window.attachEvent&&window.attachEvent("onkeypress",e)}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});
window.Float64Array||(window.Float64Array=function(){return window.Float64Array||function(e,d,c){if(!(e instanceof ArrayBuffer))throw"Invalid type";var x=new DataView(e),q=[];e=(e.byteLength-d)/8;q.length=void 0===c?e:Math.min(c,e);for(c=0;c<q.length;c++)q[c]=x.getFloat64(8*c+d,!0);q.subarray=function(c,d){return q.slice(c,d)};return q}}());
(function(){var e=function(){};window.console||(window.console={log:e,info:e,warn:e,debug:e,error:e});if((new Int8Array([0,1,0])).subarray(1).subarray(1)[0]){var d=function(c,d){0===arguments.length?(c=0,d=this.length):(0>c&&(c+=this.length),c=Math.max(0,Math.min(this.length,c)),1===arguments.length?d=this.length:(0>d&&(d+=this.length),d=Math.max(c,Math.min(this.length,d))));return new this.constructor(this.buffer,this.byteOffset+c*this.BYTES_PER_ELEMENT,d-c)};[Int8Array,Uint8Array,Int16Array,Uint16Array,
Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(c){c.prototype.subarray=d})}})();
(function(e,d){function c(d,c,l,p){d[q](x+c,"wheel"===h?l:function(d){!d&&(d=e.event);var c={originalEvent:d,target:d.target||d.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===d.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){d.preventDefault?d.preventDefault():d.returnValue=!1}};"mousewheel"===h?(c.deltaY=-0.025*d.wheelDelta,d.wheelDeltaX&&(c.deltaX=-0.025*d.wheelDeltaX)):c.deltaY=d.detail;return l(c)},p||!1)}var x="",q,h;e.addEventListener?q="addEventListener":(q="attachEvent",x=
"on");h="onwheel"in d.createElement("div")?"wheel":void 0!==d.onmousewheel?"mousewheel":"DOMMouseScroll";e.addWheelListener=function(d,e,l){c(d,h,e,l);"DOMMouseScroll"===h&&c(d,"MozMousePixelScroll",e,l)}})(window,document);
(function(e){function d(d){d=new Uint8Array(d);if(B)return String.fromCharCode.apply(null,d);for(var c="",e=0;e<d.length;e++)c+=String.fromCharCode(d[e]);return c}function c(c){this.file_name=this.file=null;this.offset=0;this.buf=c;if(null!=this.buf){c=new DataView(this.buf);this.version=d(this.buf.slice(0,4));this.headrep=d(this.buf.slice(4,8));this.datarep=d(this.buf.slice(8,12));var e="EEEI"===this.headrep,g="EEEI"===this.datarep;this.type=c.getUint32(48,e);this["class"]=this.type/1E3;this.format=
d(this.buf.slice(52,54));this.timecode=c.getFloat64(56,e);1===this["class"]?(this.xstart=c.getFloat64(256,e),this.xdelta=c.getFloat64(264,e),this.xunits=c.getInt32(272,e),this.subsize=1):2===this["class"]&&(this.xstart=c.getFloat64(256,e),this.xdelta=c.getFloat64(264,e),this.xunits=c.getInt32(272,e),this.subsize=c.getInt32(276,e),this.ystart=c.getFloat64(280,e),this.ydelta=c.getFloat64(288,e),this.yunits=c.getInt32(296,e));this.data_start=c.getFloat64(32,e);this.data_size=c.getFloat64(40,e);this.setData(this.buf,
this.data_start,this.data_start+this.data_size,g)}}function x(d){var c=document.createElement("a");c.href=d;for(var e=c.protocol.replace(":",""),g=c.hostname,h=c.port,f=c.search,l={},p=c.search.replace(/^\?/,"").split("&"),J=p.length,q=0,a;q<J;q++)p[q]&&(a=p[q].split("="),l[a[0]]=a[1]);return{source:d,protocol:e,host:g,port:h,query:f,params:l,file:(c.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1"),relative:(c.href.match(/tps?:\/\/[^\/]+(.+)/)||
[null,""])[1],segments:c.pathname.replace(/^\//,"").split("/")}}function q(c,d,e){e=e||1024;var g=0,h=new ArrayBuffer(c.length),f=new Uint8Array(h),l=function(){for(var p=g+e;g<p;g++)f[g]=c.charCodeAt(g)&255;g>=c.length?d(h):setTimeout(l,0)};setTimeout(l,0)}function h(c){this.options=c}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var g=function(){var c=new ArrayBuffer(4),d=new Uint32Array(c),c=new Uint8Array(c);d[0]=3735928559;if(239===c[0])return"LE";if(222===c[0])return"BE";throw Error("unknown endianness");
}(),f={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},l={P:0.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},p={P:null,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array},B=!0;try{var u=new UInt8Array(new ArrayBuffer(4));u[0]=66;u[1]=76;u[2]=85;u[3]=69;"BLUE"!==String.fromCharCode.apply(null,u)&&(B=!1)}catch(w){B=!1}c.prototype={setData:function(c,d,e,h){1===this["class"]?(this.spa=f[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*
this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2===this["class"]&&(this.spa=f[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa);void 0===h&&(h="LE"===g);if("LE"===g&&!h)throw"Not supported "+g+" "+h;if("BE"===g&&this.littleEndianData)throw"Not supported "+g+" "+h;c?(this.dview=d&&e?this.createArray(c,d,(e-d)/this.bps):this.createArray(c),this.size=this.dview.length/(this.spa*this.ape)):this.dview=this.createArray(null,null,this.size)},
createArray:function(c,d,e){var g=p[this.format[1]];if(void 0===g)throw"unknown format "+this.format[1];void 0===d&&(d=0);void 0===e&&(e=c.length||c.byteLength/l[this.format[1]]);return c?new g(c,d,e):new g(e)}};h.prototype={readheader:function(d,e){var g=new FileReader,h=d.webkitSlice(0,512);g.onloadend=function(d){return function(h){h.target.error?e(null):(h=new c(g.result),h.file=d,e(h))}}(d);g.readAsArrayBuffer(h)},read:function(d,e){var g=new FileReader;g.onloadend=function(d){return function(h){h.target.error?
e(null):(h=new c(g.result),h.file=d,h.file_name=d.name,e(h))}}(d);g.readAsArrayBuffer(d)},read_http:function(d,e){var g=new XMLHttpRequest;g.open("GET",d,!0);g.responseType="arraybuffer";g.overrideMimeType("text/plain; charset=x-user-defined");g.onload=function(h){if(4!==g.readyState||200!==g.status&&0!==g.status)e(null);else if(h=null,g.response){h=g.response;h=new c(h);x(d);var f=x(d);h.file_name=f.file;e(h)}else g.responseText&&q(g.responseText,function(g){g=new c(g);x(d);var h=x(d);g.file_name=
h.file;e(g)})};g.onerror=function(c){e(null)};g.send(null)}};e.BlueHeader=e.BlueHeader||c;e.BlueFileReader=e.BlueFileReader||h})(this);
(function(e){function d(e,p){e=e?e:"";p=p||{};if("object"==typeof e&&e.hasOwnProperty("_tc_id"))return e;var a=c(e),t=a.r,A=a.g,G=a.b,Q=a.a,z=y(100*Q)/100,S=p.format||a.format;1>t&&(t=y(t));1>A&&(A=y(A));1>G&&(G=y(G));return{ok:a.ok,format:S,_tc_id:w++,alpha:Q,toHsv:function(){var a=h(t,A,G);return{h:360*a.h,s:a.s,v:a.v,a:Q}},toHsvString:function(){var a=h(t,A,G),n=y(360*a.h),s=y(100*a.s),a=y(100*a.v);return 1==Q?"hsv("+n+", "+s+"%, "+a+"%)":"hsva("+n+", "+s+"%, "+a+"%, "+z+")"},toHsl:function(){var a=
x(t,A,G);return{h:360*a.h,s:a.s,l:a.l,a:Q}},toHslString:function(){var a=x(t,A,G),n=y(360*a.h),s=y(100*a.s),a=y(100*a.l);return 1==Q?"hsl("+n+", "+s+"%, "+a+"%)":"hsla("+n+", "+s+"%, "+a+"%, "+z+")"},toHex:function(a){return g(t,A,G,a)},toHexString:function(a){return"#"+g(t,A,G,a)},toRgb:function(){return{r:y(t),g:y(A),b:y(G),a:Q}},toRgbString:function(){return 1==Q?"rgb("+y(t)+", "+y(A)+", "+y(G)+")":"rgba("+y(t)+", "+y(A)+", "+y(G)+", "+z+")"},toPercentageRgb:function(){return{r:y(100*f(t,255))+
"%",g:y(100*f(A,255))+"%",b:y(100*f(G,255))+"%",a:Q}},toPercentageRgbString:function(){return 1==Q?"rgb("+y(100*f(t,255))+"%, "+y(100*f(A,255))+"%, "+y(100*f(G,255))+"%)":"rgba("+y(100*f(t,255))+"%, "+y(100*f(A,255))+"%, "+y(100*f(G,255))+"%, "+z+")"},toName:function(){return 0===Q?"transparent":T[g(t,A,G,!0)]||!1},toFilter:function(a){var n=g(t,A,G),s=n,k=Math.round(255*parseFloat(Q)).toString(16),c=k,e=p&&p.gradientType?"GradientType = 1, ":"";a&&(a=d(a),s=a.toHex(),c=Math.round(255*parseFloat(a.alpha)).toString(16));
return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr=#"+l(k)+n+",endColorstr=#"+l(c)+s+")"},toString:function(a){var n=!!a;a=a||this.format;var t=!1,n=!n&&1>Q&&0<Q&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);"rgb"===a&&(t=this.toRgbString());"prgb"===a&&(t=this.toPercentageRgbString());if("hex"===a||"hex6"===a)t=this.toHexString();"hex3"===a&&(t=this.toHexString(!0));"name"===a&&(t=this.toName());"hsl"===a&&(t=this.toHslString());"hsv"===a&&(t=this.toHsvString());return n?this.toRgbString():
t||this.toHexString()}}}function c(c){var d={r:0,g:0,b:0},a=1,t=!1,A=!1;if("string"==typeof c)a:{c=c.replace(B,"").replace(u,"").toLowerCase();var e=!1;if(U[c])c=U[c],e=!0;else if("transparent"==c){c={r:0,g:0,b:0,a:0,format:"name"};break a}var g;c=(g=O.rgb.exec(c))?{r:g[1],g:g[2],b:g[3]}:(g=O.rgba.exec(c))?{r:g[1],g:g[2],b:g[3],a:g[4]}:(g=O.hsl.exec(c))?{h:g[1],s:g[2],l:g[3]}:(g=O.hsla.exec(c))?{h:g[1],s:g[2],l:g[3],a:g[4]}:(g=O.hsv.exec(c))?{h:g[1],s:g[2],v:g[3]}:(g=O.hex6.exec(c))?{r:parseInt(g[1],
16),g:parseInt(g[2],16),b:parseInt(g[3],16),format:e?"name":"hex"}:(g=O.hex3.exec(c))?{r:parseInt(g[1]+""+g[1],16),g:parseInt(g[2]+""+g[2],16),b:parseInt(g[3]+""+g[3],16),format:e?"name":"hex"}:!1}if("object"==typeof c){if(c.hasOwnProperty("r")&&c.hasOwnProperty("g")&&c.hasOwnProperty("b"))d=c.g,t=c.b,d={r:255*f(c.r,255),g:255*f(d,255),b:255*f(t,255)},t=!0,A="%"===String(c.r).substr(-1)?"prgb":"rgb";else if(c.hasOwnProperty("h")&&c.hasOwnProperty("s")&&c.hasOwnProperty("v")){c.s=p(c.s);c.v=p(c.v);
var A=c.h,e=c.s,d=c.v,A=6*f(A,360),e=f(e,100),d=f(d,100),t=C.floor(A),h=A-t,A=d*(1-e);g=d*(1-h*e);e=d*(1-(1-h)*e);t%=6;d={r:255*[d,g,A,A,e,d][t],g:255*[e,d,d,g,A,A][t],b:255*[A,A,e,d,d,g][t]};t=!0;A="hsv"}else c.hasOwnProperty("h")&&c.hasOwnProperty("s")&&c.hasOwnProperty("l")&&(c.s=p(c.s),c.l=p(c.l),d=q(c.h,c.s,c.l),t=!0,A="hsl");c.hasOwnProperty("a")&&(a=c.a)}a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return{ok:t,format:c.format||A,r:F(255,E(d.r,0)),g:F(255,E(d.g,0)),b:F(255,E(d.b,0)),a:a}}function x(c,
d,a){c=f(c,255);d=f(d,255);a=f(a,255);var t=E(c,d,a),A=F(c,d,a),e,g=(t+A)/2;if(t==A)e=A=0;else{var h=t-A,A=0.5<g?h/(2-t-A):h/(t+A);switch(t){case c:e=(d-a)/h+(d<a?6:0);break;case d:e=(a-c)/h+2;break;case a:e=(c-d)/h+4}e/=6}return{h:e,s:A,l:g}}function q(c,d,a){function t(a,t,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(t-a)*c:0.5>c?t:c<2/3?a+(t-a)*(2/3-c)*6:a}c=f(c,360);d=f(d,100);a=f(a,100);if(0===d)a=d=c=a;else{var A=0.5>a?a*(1+d):a+d-a*d,e=2*a-A;a=t(e,A,c+1/3);d=t(e,A,c);c=t(e,A,c-1/3)}return{r:255*
a,g:255*d,b:255*c}}function h(c,d,a){c=f(c,255);d=f(d,255);a=f(a,255);var t=E(c,d,a),e=F(c,d,a),g,h=t-e;if(t==e)g=0;else{switch(t){case c:g=(d-a)/h+(d<a?6:0);break;case d:g=(a-c)/h+2;break;case a:g=(c-d)/h+4}g/=6}return{h:g,s:0===t?0:h/t,v:t}}function g(c,d,a,t){c=[l(y(c).toString(16)),l(y(d).toString(16)),l(y(a).toString(16))];return t&&c[0].charAt(0)==c[0].charAt(1)&&c[1].charAt(0)==c[1].charAt(1)&&c[2].charAt(0)==c[2].charAt(1)?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function f(c,
d){var a=c;"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)&&(c="100%");a="string"===typeof c&&-1!=c.indexOf("%");c=F(d,E(0,parseFloat(c)));a&&(c=parseInt(c*d,10)/100);return 1E-6>C.abs(c-d)?1:c%d/parseFloat(d)}function l(c){return 1==c.length?"0"+c:""+c}function p(c){1>=c&&(c=100*c+"%");return c}var B=/^[\s,#]+/,u=/\s+$/,w=0,C=Math,y=C.round,F=C.min,E=C.max,K=C.random;d.fromRatio=function(c,e){if("object"==typeof c){var a={},t;for(t in c)c.hasOwnProperty(t)&&(a[t]="a"===t?c[t]:p(c[t]));
c=a}return d(c,e)};d.equals=function(c,e){return c&&e?d(c).toRgbString()==d(e).toRgbString():!1};d.random=function(){return d.fromRatio({r:K(),g:K(),b:K()})};d.desaturate=function(c,e){e=0===e?0:e||10;var a=d(c).toHsl();a.s-=e/100;a.s=F(1,E(0,a.s));return d(a)};d.saturate=function(c,e){e=0===e?0:e||10;var a=d(c).toHsl();a.s+=e/100;a.s=F(1,E(0,a.s));return d(a)};d.greyscale=function(c){return d.desaturate(c,100)};d.lighten=function(c,e){e=0===e?0:e||10;var a=d(c).toHsl();a.l+=e/100;a.l=F(1,E(0,a.l));
return d(a)};d.darken=function(c,e){e=0===e?0:e||10;var a=d(c).toHsl();a.l-=e/100;a.l=F(1,E(0,a.l));return d(a)};d.complement=function(c){c=d(c).toHsl();c.h=(c.h+180)%360;return d(c)};d.triad=function(c){var e=d(c).toHsl(),a=e.h;return[d(c),d({h:(a+120)%360,s:e.s,l:e.l}),d({h:(a+240)%360,s:e.s,l:e.l})]};d.tetrad=function(c){var e=d(c).toHsl(),a=e.h;return[d(c),d({h:(a+90)%360,s:e.s,l:e.l}),d({h:(a+180)%360,s:e.s,l:e.l}),d({h:(a+270)%360,s:e.s,l:e.l})]};d.splitcomplement=function(c){var e=d(c).toHsl(),
a=e.h;return[d(c),d({h:(a+72)%360,s:e.s,l:e.l}),d({h:(a+216)%360,s:e.s,l:e.l})]};d.analogous=function(c,e,a){e=e||6;a=a||30;var t=d(c).toHsl();a=360/a;c=[d(c)];for(t.h=(t.h-(a*e>>1)+720)%360;--e;)t.h=(t.h+a)%360,c.push(d(t));return c};d.monochromatic=function(c,e){e=e||6;for(var a=d(c).toHsv(),t=a.h,A=a.s,a=a.v,g=[],h=1/e;e--;)g.push(d({h:t,s:A,v:a})),a=(a+h)%1;return g};d.readability=function(c,e){var a=d(c).toRgb(),t=d(e).toRgb(),A=(299*a.r+587*a.g+114*a.b)/1E3,g=(299*t.r+587*t.g+114*t.b)/1E3,a=
Math.max(a.r,t.r)-Math.min(a.r,t.r)+Math.max(a.g,t.g)-Math.min(a.g,t.g)+Math.max(a.b,t.b)-Math.min(a.b,t.b);return{brightness:Math.abs(A-g),color:a}};d.readable=function(c,e){var a=d.readability(c,e);return 125<a.brightness&&500<a.color};d.mostReadable=function(c,e){for(var a=null,t=0,A=!1,g=0;g<e.length;g++){var h=d.readability(c,e[g]),z=125<h.brightness&&500<h.color,h=h.brightness/125*3+h.color/500;if(z&&!A||z&&A&&h>t||!z&&!A&&h>t)A=z,t=h,a=d(e[g])}return a};var U=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",
tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=d.hexNames=function(c){var d={},a;for(a in c)c.hasOwnProperty(a)&&(d[c[a]]=a);return d}(U),O={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof module&&module.exports?module.exports=d:"undefined"!==typeof define?define(function(){return d}):e.tinycolor=d})(this);
(function(){var e=[];(window.CanvasInput=function(d){var c=this;d=d?d:{};c._canvas=d.canvas||null;c._ctx=c._canvas?c._canvas.getContext("2d"):null;c._x=d.x||0;c._y=d.y||0;c._extraX=d.extraX||0;c._extraY=d.extraY||0;c._fontSize=d.fontSize||14;c._fontFamily=d.fontFamily||"Arial";c._fontColor=d.fontColor||"#000";c._placeHolderColor=d.placeHolderColor||"#bfbebd";c._fontWeight=d.fontWeight||"normal";c._fontStyle=d.fontStyle||"normal";c._readonly=d.readonly||!1;c._maxlength=d.maxlength||null;c._width=d.width||
150;c._height=d.height||c._fontSize;c._padding=0<=d.padding?d.padding:5;c._borderWidth=0<=d.borderWidth?d.borderWidth:1;c._borderColor=d.borderColor||"#959595";c._borderRadius=0<=d.borderRadius?d.borderRadius:3;c._backgroundImage=d.backgroundImage||"";c._boxShadow=d.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)";c._innerShadow=d.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)";c._selectionColor=d.selectionColor||"rgba(179, 212, 253, 0.8)";c._placeHolder=d.placeHolder||"";c._value=d.value||c._placeHolder;
c._onsubmit=d.onsubmit||function(){};c._onkeydown=d.onkeydown||function(){};c._onkeyup=d.onkeyup||function(){};c._onfocus=d.onfocus||function(){};c._onblur=d.onblur||function(){};c._cursor=!1;c._cursorPos=0;c._hasFocus=!1;c._selection=[0,0];c._wasOver=!1;c._renderOnReturn=void 0!==d.renderOnReturn?d.renderOnReturn:!0;c._disableBlur=d.disableBlur||!1;c._tabToClear=d.tabToClear||!1;c.boxShadow(c._boxShadow,!0);c._calcWH();c._renderCanvas=document.createElement("canvas");c._renderCanvas.setAttribute("width",
c.outerW);c._renderCanvas.setAttribute("height",c.outerH);c._renderCtx=c._renderCanvas.getContext("2d");c._shadowCanvas=document.createElement("canvas");c._shadowCanvas.setAttribute("width",c._width+2*c._padding);c._shadowCanvas.setAttribute("height",c._height+2*c._padding);c._shadowCtx=c._shadowCanvas.getContext("2d");"undefined"!==typeof d.backgroundGradient?(c._backgroundColor=c._renderCtx.createLinearGradient(0,0,0,c.outerH),c._backgroundColor.addColorStop(0,d.backgroundGradient[0]),c._backgroundColor.addColorStop(1,
d.backgroundGradient[1])):c._backgroundColor=d.backgroundColor||"#fff";c._canvas&&(c.mousemoveCanvasListener=function(d){d=d||window.event;c.mousemove(d,c)},c._canvas.addEventListener("mousemove",c.mousemoveCanvasListener,!1),c.mousedownCanvasListener=function(d){d=d||window.event;c.mousedown(d,c)},c._canvas.addEventListener("mousedown",c.mousedownCanvasListener,!1),c.mouseupCanvasListener=function(d){d=d||window.event;c.mouseup(d,c)},c._canvas.addEventListener("mouseup",c.mouseupCanvasListener,!1));
c.mouseupWindowListener=function(d){c._hasFocus&&!c._mouseDown&&c.blur()};window.addEventListener("mouseup",c.mouseupWindowListener,!0);c.keydownWindowListener=function(d){d=d||window.event;c._hasFocus&&c.keydown(d,c)};window.addEventListener("keydown",c.keydownWindowListener,!1);c.keyupWindowListener=function(d){d=d||window.event;c._hasFocus&&c._onkeyup(d,c)};window.addEventListener("keyup",c.keyupWindowListener,!1);c.pasteWindowListener=function(d){d=d||window.event;if(c._hasFocus){d=d.clipboardData.getData("text/plain");
var e=c._value.substr(0,c._cursorPos),h=c._value.substr(c._cursorPos);c._value=e+d+h;c._cursorPos+=d.length;c.render()}};window.addEventListener("paste",c.pasteWindowListener,!1);e.push(c);c._inputsIndex=e.length-1;c.render()}).prototype={canvas:function(d){return"undefined"!==typeof d?(this._canvas=d,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(d){return"undefined"!==typeof d?(this._x=d,this.render()):this._x},y:function(d){return"undefined"!==typeof d?(this._y=
d,this.render()):this._y},extraX:function(d){return"undefined"!==typeof d?(this._extraX=d,this.render()):this._extraX},extraY:function(d){return"undefined"!==typeof d?(this._extraY=d,this.render()):this._extraY},fontSize:function(d){return"undefined"!==typeof d?(this._fontSize=d,this.render()):this._fontSize},fontFamily:function(d){return"undefined"!==typeof d?(this._fontFamily=d,this.render()):this._fontFamily},fontColor:function(d){return"undefined"!==typeof d?(this._fontColor=d,this.render()):
this._fontColor},placeHolderColor:function(d){return"undefined"!==typeof d?(this._placeHolderColor=d,this.render()):this._placeHolderColor},fontWeight:function(d){return"undefined"!==typeof d?(this._fontWeight=d,this.render()):this._fontWeight},fontStyle:function(d){return"undefined"!==typeof d?(this._fontStyle=d,this.render()):this._fontStyle},width:function(d){return"undefined"!==typeof d?(this._width=d,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(d){return"undefined"!==
typeof d?(this._height=d,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(d){return"undefined"!==typeof d?(this._padding=d,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(d){return"undefined"!==typeof d?(this._borderWidth=d,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(d){return"undefined"!==typeof d?(this._borderColor=d,this.render()):this._borderColor},borderRadius:function(d){return"undefined"!==
typeof d?(this._borderRadius=d,this.render()):this._borderRadius},backgroundColor:function(d){return"undefined"!==typeof d?(this._backgroundColor=d,this.render()):this._backgroundColor},backgroundGradient:function(d){return"undefined"!==typeof d?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,d[0]),this._backgroundColor.addColorStop(1,d[1]),this.render()):this._backgroundColor},boxShadow:function(d,c){if("undefined"!==typeof d){var e=
d.split("px ");this._boxShadow={x:"none"===this._boxShadow?0:parseInt(e[0],10),y:"none"===this._boxShadow?0:parseInt(e[1],10),blur:"none"===this._boxShadow?0:parseInt(e[2],10),color:"none"===this._boxShadow?"":e[3]};this.shadowL=0>this._boxShadow.x?Math.abs(this._boxShadow.x)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.x);this.shadowR=this._boxShadow.blur+this._boxShadow.x;this.shadowT=0>this._boxShadow.y?Math.abs(this._boxShadow.y)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-
this._boxShadow.y);this.shadowB=this._boxShadow.blur+this._boxShadow.y;this.shadowW=this.shadowL+this.shadowR;this.shadowH=this.shadowT+this.shadowB;this._calcWH();if(!c)return this._updateCanvasWH(),this.render()}else return this._boxShadow},innerShadow:function(d){return"undefined"!==typeof d?(this._innerShadow=d,this.render()):this._innerShadow},selectionColor:function(d){return"undefined"!==typeof d?(this._selectionColor=d,this.render()):this._selectionColor},placeHolder:function(d){return"undefined"!==
typeof d?(this._placeHolder=d,this.render()):this._placeHolder},value:function(d){return"undefined"!==typeof d?(this._value=d,this.focus()):this._value},onsubmit:function(d){if("undefined"!==typeof d)return this._onsubmit=d,this;this._onsubmit()},onkeydown:function(d){if("undefined"!==typeof d)return this._onkeydown=d,this;this._onkeydown()},onkeyup:function(d){if("undefined"!==typeof d)return this._onkeyup=d,this;this._onkeyup()},focus:function(d){var c=this,e;if(!c._readonly){c._hasFocus||c._onfocus(c);
c._selectionUpdated?delete c._selectionUpdated:c._selection=[0,0];c._cursorPos="number"===typeof d?d:c._clipText().length;c._placeHolder===c._value&&(c._value="");c._hasFocus=!0;c._cursor=!0;c._cursorInterval&&clearInterval(c._cursorInterval);c._cursorInterval=setInterval(function(){c._cursor=!c._cursor;c.render()},500);d=navigator.userAgent.toLowerCase();d=0<=d.indexOf("chrome")&&0<=d.indexOf("mobile")&&0<=d.indexOf("android");var q="undefined"!==typeof window.orientation;q&&!d&&document&&document.createElement&&
(e=document.createElement("input"))?(e.type="text",e.style.opacity=0,e.style.position="absolute",e.style.left=c._x+c._extraX+(c._canvas?c._canvas.offsetLeft:0)+"px",e.style.top=c._y+c._extraY+(c._canvas?c._canvas.offsetTop:0)+"px",e.style.width=c._width,e.style.height=0,document.body.appendChild(e),e.focus(),e.addEventListener("blur",function(){c.blur(c)},!1)):q&&c.value(prompt(c._placeHolder)||"");return c.render()}},blur:function(d){d=d||this;d._disableBlur||(d._onblur(d),d._cursorInterval&&clearInterval(d._cursorInterval),
d._hasFocus=!1,d._cursor=!1,d._selection=[0,0],""===d._value&&(d._value=d._placeHolder));return d.render()},disableBlur:function(d){(d||this)._disableBlur=!0},enableBlur:function(d){(d||this)._disableBlur=!1},keydown:function(d,c){var x=d.which,q=d.shiftKey,h=null,g;if(c._hasFocus){c._onkeydown(d,c);if(65===x&&(d.ctrlKey||d.metaKey))return c._selection=[0,c._value.length],d.preventDefault(),c.render();if(17===x||d.metaKey||d.ctrlKey)return c;d.preventDefault();if(8===x)!c._clearSelection()&&0<c._cursorPos&&
(q=c._value.substr(0,c._cursorPos-1),g=c._value.substr(c._cursorPos,c._value.length),c._value=q+g,c._cursorPos--);else if(37===x)0<c._cursorPos&&(c._cursorPos--,c._cursor=!0,c._selection=[0,0]);else if(39===x)c._cursorPos<c._value.length&&(c._cursorPos++,c._cursor=!0,c._selection=[0,0]);else if(13===x)c._onsubmit(d,c);else if(9===x)if(c._tabToClear)c._value="",c._cursorPos=0;else{var f=e[c._inputsIndex+1]?c._inputsIndex+1:0;f!==c._inputsIndex&&(c.blur(),setTimeout(function(){e[f].focus()},10))}else if(h=
c._mapCodeToKey(q,x)){c._clearSelection();if(c._maxlength&&c._maxlength<=c._value.length)return;q=c._value?c._value.substr(0,c._cursorPos):"";g=c._value?c._value.substr(c._cursorPos):"";c._value=q+h+g;c._cursorPos++}return 13==x&&c._renderOnReturn||13!==x?c.render():function(){}}},click:function(d,c){var e=c._mousePos(d),q=e.x,e=e.y;if(c._endSelection)delete c._endSelection,delete c._selectionUpdated;else if(c._canvas&&c._overInput(q,e)||!c._canvas){if(c._mouseDown)return c._mouseDown=!1,c.click(d,
c),c.focus(c._clickPos(q,e))}else return c.blur()},mousemove:function(d,c){var e=c._mousePos(d),q=e.x,h=e.y;(e=c._overInput(q,h))&&c._canvas?(c._canvas.style.cursor="text",c._wasOver=!0):c._wasOver&&c._canvas&&(c._canvas.style.cursor="default",c._wasOver=!1);if(c._hasFocus&&0<=c._selectionStart)if(h=c._clickPos(q,h),q=Math.min(c._selectionStart,h),h=Math.max(c._selectionStart,h),!e)c._selectionUpdated=!0,c._endSelection=!0,delete c._selectionStart,c.render();else if(c._selection[0]!==q||c._selection[1]!==
h)c._selection=[q,h],c.render()},mousedown:function(d,c){var e=c._mousePos(d),q=e.x,e=e.y,h=c._overInput(q,e);c._mouseDown=h;c._hasFocus&&h&&(c._selectionStart=c._clickPos(q,e))},mouseup:function(d,c){var e=c._mousePos(d),q=e.x,e=e.y,h=c._clickPos(q,e)!==c._selectionStart;c._hasFocus&&0<=c._selectionStart&&c._overInput(q,e)&&h?(c._selectionUpdated=!0,delete c._selectionStart,c.render()):delete c._selectionStart;c.click(d,c)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",
this.mouseupCanvasListener,!1);this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1);this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1);window.removeEventListener("keydown",this.keydownWindowListener,!1);window.removeEventListener("keyup",this.keyupWindowListener,!1);window.removeEventListener("mouseup",this.mouseupWindowListener,!0);window.removeEventListener("paste",this.pasteWindowListener,!1);clearInterval(this._cursorInterval);this._canvas.style.cursor=
"default";for(var d=0;d<e.length;d++)e[d]===this&&e.remove(d)},render:function(){var d=this,c=d._renderCtx,e=d.outerW,q=d.outerH,h=d._borderRadius,g=d._borderWidth,f=d.shadowW,l=d.shadowH;c.clearRect(0,0,c.canvas.width,c.canvas.height);c.shadowOffsetX=d._boxShadow.x;c.shadowOffsetY=d._boxShadow.y;c.shadowBlur=d._boxShadow.blur;c.shadowColor=d._boxShadow.color;0<d._borderWidth&&(c.fillStyle=d._borderColor,d._roundedRect(c,d.shadowL,d.shadowT,e-f,q-l,h),c.fill(),c.shadowOffsetX=0,c.shadowOffsetY=0,
c.shadowBlur=0);d._drawTextBox(function(){c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;var p=d._clipText(),B=d._padding+d._borderWidth+d.shadowT;if(0<d._selection[1]){var u=d._textWidth(p.substring(0,d._selection[0])),w=d._textWidth(p.substring(d._selection[0],d._selection[1]));c.fillStyle=d._selectionColor;c.fillRect(B+u,B,w,d._height)}c.fillStyle=d._placeHolder===d._value&&""!==d._value?d._placeHolderColor:d._fontColor;d._cursor&&(u=d._textWidth(p.substring(0,d._cursorPos)),c.fillRect(B+u,
B,1,d._height));u=d._padding+d._borderWidth+d.shadowL;B=Math.round(B+d._height/2);c.font=d._fontStyle+" "+d._fontWeight+" "+d._fontSize+"px "+d._fontFamily;c.textAlign="left";c.textBaseline="middle";c.fillText(p,u,B);w=d._innerShadow.split("px ");p="none"===d._innerShadow?0:parseInt(w[0],10);B="none"===d._innerShadow?0:parseInt(w[1],10);u="none"===d._innerShadow?0:parseInt(w[2],10);w="none"===d._innerShadow?"":w[3];if(0<u){var C=d._shadowCtx,y=C.canvas.width,F=C.canvas.height;C.clearRect(0,0,y,F);
C.shadowBlur=u;C.shadowColor=w;C.shadowOffsetX=0;C.shadowOffsetY=B;C.fillRect(-1*e,-100,3*e,100);C.shadowOffsetX=p;C.shadowOffsetY=0;C.fillRect(y,-1*q,100,3*q);C.shadowOffsetX=0;C.shadowOffsetY=B;C.fillRect(-1*e,F,3*e,100);C.shadowOffsetX=p;C.shadowOffsetY=0;C.fillRect(-100,-1*q,100,3*q);d._roundedRect(c,g+d.shadowL,g+d.shadowT,e-2*g-f,q-2*g-l,h);c.clip();c.drawImage(d._shadowCanvas,0,0,y,F,g+d.shadowL,g+d.shadowT,y,F)}d._ctx&&(d._ctx.clearRect(d._x,d._y,c.canvas.width,c.canvas.height),d._ctx.drawImage(d._renderCanvas,
d._x,d._y));return d})},_drawTextBox:function(d){var c=this,e=c._renderCtx,q=c.outerW,h=c.outerH,g=c._borderRadius,f=c._borderWidth,l=c.shadowW,p=c.shadowH;if(""===c._backgroundImage)e.fillStyle=c._backgroundColor,c._roundedRect(e,f+c.shadowL,f+c.shadowT,q-2*f-l,h-2*f-p,g),e.fill(),d();else{var B=new Image;B.src=c._backgroundImage;B.onload=function(){e.drawImage(B,0,0,B.width,B.height,f+c.shadowL,f+c.shadowT,q,h);d()}}},_clearSelection:function(){if(0<this._selection[1]){var d=this._selection[0],
c=this._selection[1];this._value=this._value.substr(0,d)+this._value.substr(c);this._cursorPos=d;this._cursorPos=0>this._cursorPos?0:this._cursorPos;this._selection=[0,0];return!0}return!1},_clipText:function(d){d="undefined"===typeof d?this._value:d;var c=this._textWidth(d)/(this._width-this._padding);return(1<c?d.substr(-1*Math.floor(d.length/c)):d)+""},_textWidth:function(d){var c=this._renderCtx;c.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily;c.textAlign=
"left";return c.measureText(d).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW;this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var d=this._renderCanvas.width,c=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW);this._renderCanvas.setAttribute("height",this.outerH);this._shadowCanvas.setAttribute("width",this._width+2*this._padding);this._shadowCanvas.setAttribute("height",
this._height+2*this._padding);this._ctx&&this._ctx.clearRect(this._x,this._y,d,c)},_roundedRect:function(d,c,e,q,h,g){q<2*g&&(g=q/2);h<2*g&&(g=h/2);d.beginPath();d.moveTo(c+g,e);d.lineTo(c+q-g,e);d.quadraticCurveTo(c+q,e,c+q,e+g);d.lineTo(c+q,e+h-g);d.quadraticCurveTo(c+q,e+h,c+q-g,e+h);d.lineTo(c+g,e+h);d.quadraticCurveTo(c,e+h,c,e+h-g);d.lineTo(c,e+g);d.quadraticCurveTo(c,e,c+g,e);d.closePath()},_overInput:function(d,c){var e=d<=this._x+this._extraX+this._width+2*this._padding,q=c>=this._y+this._extraY,
h=c<=this._y+this._extraY+this._height+2*this._padding;return d>=this._x+this._extraX&&e&&q&&h},_clickPos:function(d,c){var e=this._value;this._value===this._placeHolder&&(e="");var e=this._clipText(e),q=0,h=e.length;if(d-(this._x+this._extraX)<this._textWidth(e))for(var g=0;g<e.length;g++)if(q+=this._textWidth(e[g]),q>=d-(this._x+this._extraX)){h=g;break}return h},_mousePos:function(d){var c=d.target,e=document.defaultView.getComputedStyle(c,void 0),q=parseInt(e.paddingLeft,10)||0,h=parseInt(e.paddingLeft,
10)||0,g=parseInt(e.borderLeftWidth,10)||0,e=parseInt(e.borderLeftWidth,10)||0,f=document.body.parentNode.offsetTop||0,l=document.body.parentNode.offsetLeft||0,p=0,B=0;if("unefined"!==typeof c.offsetParent){do p+=c.offsetLeft,B+=c.offsetTop;while(c=c.offsetParent)}return{x:d.pageX-(p+(q+g+l)),y:d.pageY-(B+(h+e+f))}},_mapCodeToKey:function(d,c){for(var e=[8,9,13,16,17,18,20,27,91,92],q="",q=0;q<e.length;q++)if(c===e[q])return;if("boolean"===typeof d&&"number"===typeof c)return e={32:" ",48:")",49:"!",
50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},q=d?65<=c&&90>=c?String.fromCharCode(c):e[c]:65<=c&&90>=c?String.fromCharCode(c).toLowerCase():96===c?"0":97===c?"1":98===c?"2":99===c?"3":100===c?"4":101===c?"5":102===c?"6":103===c?"7":104===c?"8":105===c?"9":188===c?",":190===c?".":191===c?"/":192===c?"`":220===c?"\\":187===c?"=":189===c?"-":222===c?"'":186===c?";":219===c?"[":221===c?"]":
String.fromCharCode(c)}}})();
(function(e,d){"object"==typeof exports?module.exports=d():"function"==typeof define&&define.amd?define(d):e.Spinner=d()})(this,function(){function e(c,d){var e=document.createElement(c||"div"),g;for(g in d)e[g]=d[g];return e}function d(c){for(var d=1,e=arguments.length;d<e;d++)c.appendChild(arguments[d]);return c}function c(c,d,e,g){var h=["opacity",d,~~(100*c),e,g].join("-");e=0.01+e/g*100;g=Math.max(1-(1-c)/d*(100-e),c);var f=w.substring(0,w.indexOf("Animation")).toLowerCase();u[h]||(C.insertRule("@"+
(f&&"-"+f+"-"||"")+"keyframes "+h+"{0%{opacity:"+g+"}"+e+"%{opacity:"+c+"}"+(e+0.01)+"%{opacity:1}"+(e+d)%100+"%{opacity:"+c+"}100%{opacity:"+g+"}}",C.cssRules.length),u[h]=1);return h}function x(c,d){var e=c.style,g,h;d=d.charAt(0).toUpperCase()+d.slice(1);for(h=0;h<B.length;h++)if(g=B[h]+d,void 0!==e[g])return g;if(void 0!==e[d])return d}function q(c,d){for(var e in d)c.style[x(c,e)||e]=d[e];return c}function h(c){for(var d=1;d<arguments.length;d++){var e=arguments[d],g;for(g in e)void 0===c[g]&&
(c[g]=e[g])}return c}function g(c){for(var d={x:c.offsetLeft,y:c.offsetTop};c=c.offsetParent;)d.x+=c.offsetLeft,d.y+=c.offsetTop;return d}function f(c,d){return"string"==typeof c?c:c[d%c.length]}function l(c){if("undefined"==typeof this)return new l(c);this.opts=h(c||{},l.defaults,y)}function p(){function c(d,g){return e("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',g)}C.addRule(".spin-vml","behavior:url(#default#VML)");l.prototype.lines=function(e,g){function h(){return q(c("group",
{coordsize:B+" "+B,coordorigin:-p+" "+-p}),{width:B,height:B})}function l(a,e,Q){d(t,d(q(h(),{rotation:360/g.lines*a+"deg",left:~~e}),d(q(c("roundrect",{arcsize:g.corners}),{width:p,height:g.width,left:g.radius,top:-g.width>>1,filter:Q}),c("fill",{color:f(g.color,a),opacity:g.opacity}),c("stroke",{opacity:0}))))}var p=g.length+g.width,B=2*p,a=2*-(g.width+g.length)+"px",t=q(h(),{position:"absolute",top:a,left:a});if(g.shadow)for(a=1;a<=g.lines;a++)l(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
for(a=1;a<=g.lines;a++)l(a);return d(e,t)};l.prototype.opacity=function(c,d,e,g){c=c.firstChild;g=g.shadow&&g.lines||0;c&&d+g<c.childNodes.length&&(c=(c=(c=c.childNodes[d+g])&&c.firstChild)&&c.firstChild)&&(c.opacity=e)}}var B=["webkit","Moz","ms","O"],u={},w,C=function(){var c=e("style",{type:"text/css"});d(document.getElementsByTagName("head")[0],c);return c.sheet||c.styleSheet}(),y={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,
zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={};h(l.prototype,{spin:function(c){this.stop();var d=this,h=d.opts,f=d.el=q(e(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),l=h.radius+h.length+h.width,p,B;c&&(c.insertBefore(f,c.firstChild||null),B=g(c),p=g(f),q(f,{left:("auto"==h.left?B.x-p.x+(c.offsetWidth>>1):parseInt(h.left,10)+l)+"px",top:("auto"==h.top?B.y-p.y+(c.offsetHeight>>1):parseInt(h.top,10)+l)+"px"}));f.setAttribute("role",
"progressbar");d.lines(f,d.opts);if(!w){var a=0,t=(h.lines-1)*(1-h.direction)/2,A,G=h.fps,Q=G/h.speed,z=(1-h.opacity)/(Q*h.trail/100),S=Q/h.lines;(function n(){a++;for(var c=0;c<h.lines;c++)A=Math.max(1-(a+(h.lines-c)*S)%Q*z,h.opacity),d.opacity(f,c*h.direction+t,A,h);d.timeout=d.el&&setTimeout(n,~~(1E3/G))})()}return d},stop:function(){var c=this.el;c&&(clearTimeout(this.timeout),c.parentNode&&c.parentNode.removeChild(c),this.el=void 0);return this},lines:function(g,h){function l(c,a){return q(e(),
{position:"absolute",width:h.length+h.width+"px",height:h.width+"px",background:c,boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/h.lines*p+h.rotate)+"deg) translate("+h.radius+"px,0)",borderRadius:(h.corners*h.width>>1)+"px"})}for(var p=0,B=(h.lines-1)*(1-h.direction)/2,C;p<h.lines;p++)C=q(e(),{position:"absolute",top:1+~(h.width/2)+"px",transform:h.hwaccel?"translate3d(0,0,0)":"",opacity:h.opacity,animation:w&&c(h.opacity,h.trail,B+p*h.direction,h.lines)+" "+1/h.speed+"s linear infinite"}),
h.shadow&&d(C,q(l("#000","0 0 4px #000"),{top:"2px"})),d(g,d(C,l(f(h.color,p),"0 0 1px rgba(0,0,0,.1)")));return g},opacity:function(c,d,e){d<c.childNodes.length&&(c.childNodes[d].style.opacity=e)}});var F=q(e("group"),{behavior:"url(#default#VML)"});!x(F,"transform")&&F.adj?p():w=x(F,"animation");return l});window.m=window.m||{};
(function(e,d){var c="undefined";(function(c){e.log=c()})(function(){function e(c,g){var h=c[g];if(h.bind===d){if(Function.prototype.bind===d)return q(h,c);try{return Function.prototype.bind.call(c[g],c)}catch(f){return q(h,c)}}else return c[g].bind(c)}function q(c,d){return function(){Function.prototype.apply.apply(c,[d,arguments])}}function h(c){for(var d=0;d<u.length;d++)p[u[d]]=c(u[d])}function g(){return typeof window!==c&&window.document!==d&&window.document.cookie!==d}function f(){try{return typeof window!==
c&&window.localStorage!==d}catch(e){return!1}}function l(c){var d=!1,e,h;for(h in p.levels)if(p.levels.hasOwnProperty(h)&&p.levels[h]===c){e=h;break}if(f())try{window.localStorage.mloglevel=e}catch(l){d=!0}else d=!0;d&&g()&&(window.document.cookie="mloglevel="+e+";")}var p={},B=function(){},u=["trace","debug","info","warn","error"],w=/mloglevel=([^;]+)/;p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};p.setLevel=function(g){if("number"===typeof g&&0<=g&&g<=p.levels.SILENT)if(l(g),g===p.levels.SILENT)h(function(){return B});
else{if(typeof console===c)return h(function(d){return function(){typeof console!==c&&(p.setLevel(g),p[d].apply(p,arguments))}}),"No console available for logging";h(function(h){return g<=p.levels[h.toUpperCase()]?typeof console===c?B:console[h]===d?console.log!==d?e(console,"log"):B:e(console,h):B})}else if("string"===typeof g&&p.levels[g.toUpperCase()]!==d)p.setLevel(p.levels[g.toUpperCase()]);else throw"log.setLevel() called with invalid level: "+g;};p.enableAll=function(){p.setLevel(p.levels.TRACE)};
p.disableAll=function(){p.setLevel(p.levels.SILENT)};(function(){var c;f()&&(c=window.localStorage.mloglevel);c===d&&g()&&(c=(w.exec(window.document.cookie)||[])[1]);p.levels[c]===d&&(c="WARN");p.setLevel(p.levels[c])})();return p})})(window.m);window.m=window.m||{};
(function(e,d){function c(c){return(10>c?"0":"")+c}var x={0:["None","U"],1:["Time","sec"],2:["Delay","sec"],3:["Frequency","Hz"],4:["Time code format",""],5:["Distance","m"],6:["Speed","m/s"],7:["Acceleration","m/sec^2"],8:["Jerk","m/sec^3"],9:["Doppler","Hz"],10:["Doppler rate","Hz/sec"],11:["Energy","J"],12:["Power","W"],13:["Mass","g"],14:["Volume","l"],15:["Angular power density","W/ster"],16:["Integrated power density","W/rad"],17:["Spatial power density","W/m^2"],18:["Integrated power density",
"W/m"],19:["Spectral power density","W/MHz"],20:["Amplitude","U"],21:["Real","U"],22:["Imaginary","U"],23:["Phase","rad"],24:["Phase","deg"],25:["Phase","cycles"],26:["10*Log","U"],27:["20*Log","U"],28:["Magnitude","U"],29:["Unknown","U"],30:["Unknown","U"],31:["General dimensionless",""],32:["Counts",""],33:["Angle","rad"],34:["Angle","deg"],35:["Relative power","dB"],36:["Relative power","dBm"],37:["Relative power","dBW"],38:["Solid angle","ster"],40:["Distance","ft"],41:["Distance","nmi"],42:["Speed",
"ft/sec"],43:["Speed","nmi/sec"],44:["Speed","knots=nmi/hr"],45:["Acceleration","ft/sec^2"],46:["Acceleration","nmi/sec^2"],47:["Acceleration","knots/sec"],48:["Acceleration","G"],49:["Jerk","G/sec"],50:["Rotation","rps"],51:["Rotation","rpm"],52:["Angular velocity","rad/sec"],53:["Angular velocity","deg/sec"],54:["Angular acceleration","rad/sec^2"],55:["Angular acceleration","deg/sec^2"],60:["Latitude","deg"],61:["Longitude","deg"],62:["Altitude","ft"],63:["Altitude","m"]};e.Mc={colormap:[[{pos:0,
red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}],[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}],[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},
{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}],[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}],[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,
green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]]};e.PIPESIZE=1048576;e.initialize=function(c,d){var f=new BlueHeader(null);f.version="BLUE";f.size=0;f.type=1E3;f.format="SF";f.timecode=0;f.xstart=0;f.xdelta=1;f.xunits=0;f.subsize=1;f.ystart=0;f.ydelta=1;f.yunits=0;d||(d={});for(var l in d)f[l]=d[l];f["class"]=f.type/1E3;d.pipe?(f.pipe=!0,f.in_byte=0,f.out_byte=0,f.buf=new ArrayBuffer(d.pipesize||e.PIPESIZE),f.setData(f.buf),f.data_free=
f.dview.length):f.setData(c);return f};e.force1000=function(c){2===c["class"]&&(c.size=c.size&&!c.pipe?c.subsize*c.size:c.subsize,c.bpe/=c.subsize,c.ape=1)};e.grab=function(c,e,f,l){if(!c.dview)return 0;"C"===c.format[0]&&(f*=2);l=Math.min(e.length,c.dview.length-f);if(e.set===d)for(var p=0;p<l;p++)e[p]=c.dview[f+p];else e.set(c.dview.subarray(f,f+l));"C"===c.format[0]&&(l/=2);return l};e.filad=function(c,d,e){if(c.data_free<d.length)throw"Pipe full";var l=c.in_byte/c.dview.BYTES_PER_ELEMENT,p=l+
d.length;if(p>c.dview.length){var p=c.dview.length-l,q=d.length-p;d.subarray?(c.dview.set(d.subarray(0,p),l),c.dview.set(d.subarray(p,d.length),0)):(c.dview.set(d.slice(0,p),l),c.dview.set(d.slice(p,d.length),0));c.in_byte=q*c.dview.BYTES_PER_ELEMENT}else c.dview.set(d,l),c.in_byte=p*c.dview.BYTES_PER_ELEMENT%c.buf.byteLength;c.data_free-=d.length;if(c.onwritelisteners)for(d=0;d<c.onwritelisteners.length;d++)if(e)c.onwritelisteners[d]();else window.setTimeout(c.onwritelisteners[d],0)};e.pavail=function(c){return c.dview.length-
c.data_free};e.grabx=function(c,e,f,l){var p=c.dview.length-c.data_free;l===d&&(l=0);if(!f)f=Math.min(e.length-l,p);else if(f>e.length-l)throw"m.grabx : nget larger then available buffer space";if(0>f)throw"m.grabx : nget cannot be negative";if(f>p)return 0;var p=c.out_byte/c.dview.BYTES_PER_ELEMENT,q=p+f;if(q>=c.dview.length){var u=c.dview.length-p,q=q-c.dview.length;e.set(c.dview.subarray(p,c.dview.length),l);e.set(c.dview.subarray(0,q),l+u)}else e.set(c.dview.subarray(p,q),l);c.out_byte=q*c.dview.BYTES_PER_ELEMENT%
c.buf.byteLength;c.data_free+=f;return f};e.addPipeWriteListener=function(c,d){c.onwritelisteners||(c.onwritelisteners=[]);-1===c.onwritelisteners.indexOf(d)&&c.onwritelisteners.push(d)};e.units_name=function(c){c=x[c];return c[0]+" ("+c[1]+")"};e.trim_name=function(c){var d=c.indexOf("]");-1===d&&(d=c.indexOf("/"));-1===d&&(d=c.indexOf(":"));var e=c.substr(d+1,c.length).indexOf(".");0>e&&(e=c.length-d);return c.substr(d+1,d+e+1)};e.label=function(c,e){var f=x[c];if(f===d)return"";var l="?";1E3===
e?l="K":0.001===e?l="m":1E6===e?l="M":1E-6===e?l="u":1E9===e?l="G":1E-9===e?l="n":1E12===e?l="T":1E-12===e?l="p":1===e&&(l="");return f[0]+" ("+l+f[1]+")"};var q="F";e.vstype=function(c){q=c;"D"===q||"L"===q||"F"===q||"I"===q||"B"===q||alert("Unsupported vector type")};e.vlog10=function(c,e,f){e===d&&(e=1E-20);f===d&&(f=c);for(var l=0;l<c.length&&!(f.length<=l);l++)f[l]=Math.log(Math.max(c[l],e))/Math.log(10)};e.vlogscale=function(c,e,f,l){e===d&&(e=1E-20);f===d&&(f=1);l===d&&(l=c);for(var p=0;p<
c.length&&!(l.length<=p);p++)l[p]=Math.log(Math.abs(Math.max(c[p],e)))/Math.log(10),l[p]*=f};e.cvmag2logscale=function(c,e,f,l){e===d&&(e=1E-20);f===d&&(f=1);l===d&&(l=c);for(var p=0,q=0;q<l.length;q++){p=2*q+1;if(p>=c.length)break;l[q]=c[p-1]*c[p-1]+c[p]*c[p];l[q]=Math.log(Math.abs(Math.max(l[q],e)))/Math.log(10);l[q]*=f}};e.vsmul=function(c,e,f,l){f===d&&(f=c);l===d&&(l=f.length);l=Math.min(f.length,l);l=Math.min(c.length,l);for(var p=0;p<l&&!(f.length<=p);p++)f[p]=c[p]*e};e.vmxmn=function(c,d){var e=
c[0],l=c[0],p=0,q=0;d=Math.min(d,c.length);for(var u=0;u<d;u++)c[u]>e&&(e=c[u],p=u),c[u]<l&&(l=c[u],q=u);return{smax:e,smin:l,imax:p,imin:q}};e.vmov=function(c,e,f,l,p){p===d&&(p=c.length);p=Math.min(c.length,p);for(var q=0;q<p;q++){var u=q*e,x=q*l;if(u>=c.length)break;if(x>=f.length)break;f[x]=c[u]}};e.vfill=function(c,e,f){f===d&&(f=c.length);f=Math.min(c.length,f);for(var l=0;l<f;l++)c[l]=e};e.vabs=function(c,e,f){f===d&&(f=c.length);e===d&&(e=c);for(var l=0;l<f;l++)e[l]=Math.abs(c[l])};e.cvmag=
function(c,e,f){f===d&&(f=e.length);f=Math.min(e.length,f);for(var l=0;l<f;l++){var p=2*l+1;if(p>=c.length)break;e[l]=Math.sqrt(c[p-1]*c[p-1]+c[p]*c[p])}};e.cvmag2=function(c,e,f){f===d&&(f=e.length);f=Math.min(e.length,f);for(var l=0,p=0;p<f;p++){l=2*p+1;if(l>=c.length)break;e[p]=c[l-1]*c[l-1]+c[l]*c[l]}};e.cvpha=function(c,e,f){f===d&&(f=e.length);f=Math.min(e.length,f);for(var l=0,p=0,q=l=0;q<f;q++){l=2*q+1;if(l>=c.length)break;p=c[l-1];l=c[l];0===p&&0===l&&(p=1);e[q]=Math.atan2(l,p)}};e.cvphad=
function(c,e,f){f===d&&(f=e.length);f=Math.min(e.length,f);for(var l=0,p=0,q=l=0;q<f;q++){l=2*q+1;if(l>=c.length)break;p=c[l-1];l=c[l];0===p&&0===l&&(p=1);e[q]=Math.atan2(l,p)*(180/Math.PI)}};e.trunc=function(c){return c-c%1};e.sign=function(c,d){return 0<=d?Math.abs(c):-Math.abs(c)};e.sec2tod=function(d){var e="",f=Date.UTC(1950,0,1);Date.UTC(1949,11,31);var l=new Date,e=new Date(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0,0),p=new Date(l.getFullYear(),l.getMonth(),l.getDate()+1,0,0,0,0),q=new Date(l.getFullYear(),
0,1,0,0,0,0),u=new Date(l.getFullYear()+1,0,1,0,0,0),l=(p-e)/1E3,q=(u-q)/1E3,p=-1*q;0<=d?d<l?(e=e.getTime()+1E3*d,l=new Date(e),e=c(l.getHours())+":"+c(l.getMinutes())+":"+c(l.getSeconds())+":"+c(l.getUTCMilliseconds())):d<q?(f=d/l,f=[0<f?Math.floor(f):Math.ceil(f)],l=new Date(1E3*d+e.getTime()),e=f.toString()+"::"+c(l.getHours())+":"+c(l.getMinutes())+":"+c(l.getSeconds())+":"+c(l.getUTCMilliseconds())):(l=new Date(1E3*d+f),e=l.getUTCFullYear()+":"+c(l.getUTCMonth())+":"+c(l.getUTCDate())+"::"+c(l.getUTCHours())+
":"+c(l.getUTCMinutes())+":"+c(l.getUTCSeconds())+":"+c(l.getUTCMilliseconds())):d>p?(f=d/l,f=[0>=f?Math.ceil(f):Math.floor(f)],l=new Date(Math.abs(1E3*d)+e.getTime()),e=f.toString()+"::"+c(l.getHours())+":"+c(l.getMinutes())+":"+c(l.getSeconds())+":"+c(l.getUTCMilliseconds())):(l=new Date(1E3*d+f),e=l.getUTCFullYear()+":"+c(l.getUTCMonth())+":"+c(l.getUTCDate())+"::"+c(l.getUTCHours())+":"+c(l.getUTCMinutes())+":"+c(l.getUTCSeconds())+":"+c(l.getUTCMilliseconds()));0!==d%1&&(e+="."+(d%1).toPrecision(6).slice(2,
8));return e};e.sec2tod_j1970=function(d){var e="";0<=d&&86400>d?(e=new Date(1E3*d),e=c(e.getHours())+":"+c(e.getMinutes())+":"+c(e.getSeconds())):0>d&&-31536E3<d?(e=new Date(1E3*d),e=(d/86400*-1).toString()+"::"+c(e.getHours())+":"+c(e.getMinutes())+":"+c(e.getSeconds())):(e=new Date(1E3*(d-631152E3)),e=e.getFullYear()+":"+c(e.getMonth())+":"+c(e.getDate())+"::"+c(e.getHours())+":"+c(e.getMinutes())+":"+c(e.getSeconds()));0!==d%1&&(e+="."+(d%1).toPrecision(6).slice(2,8));return e};e.throttle=function(c,
d){var e=(new Date).getTime();return function(){var l=(new Date).getTime();l-e>=c&&(e=l,d.apply(null,arguments))}}})(window.m);window.mx=window.mx||{};
(function(e,d,c){function x(){this.ymax=this.ymin=this.xmax=this.xmin=this.yl=this.xl=this.yo=this.xo=0;this.mode=this.func=c}function q(a){this.root=a;this.parent=document.createElement("div");this.parent.style.position="relative";this.parent.width=a.clientWidth;this.parent.height=a.clientHeight;a.appendChild(this.parent);this.canvas=document.createElement("canvas");this.canvas.style.position="absolute";this.canvas.style.top="0px";this.canvas.style.left="0px";this.canvas.width=a.clientWidth;this.canvas.height=
a.clientHeight;this.parent.appendChild(this.canvas);this.active_canvas=this.canvas;this.wid_canvas=document.createElement("canvas");this.wid_canvas.style.position="absolute";this.wid_canvas.style.top="0px";this.wid_canvas.style.left="0px";this.wid_canvas.style.zIndex=1;this.wid_canvas.width=a.clientWidth;this.wid_canvas.height=a.clientHeight;this.parent.appendChild(this.wid_canvas);this.level=this.text_h=this.text_w=0;this.width=this.parent.width;this.height=this.parent.height;this.ymrk=this.xmrk=
this.ypos=this.xpos=0;this.origin=1;this.stk=[new e.STKSTRUCT];e.setbgfg(this,"black","white");this.warpbox=this.event_cb=c;this.rmode=!1;this.linewidth=1;this.style=c;this.xi=!1;this.l=this.state_mask=this.button_press=this.button_release=0;this.r=this.width;this.t=0;this.b=this.height;this.scrollbar_x=new e.SCROLLBAR;this.scrollbar_y=new e.SCROLLBAR;this.prompt=c;this.pixel=[];this._renderCanvas=document.createElement("canvas")}function h(a,c,d,e,g,z,f){g<=d?f>d&&0<(e-c)*(f-d)-(z-c)*(g-d)&&(a+=
1):f<=d&&0>(e-c)*(f-d)-(z-c)*(g-d)&&(a-=1);return a}function g(a,d){d.animationFrameHandle||(d.animationFrameHandle=requestAnimFrame(e.withWidgetLayer(a,function(){e.erase_window(a);d.animationFrameHandle=c;var A=1.5*a.text_h;d.x=Math.max(d.x,0);d.y=Math.max(d.y,0);d.x=Math.min(d.x,a.width-d.w);d.y=Math.min(d.y,a.height-d.h);var G=d.x+J.GBorder+Math.max(0,J.sidelab),g=d.y+J.GBorder+J.toplab*(A+J.GBorder),z=d.w-2*J.GBorder-Math.abs(J.sidelab);e.widgetbox(a,d.x,d.y,d.w,d.h,G,g,z,d.h-2*J.GBorder-J.toplab*
(A+J.GBorder),d.title);var f=a.wid_canvas.getContext("2d");f.lineWidth=1;f.strokeStyle=a.xwbs;f.beginPath();f.moveTo(G,g-4+0.5);f.lineTo(G+z-1,g-4+0.5);f.stroke();f.strokeStyle=a.xwts;f.beginPath();f.moveTo(G,g-3+0.5);f.lineTo(G+z-1,g-3+0.5);f.stroke();for(var r=0;r<d.items.length;r++){var n=d.items[r],s=g+A*r;"separator"===n.style?(f.fillStyle=a.xwbs,f.fillRect(G,s,z,A),f.beginPath(),f.moveTo(G,s+0.5),f.lineTo(G+z,s+0.5),f.stroke(),f.textBaseline="middle",f.textAlign="left",f.fillStyle=a.xwfg,f.fillText(" "+
n.text+" ",G+2*a.text_w,s+A/2)):(f.fillStyle=a.xwlo,f.fillRect(G,s,z,A),f.beginPath(),f.moveTo(G,s+0.5),f.lineTo(G+z,s+0.5),f.stroke(),n.selected&&e.shadowbox(a,G-1,s,z+2,A,1,2,"",0),f.textBaseline="middle",f.textAlign="left",f.fillStyle=a.xwfg,"checkbox"===n.style?(f.fillText(" "+n.text+" ",G+2*a.text_w,s+A/2),f.strokeStyle=a.xwfg,f.strokeRect(G+1+a.text_w,s+(A-a.text_w)/2,a.text_w,a.text_w),n.checked&&(f.beginPath(),f.moveTo(G+1+a.text_w,s+(A-a.text_w)/2),f.lineTo(G+1+a.text_w+a.text_w,s+(A-a.text_w)/
2+a.text_w),f.stroke(),f.beginPath(),f.moveTo(G+1+a.text_w+a.text_w,s+(A-a.text_w)/2),f.lineTo(G+1+a.text_w,s+(A-a.text_w)/2+a.text_w),f.stroke())):(f.fillText(" "+n.text+" ",G,s+A/2),n.checked&&(f.beginPath(),f.moveTo(G+1,s+a.text_h/4),f.lineTo(G+1+a.text_w-2,s+a.text_h/4+a.text_h/2),f.lineTo(G+1,s+a.text_h/4+a.text_h),f.lineTo(G+1,s+a.text_h/4),f.fill())))}})))}function f(a,d){e.onWidgetLayer(a,function(){e.erase_window(a)});a.menu=c;a.widget=null;for(var A=0;A<d.items.length;A++){var G=d.items[A];
if(G.selected){G.handler?G.handler():G.menu&&(A=G.menu,"function"===typeof G.menu&&(A=G.menu()),A.finalize=d.finalize,e.menu(a,A));break}}!a.menu&&d.finalize&&d.finalize()}function l(a,d){e.onWidgetLayer(a,function(){e.erase_window(a)});a.menu=c;a.widget=null;!a.menu&&d.finalize&&d.finalize()}function p(a,c,d){var e=!0,g;g=c/a;0<a?g>d.tL?e=!1:g>d.tE&&(d.tE=g):0>a?g<d.tE?e=!1:g<d.tL&&(d.tL=g):0<c&&(e=!1);return e}function B(a,c,d,e,g,f,h,r){0>c&&(c=0);0>d&&(d=0);0>e&&(e=0);0>g&&(g=0);r&&(a.lineWidth=
r);h&&(a.strokeStyle=h);1===a.lineWidth%2&&(c===e&&(e=c=Math.floor(c)+0.5),d===g&&(g=d=Math.floor(d)+0.5));if(!f||!f.mode)a.beginPath(),a.moveTo(c,d),a.lineTo(e,g),a.stroke(),a.beginPath();else if("dashed"===f.mode){if(dashOn(a,f.on,f.off))a.beginPath(),a.moveTo(c,d),a.lineTo(e,g),a.stroke(),dashOff(a);else if(a.beginPath(),d===g)for(g=Math.min(c,e),e=Math.max(c,e);g<e;)a.moveTo(g,d),a.lineTo(g+f.on,d),a.stroke(),g+=f.on+f.off;else if(c===e)for(e=Math.min(d,g),g=Math.max(d,g);e<g;)a.moveTo(c,e),a.lineTo(c,
e+f.on),a.stroke(),e+=f.on+f.off;else throw"Only horizontal or vertical dashed lines are supported";a.beginPath()}else if("xor"===f.mode)if("undefined"===typeof Uint8ClampedArray)a.beginPath(),a.moveTo(c,d),a.lineTo(e,g),a.stroke(),a.beginPath();else{h=f=0;if(d===g)f=Math.abs(e-c),h=r,c=Math.min(c,e);else if(c===e)f=r,h=Math.abs(g-d),d=Math.min(d,g);else throw"Only horizontal and vertical lines can be drawn with XOR";if(0!==f&&0!==h){c=Math.floor(c);d=Math.floor(d);e=a.getImageData(c,d,f,h);g=e.data;
f=0;for(r=g.length;f<r;f+=4)g[f]=255-g[f],g[f+1]=255-g[f+1],g[f+2]=255-g[f+2],g[f+3]=255;a.putImageData(e,c,d);a.clearRect(0,0,1,1)}}}function u(a,c,d,e,g){w(a,c,g);d&&(a.strokeStyle=d);e&&(a.fillStyle=e);a.fill();a.closePath()}function w(a,c,d){if(!(1>c.length)){var e=c[0].x,g=c[0].y;a.lineWidth=d?d:1;a.beginPath();a.moveTo(e,g);for(d=0;d<c.length;d++)e=c[d].x,g=c[d].y,a.lineTo(e,g)}}function C(a){return Math.floor(Math.round(a/100*255))}function y(a,c,d){return"rgb("+Math.round(a)+", "+Math.round(c)+
", "+Math.round(d)+")"}function F(a,c){var d,e;if(".000000"===a.substring(5,8))d=4;else for(d=a.length-1;"0"===a[d];)d-=1;for(e=0;" "===a[e]&&(5<d-e+1||c);)e+=1;d=a.substring(e,d+1);-1===d.indexOf(".")&&(d+=".");return d}function E(a){a._animationFrameHandle=c;var d=a.warpbox;a.active_canvas.getContext("2d");if(d&&a.xpos>=d.xmin&&a.xpos<=d.xmax&&a.ypos>=d.ymin&&a.ypos<=d.ymax){d.xl=a.xpos;d.yl=a.ypos;var A=Math.min(d.xo,d.xl),g=Math.min(d.yo,d.yl),f=Math.abs(d.xl-d.xo),z=Math.abs(d.yl-d.yo);0!==f&&
0!==z&&("vertical"===d.mode?(A=a.l,f=a.r-a.l):"horizontal"===d.mode&&(g=a.t,z=a.b-a.t),e.onWidgetLayer(a,function(){e.erase_window(a);e.draw_box(a,"xor",A,g,f,z,d.style.opacity,d.style.fill_color)}))}}function K(a,c,d){return a<c?c:a>d?d:a}function U(a,d,e,g,f,z,h,r,n,s,k,v,D){s===c&&(s=0);k===c&&(k=0);v===c&&(v=e.width-s);D===c&&(D=e.height-k);a._renderCanvas.width=e.width;a._renderCanvas.height=e.height;for(var l=a._renderCanvas.getContext("2d"),p=l.createImageData(a._renderCanvas.width,a._renderCanvas.height),
q=new Uint8Array(e),u=0;u<e.height;++u)for(var R=0;R<e.width;++R){var N=4*(u*e.width+R);p.data[N]=q[N];p.data[N+1]=q[N+1];p.data[N+2]=q[N+2];p.data[N+3]=255}l.putImageData(p,0,0);d.save();d.globalAlpha=g;f||(d.imageSmoothingEnabled=!1,d.mozImageSmoothingEnabled=!1,d.webkitImageSmoothingEnabled=!1);d.drawImage(a._renderCanvas,s,k,v,D,z,h,r,n);d.restore()}function T(a,d,e,g,f,z,h,r,n,s,k,v,D){s===c&&(s=0);k===c&&(k=0);v===c&&(v=e.width-s);D===c&&(D=e.height-k);if(32768>e.width&&32768>e.height){a._renderCanvas.width=
e.width;a._renderCanvas.height=e.height;var l=a._renderCanvas.getContext("2d"),p=l.createImageData(a._renderCanvas.width,a._renderCanvas.height);e=new Uint8ClampedArray(e);p.data.set(e);l.putImageData(p,0,0)}else 32768>v&&32768>D?(a._renderCanvas.width=v,a._renderCanvas.height=D,O(a._renderCanvas,e,s,k,v,D)):(a._renderCanvas.width=Math.min(2*r,e.width),a._renderCanvas.height=Math.min(2*n,e.height),O(a._renderCanvas,e,s,k,v,D),v=a._renderCanvas.width,D=a._renderCanvas.height),k=s=0;d.save();d.globalAlpha=
g;f||(d.imageSmoothingEnabled=!1,d.mozImageSmoothingEnabled=!1,d.webkitImageSmoothingEnabled=!1);d.drawImage(a._renderCanvas,s,k,v,D,z,h,r,n);d.restore()}function O(a,c,d,e,g,f){var h=new Uint32Array(c);g||(g=c.width);f||(f=c.height);d||(d=0);e||(e=0);var r=a.width,n=a.height;a=a.getContext("2d");var s=a.createImageData(r,n),k=new ArrayBuffer(s.data.length),v=new Uint8ClampedArray(k),k=new Uint32Array(k);g/=r;f/=n;for(var D=0,l=0,n=D=0;n<k.length;n++)D=Math.round(Math.floor(n%r)*g)+d,l=Math.round(Math.floor(n/
r)*f)+e,D=Math.floor(l*c.width+D),k[n]=h[D];s.data.set(v);a.putImageData(s,0,0)}e.XW_INIT=-3;e.XW_DRAW=1;e.XW_EVENT=2;e.XW_UPDATE=3;e.XW_COMMAND=5;e.SB_EXPAND=1;e.SB_SHRINK=2;e.SB_FULL=3;e.SB_STEPINC=4;e.SB_STEPDEC=5;e.SB_PAGEINC=6;e.SB_PAGEDEC=7;e.SB_DRAG=8;e.SB_WHEELUP=9;e.SB_WHEELDOWN=10;e.L_ArrowLeft=1001;e.L_ArrowRight=1002;e.L_ArrowUp=1003;e.L_ArrowDown=1004;e.L_dashed=801;e.GBorder=3;e.L_RModeOff=900;e.L_RModeOn=901;e.L_PixelSymbol=1;e.L_CircleSymbol=2;e.L_SquareSymbol=3;e.L_PlusSymbol=4;e.L_XSymbol=
5;e.L_TriangleSymbol=6;e.L_ITriangleSymbol=7;e.L_HLineSymbol=8;e.L_VLineSymbol=9;e.STKSTRUCT=function(){this.y2=this.x2=this.y1=this.x1=this.yscl=this.xscl=this.ymax=this.ymin=this.xmax=this.xmin=0};e.SCROLLBAR=function(){this.repeat_count=this.origin=this.mxevent=this.arrow=this.a2=this.a1=this.soff=this.swmin=this.sw=this.s1=this.h=this.w=this.y=this.x=this.repeat_pause=this.initial_pause=this.dragoutline=this.scale=this.page=this.step=this.trange=this.tmin=this.srange=this.smin=this.action=this.flag=
null};e.open=function(a){a=new q(a);a.wid_canvas.oncontextmenu=function(a){a.preventDefault();return!1};this._ctx=a.active_canvas.getContext("2d");a.onmousemove=function(a){return function(d){var g=d.target.getBoundingClientRect();a.xpos=d.offsetX===c?d.pageX-g.left-window.scrollX:d.offsetX;a.ypos=d.offsetX===c?d.pageY-g.top-window.scrollY:d.offsetY;a.warpbox&&(a.warpbox.style=(d.ctrlKey||d.metaKey)&&a.warpbox.alt_style!==c?a.warpbox.alt_style:a.warpbox.def_style,e.redraw_warpbox(a));e.widget_callback(a,
d)}}(a);a.onmouseup=function(a){return function(d){if(a.warpbox){e.onWidgetLayer(a,function(){e.erase_window(a)});var g=a.warpbox;a.warpbox=c;if(1===d.which&&g.func){var f=g.xo,z=g.yo,h=g.xl,r=g.yl;"vertical"===g.mode?(f=a.l,h=a.r):"horizontal"===g.mode&&(z=a.t,r=a.b);g.func(d,f,z,h,r,g.style.return_value)}}e.widget_callback(a,d)}}(a);a.onmousedown=function(a){return function(c){c.preventDefault();e.widget_callback(a,c);return!1}}(a);a.onkeydown=function(a){return function(c){if(a.warpbox){var d=
getKeyCode(c);17!==d&&224!==d&&91!==d&&93!==d||a.warpbox.style===a.warpbox.alt_style||(a.warpbox.style=a.warpbox.alt_style,e.redraw_warpbox(a))}e.widget_callback(a,c)}}(a);a.onkeyup=function(a){return function(c){a.warpbox&&(c=getKeyCode(c),17!==c&&224!==c&&91!==c&&93!==c||a.warpbox.style===a.warpbox.def_style||(a.warpbox.style=a.warpbox.def_style,e.redraw_warpbox(a)))}}(a);a.ontouchend=function(a){return function(c){a.onmouseup({which:1})}}(a);a.ontouchmove=function(a){return function(d){var g=a.canvas,
f=0,h=0;if(g.offsetParent!==c){do f+=g.offsetLeft,h+=g.offsetTop;while(g=g.offsetParent)}a.xpos=d.targetTouches[0].pageX-f;a.ypos=d.targetTouches[0].pageY-h;e.redraw_warpbox(a)}}(a);e.enableListeners(a);return a};e.enableListeners=function(a){e.addEventListener(a,"mousemove",a.onmousemove,!1);window.addEventListener("mouseup",a.onmouseup,!1);e.addEventListener(a,"mousedown",a.onmousedown,!1);window.addEventListener("keydown",a.onkeydown,!1);window.addEventListener("keyup",a.onkeyup,!1)};e.disableListeners=
function(a){e.removeEventListener(a,"mousemove",a.onmousemove,!1);window.removeEventListener("mouseup",a.onmouseup,!1);e.removeEventListener(a,"mousedown",a.onmousedown,!1);window.removeEventListener("keydown",a.onkeydown,!1);window.removeEventListener("keyup",a.onkeyup,!1)};e.addEventListener=function(a,c,d,e){return a.wid_canvas.addEventListener(c,d,e)};e.removeEventListener=function(a,c,d,e){return a.wid_canvas.removeEventListener(c,d,e)};e.dispatchEvent=function(a,c){return a.wid_canvas.dispatchEvent(c)};
e.onWidgetLayer=function(a,c){var d=a.active_canvas;a.active_canvas=a.wid_canvas;try{if(c)return c()}finally{a.active_canvas=d}};e.withWidgetLayer=function(a,c){return function(){e.onWidgetLayer(a,c)}};e.render=function(a,d){if(d){var e=a.active_canvas;e._animationFrameHandle||(e._animationFrameHandle=requestAnimFrame(function(){e._animationFrameHandle=c;d()}))}};e.fullscreen=function(a,d){d===c&&(d=!a.fullscreen);d?(a.fullscreen={position:a.root.style.position,height:a.root.style.height,width:a.root.style.width,
left:a.root.style.left,top:a.root.style.top,zIndex:a.root.style.zIndex},a.root.style.position="fixed",a.root.style.height="100%",a.root.style.width="100%",a.root.style.left="0px",a.root.style.top="0px",a.root.style.zIndex=16777271):(a.root.style.position=a.fullscreen.position,a.root.style.height=a.fullscreen.height,a.root.style.width=a.fullscreen.width,a.root.style.left=a.fullscreen.left,a.root.style.top=a.fullscreen.top,a.root.style.zIndex=a.fullscreen.zIndex,a.fullscreen=c);e.checkresize(a)};e.checkresize=
function(a){var c=a.canvas;return c.height!==a.root.clientHeight||c.width!==a.root.clientWidth?(a.height=a.root.clientHeight,a.width=a.root.clientWidth,a.canvas.height=a.height,a.canvas.width=a.width,a.wid_canvas.height=a.height,a.wid_canvas.width=a.width,!0):!1};e.invertbgfg=function(a){e.setbgfg(a,a.fg,a.bg,!a.xi)};e.mixcolor=function(a,c,d){a=tinycolor(a).toRgb();c=tinycolor(c).toRgb();var e=1-d;c.r=a.r*e+c.r*d;c.g=a.g*e+c.g*d;c.b=a.b*e+c.b*d;return tinycolor(c).toHexString(!0)};e.linear_gradient=
function(a,c,d,e,g,f){var h=a.active_canvas.getContext("2d");a=1/f.length;c=h.createLinearGradient(c,d,e,g);for(d=0;d<f.length-1;d++)c.addColorStop(a*d,f[d]);c.addColorStop(1,f[f.length-1]);return c};e.setbgfg=function(a,c,d,g){a.bg=c;a.fg=d;a.xi=g;tinycolor.equals(a.bg,"black")&&tinycolor.equals(a.fg,"white")?(a.xwfg=a.fg,a.xwbg="rgb(35%,35%,30%)",a.xwts="rgb(60%,60%,55%)",a.xwbs="rgb(25%,25%,20%)",a.xwms=e.mixcolor(a.xwts,a.xwbs,0.5),a.xwlo="rgb(15%,15%,10%)",a.hi=a.xwts):tinycolor.equals(a.bg,
"white")&&tinycolor.equals(a.fg,"black")?(a.xwfg=a.fg,a.xwbg="rgb(60%,60%,55%)",a.xwts="rgb(80%,80%,75%)",a.xwbs="rgb(40%,40%,35%)",a.xwms=e.mixcolor(a.xwts,a.xwbs,0.5),a.xwlo="rgb(70%,70%,65%)",a.hi=a.xwbs):(c=tinycolor(a.bg).toRgb(),127.5<Math.sqrt(0.299*c.r*c.r+0.587*c.g*c.g+0.114*c.b*c.b)?(a.xwfg="black",a.xwbg="rgb(60%,60%,55%)",a.xwts="rgb(80%,80%,75%)",a.xwbs="rgb(40%,40%,35%)",a.xwms=e.mixcolor(a.xwts,a.xwbs,0.5),a.xwlo="rgb(70%,70%,65%)",a.hi=a.xwts):(a.xwfg="white",a.xwbg="rgb(35%,35%,30%)",
a.xwts="rgb(60%,60%,55%)",a.xwbs="rgb(25%,25%,20%)",a.xwms=e.mixcolor(a.xwts,a.xwbs,0.5),a.xwlo="rgb(15%,15%,10%)",a.hi=a.xwbs))};e.settheme=function(a,c){a.bg=c.bg;a.fg=c.fg;a.xi=c.xi;a.xwfg=c.xwfg;a.xwbg=c.xwbg;a.xwts=c.xwts;a.xwbs=c.xwbs;a.xwlo=c.xwlo;a.hi=c.hi};e.close=function(a){var c=a.wid_canvas;c.removeEventListener("mousemove",a.onmousemove,!1);c.removeEventListener("mouseup",a.onmouseup,!1);a.parent&&a.parent.parentNode&&a.parent.parentNode.removeChild(a.parent)};e.scrollbar=function(a,
d,g,f,h,z,l,r,n,s,k){var v,D,H,p=0,q=new e.SCROLLBAR;v=d.flag!==c?d.flag:d;D=Math.abs(v);H=z-h>f-g?3>a.origin?2:4:a.origin&2?3:1;10>D&&(d=q);if(10>D||0===d.action)e.scroll(a,d,e.XW_INIT,c,k),d.flag=v,d.initial_pause=-1,e.scroll_loc(d,g,h,f-g+1,z-h+1,H,k);d.srange=l.pe-l.ps;switch(D){case 0:g=f=h=1;break;case 1:case 11:g=f=0.9*d.srange;h=2;break;case 2:case 12:g=0.1*d.srange;f=9*g;h=2;break;case 3:case 13:g=1;f=d.srange-1;h=1;break;default:return 0}e.scroll_vals(d,l.ps,d.srange,r,n-r,g,f,h,k);0===
v?e.scroll(a,d,e.XW_DRAW,c,c):e.scroll(a,d,e.XW_EVENT,s,k)&&(l.ps!==d.smin&&(l.ps=d.smin,p+=1),l.pe!==d.smin+d.srange&&(l.pe=d.smin+d.srange,p+=2));return p};e.scroll=function(a,d,g,f,h){var z;if(d===c)return!1;switch(g){case e.XW_INIT:e.scroll_loc(d,0,0,a.width,20,1,h);e.scroll_vals(d,0,10,0,100,1,10,1,h);d.flag=0;d.action=0;d.initial_pause=0.25;d.repeat_pause=0.05;d.mxevent=!0;d.repeat_count=0;break;case e.XW_EVENT:z=0;if(d.mxevent)z=a.button_release?-a.button_release:a.button_press;else if("mousedown"===
f.type||"mouseup"===f.type){switch(f.which){case 1:z=1;break;case 2:z=2;break;case 3:z=3;break;case 4:z=4;break;case 5:z=5}"mouseup"===f.type&&(z=-z)}else if("mousewheel"===f.type||"DOM-MouseScroll"===f.type)f.wheelDelta&&0<f.wheelDelta?z=4:f.wheelDelta&&0>f.wheelDelta&&(z=5);if(0===d.action){if(4===z||5===z)a.xpos=d.x;if(1!==z&&2!==z&&4!==z&&5!==z||a.xpos<d.x||a.ypos<d.y||a.xpos>d.x+d.w||a.ypos>d.y+d.h)return!1}else if(0>z){d.action=d.repeat_count=0;break}d.origin&1?(f=a.xpos-d.x,d.origin&2&&(f=
d.w-f)):(f=a.ypos-d.y,2>=d.origin&&(f=d.h-f));if(0===d.action){d.repeat_count=0;var l=e.scroll_real2pix(d);d.s1=h.s1=l.s1;d.sw=h.sw=l.sw;d.soff=h.soff=f-d.s1;if(0===d.trange)d.smin=h.smin=d.tmin,d.srange=h.srange=0;else switch(z){case 1:d.action=f>d.a1&&f<d.a2?0<d.soff?e.SB_PAGEINC:e.SB_PAGEDEC:0<d.soff?e.SB_STEPINC:e.SB_STEPDEC;break;case 4:d.action=e.SB_WHEELUP;break;case 5:d.action=e.SB_WHEELDOWN;break}}else switch(d.action){case e.SB_WHEELUP:case e.SB_WHEELDOWN:case e.SB_EXPAND:case e.SB_SHRINK:case e.SB_FULL:d.action=
d.repeat_count=0}case e.XW_COMMAND:z=d.smin;f=d.srange;switch(d.action){case e.SB_STEPINC:z+=d.step;break;case e.SB_STEPDEC:z-=d.step;break;case e.SB_PAGEINC:z+=d.page;break;case e.SB_PAGEDEC:z-=d.page;break;case e.SB_FULL:z=d.tmin;f=d.trange;break;case e.SB_EXPAND:f*=d.scale;z=0>=z&&0<=z+d.srange?z*d.scale:z-(f-d.srange)/2;break;case e.SB_SHRINK:f/=d.scale;z=0>z&&0<=z+d.srange?z+f/d.scale:0===z&&0<=z+d.srange?f/d.scale:z+(d.srange-f)/2;break;case e.SB_WHEELUP:z-=d.page;break;case e.SB_WHEELDOWN:z+=
d.page}0<d.trange?(z=Math.max(d.tmin,Math.min(z,d.tmin+d.trange-f)),f=Math.min(f,d.trange)):(z=Math.min(d.tmin,Math.max(z,d.tmin+d.trange-f)),f=Math.max(f,d.trange));d.smin===z&&d.srange===f?d.action!==e.SB_DRAG&&(d.action=d.repeat_count=0):(d.smin=h.smin=z,d.srange=h.srange=f,d.repeat_count++);g===e.XW_COMMAND&&(e.scroll(a,d,e.XW_UPDATE,c),d.action=0);break;case e.XW_DRAW:case e.XW_UPDATE:e.redrawScrollbar(d,a,g)}return!0};e.scroll_loc=function(a,f,g,h,l,z,p){a!==c&&(a.x=p.x=f,a.y=p.y=g,a.w=p.w=
h,a.h=p.h=l,a.origin=p.origin=Math.max(1,Math.min(4,z)),a.origin&1?(a.a2=p.a2=a.w,a.arrow=p.arrow=Math.min(d.trunc((a.w-d.trunc(2*e.GBorder))/3),a.h+e.GBorder)):(a.a2=p.a2=a.h,a.arrow=p.arrow=Math.min(d.trunc((a.h-d.trunc(2*e.GBorder))/3),a.w+e.GBorder)),a.a1=p.a1=a.arrow+e.GBorder,a.a2-=a.arrow+e.GBorder,p.a2-=a.arrow+e.GBorder,a.swmin=p.swmin=Math.min(10,a.a2-a.a1),a.s1=p.s1=0,a.sw=p.sw=0,a.action=p.action=0)};e.scroll_vals=function(a,d,e,f,g,h,l,r,n){a!==c&&(a.smin=n.smin=d,a.srange=n.srange=e,
a.tmin=n.tmin=f,a.trange=n.trange=g,a.step=n.step=h,a.page=n.page=l,a.scale=n.scale=Math.max(r,1))};e.draw_symbol=function(a,c,d,f,g,h){var l=new Int32Array(new ArrayBuffer(4)),r=new Int32Array(new ArrayBuffer(4));l[0]=d;r[0]=f;e.draw_symbols(a,c,l,r,1,g,h)};e.draw_symbols=function(a,c,f,g,h,l,p){for(var r=a.active_canvas.getContext("2d"),n=0,s=0,k=0,v=0,D=0,D=!1,H=[],n=0;4>n;n++)H[n]={x:0,y:0};v="";D=0>p;s=Math.abs(p);k=2*s;r.fillStyle=c;r.strokeStyle=c;switch(l){case e.L_CircleSymbol:for(n=0;n<
h;n++)H=f[n],a=g[n],r.beginPath(),D?(r.arc(H,a,s,0,360),r.fill()):(r.arc(H,a,s,0,360),r.stroke());break;case e.L_SquareSymbol:if(D)for(n=0;n<h;n++)r.fillRect(f[n]-s,g[n]-s,k,k);else for(n=0;n<h;n++)r.strokeRect(f[n]-s,g[n]-s,k,k);break;case e.L_PixelSymbol:k=1;for(n=0;n<h;n+=k)r.beginPath(),r.arc(f[n],g[n],1,0,2*Math.PI,!0),r.fill();break;case e.L_ITriangleSymbol:s=-s;case e.L_TriangleSymbol:k=d.trunc(1.5*s);v=d.trunc(0.8*s);H[1].x=-v;H[1].y=k;H[2].x=2*v;H[2].y=0;H[3].x=-v;H[3].y=-k;a=[];for(n=0;4>
n;n++)a[n]={x:0,y:0};if(D)for(n=0;n<h;n++)a[0].x=f[n],a[0].y=g[n]-s,a[1].x=a[0].x+H[1].x,a[1].y=a[0].y+H[1].y,a[2].x=a[1].x+H[2].x,a[2].y=a[1].y+H[2].y,a[3].x=a[2].x+H[3].x,a[3].y=a[2].y+H[3].y,u(r,a);else for(n=0;n<h;n++)a[0].x=f[n],a[0].y=g[n]-s,a[1].x=a[0].x+H[1].x,a[1].y=a[0].y+H[1].y,a[2].x=a[1].x+H[2].x,a[2].y=a[1].y+H[2].y,a[3].x=a[2].x+H[3].x,a[3].y=a[2].y+H[3].y,D=r,w(D,a,void 0),D.stroke(),D.closePath();break;case e.L_PlusSymbol:for(n=0;n<h;n++)v=f[n],D=g[n],B(r,v,D+s,v,D-s),B(r,v+s,D,v-
s,D);break;case e.L_HLineSymbol:for(n=0;n<h;n++)v=f[n],D=g[n],B(r,v+s,D,v-s,D);break;case e.L_VLineSymbol:for(n=0;n<h;n++)v=f[n],D=g[n],B(r,v,D+s,v,D-s);break;case e.L_XSymbol:for(n=0;n<h;n++)v=f[n],D=g[n],B(r,v-s,D-s,v+s,D+s),B(r,v+s,D-s,v-s,D+s);break;default:if(v=l,s=d.trunc(a.text_w/2),D)for(n=0;n<h;n++)r.fillText(v.substring(0,2),f[n]-s,g[n]+s)}};e.trace=function(a,f,g,l,q,z,S,r,n,s){if(g===c||l===c)throw"mx.trace requires xpoint and ypoint";z===c&&(z=1);S===c&&(S=1);r===c&&(r=0);n===c&&(n=0);
s===c&&(s={});if(0>=q)d.log.warn("No points to draw");else if(0===S&&0===r)d.log.warn("No line or symbol to draw");else{var k;s.dashed&&(k={mode:"dashed",on:4,off:4});var v=e.origin(a.origin,4,a.stk[a.level]);if(0!==v.xscl&&0!==v.yscl){var D=v.x1,H=v.y1,P=v.xmin,Y=1/v.xscl,u=v.ymin,R=1/v.yscl;s.noclip||e.clip(a,D,H,v.x2-D+1,v.y2-H+1);var N=Math.abs(v.xmax-v.xmin),I=Math.abs(v.ymax-v.ymin),B=Math.min(v.xmin,v.xmax),v=Math.min(v.ymin,v.ymax),y=B+N,C=v+I,x=4*Math.ceil(2*g.length),F=new Int32Array(new ArrayBuffer(x)),
x=new Int32Array(new ArrayBuffer(x)),w=0;if(0===S){for(var E=z-1;E<=q;E+=z){var L=g[E],M=l[E],K=L>=B&&L<=y&&M>=v&&M<=C;K&&(F[w]=Math.round((L-P)*Y)+D,x[w]=Math.round((M-u)*R)+H,w+=1)}0!==r&&1<w&&e.draw_symbols(a,f,F.subarray(0),x.subarray(0),w,r,n)}else if(!0===s.vertsym){for(E=z-1;E<=q;E+=z)L=g[E],M=l[E],L>=B&&L<=y&&(S=Math.round((L-P)*Y)+D,e.draw_line(a,f,S,0,S,a.height),M>=v&&M<=C&&(F[w]=S,x[w]=Math.round((M-u)*R)+H,w+=1));0!==r&&1<w&&e.draw_symbols(a,f,F.subarray(0),x.subarray(0),w,r,n)}else if(!0===
s.horzsym){for(E=z-1;E<=q;E+=z)L=g[E],M=l[E],M>=v&&M<=C&&(S=Math.round((M-u)*R)+H,e.draw_line(a,f,0,S,a.width,S),L>=B&&L<=y&&(F[w]=Math.round((L-P)*Y)+D,x[w]=S,w+=1));0!==r&&1<w&&e.draw_symbols(a,f,F.subarray(0),x.subarray(0),w,r,n)}else{var J;if(s&&s.highlight){J=[];J.push({start:D,color:f});for(E=0;E<s.highlight.length;E++)s.highlight[E].xstart>=y||s.highlight[E].xend<=B||(M=Math.max(s.highlight[E].xstart,B),L=Math.min(s.highlight[E].xend,y),M<L&&(M=Math.round((M-P)*Y)+D,L=Math.round((L-P)*Y)+D,
J.push({start:M,end:L,color:s.highlight[E].color})));J.sort(function(a,c){return a.start-c.start})}else J=f;var O,T=(a.stk[a.level].xmax+a.stk[a.level].xmin)/2,U=(a.stk[a.level].ymax+a.stk[a.level].ymin)/2,L=g[0],M=l[0];O=h(0,T,U,a.stk[a.level].xmin,a.stk[a.level].ymin,L,M);(K=L>=B&&L<=y&&M>=v&&M<=C)?(F[w]=Math.round((L-P)*Y)+D,x[w]=Math.round((M-u)*R)+H,w+=1,0!==r&&e.draw_symbols(a,f,F,x,1,r,n)):w=0;for(var V=0,X=!1,E=z;E<=z*(q-1);E+=z)if(N=L,I=M,L=g[E],M=l[E],O=h(O,T,U,N,I,L,M),X=L>=B&&L<=y&&M>=
v&&M<=C,K&&X)F[w]=Math.round((L-P)*Y)+D,x[w]=Math.round((M-u)*R)+H,w+=1;else if(K=X,N-=L,I-=M,0!==N||0!==I){var Z={tL:1,tE:0};p(N,B-L,Z)&&p(-N,L-y,Z)&&p(I,v-M,Z)&&p(-I,M-C,Z)&&(1>Z.tL&&(F[w]=Math.round((L-P+Z.tL*N)*Y)+D,x[w]=Math.round((M-u+Z.tL*I)*R)+H,w+=1),0<Z.tE?(F[w]=Math.round((L-P+Z.tE*N)*Y)+D,x[w]=Math.round((M-u+Z.tE*I)*R)+H,w+=1,e.draw_lines(a,J,F.subarray(V,w),x.subarray(V,w),w-V,S,k),0!==r&&2<w-V&&e.draw_symbols(a,f,F.subarray(V+1,w),x.subarray(V+1,w),w-V-1,r,n),V=w):(F[w]=Math.round((L-
P)*Y)+D,x[w]=Math.round((M-u)*R)+H,w+=1))}O=h(O,T,U,L,M,a.stk[a.level].xmax,a.stk[a.level].ymin);O=h(O,T,U,a.stk[a.level].xmax,a.stk[a.level].ymin,a.stk[a.level].xmin,a.stk[a.level].ymin);0<w-V&&(e.draw_lines(a,J,F.subarray(V,w),x.subarray(V,w),w-V,S,k),X&&(V+=1),0!==r&&1<w-V&&e.draw_symbols(a,f,F.subarray(V,w),x.subarray(V,w),w-1,r,n));s.fillStyle&&(1<w||0!==O)&&e.fill_trace(a,s.fillStyle,F,x,w)}s.noclip||e.clip(a,0,0,0,0)}}};e.draw_mode=function(a,d,e){a.linewidth=d===c?1:d;a.style=e};e.draw_line=
function(a,e,f,g,h,l,p,r){var n=a.active_canvas.getContext("2d");p===c&&(p=a.linewidth);r===c&&(r=a.style);"number"===typeof e&&(a.pixel&&0!==a.pixel.length?(e=Math.max(0,Math.min(a.pixel.length,e)),e=y(a.pixel[e].red,a.pixel[e].green,a.pixel[e].blue)):(d.log.warn("COLORMAP not initialized, defaulting to foreground"),e=a.fg));B(n,f,g,h,l,r,e,p)};e.rubberline=function(a,c,d,e,f){a=a.active_canvas.getContext("2d");B(a,c,d,e,f,{mode:"xor"},"white",1)};e.fill_trace=function(a,c,d,f,g){var h=a.active_canvas.getContext("2d");
Array.isArray(c)?h.fillStyle=e.linear_gradient(a,0,0,0,a.b-a.t,c):h.fillStyle=c;if(1>g)h.fillRect(a.l,a.t,a.r-a.l,a.b-a.t);else if(c){c=d[0];var l=f[0];h.beginPath();l===a.t?h.lineTo(a.l,a.t):h.lineTo(a.l,a.b);h.lineTo(c,l);for(var r=1;r<g;r++)c=d[r],l=f[r],h.lineTo(c,l);l===a.t&&h.lineTo(a.r,a.t);h.lineTo(a.r,a.b);f[0]===a.t&&h.lineTo(a.l,a.b);h.closePath();h.fill()}};e.draw_lines=function(a,e,f,g,h,l,p){var r=a.active_canvas.getContext("2d");if(!(1>h)){var n=f[0],s=g[0];l===c&&(l=a.linewidth);p===
c&&(p=a.style);p&&"dashed"===p.mode&&(dashOn(r,p.on,p.off)||d.log.warn("WARNING: Dashed lines aren't supported on your browser"));r.lineWidth=l;a=0;"string"===typeof e?e=[{start:0,color:e}]:e instanceof Array||(e.start===c&&(e.start=0),e=[e]);for(l=0;l<e.length;l++)null!=e[l].end&&e[l].end<n?e.remove(l):e[l].start<n&&(a=l);r.strokeStyle=e[a].color;r.beginPath();r.moveTo(n,s);for(l=0;l<h;l++)if(n!==f[l]||s!==g[l]){n=f[l];s=g[l];p=!1;if(0<a&&null!=e[a].end&&e[a].end<n)for(p=!0;null!=e[a].end&&e[a].end<
n&&(e.remove(a),a-=1,0!==a););if(a+1<e.length&&e[a+1].start<=n)for(p=!0;a+1<e.length&&e[a+1].start<=n;)a++;r.lineTo(n,s);p&&(r.stroke(),r.strokeStyle=e[a].color,r.beginPath(),r.lineTo(n,s))}r.stroke();dashOff(r);r.beginPath()}};e.clip=function(a,c,d,e,f){a=a.active_canvas.getContext("2d");0===c&&0===d&&0===e&&0===f?a.restore():(a.save(),a.beginPath(),a.rect(c,d,e,f),a.clip())};e.clear_window=function(a){var c=a.active_canvas.getContext("2d");c.fillStyle=a.bg;c.fillRect(0,0,a.width,a.height)};e.erase_window=
function(a){a.active_canvas.getContext("2d").clearRect(0,0,a.width,a.height)};e.rubberbox=function(a,c,d,f,g){e.warpbox(a,a.xpos,a.ypos,a.xpos,a.ypos,0,a.width,0,a.width,c,d,f,g)};e.warpbox=function(a,c,d,e,f,g,h,r,n,s,k,v,D){v||(v={});a.warpbox=new x;a.warpbox.xo=c;a.warpbox.yo=d;a.warpbox.xl=e;a.warpbox.yl=f;a.warpbox.xmin=g;a.warpbox.xmax=h;a.warpbox.ymin=r;a.warpbox.ymax=n;a.warpbox.func=s;a.warpbox.mode=k;a.warpbox.style=v;a.warpbox.def_style=v;a.warpbox.alt_style=D};e.origin=function(a,c,d){a=
Math.max(1,a);c=Math.max(1,c);var f=new e.STKSTRUCT;f.xmin=d.xmin;f.xmax=d.xmax;f.ymin=d.ymin;f.ymax=d.ymax;f.xscl=d.xscl;f.yscl=d.yscl;f.x1=d.x1;f.y1=d.y1;f.x2=d.x2;f.y2=d.y2;if(a!==c){var g=Math.abs(c-a);a=c+a;if(2===g||5!==a)f.xmin=d.xmax,f.xmax=d.xmin,f.xscl=-d.xscl;if(2===g||5===a)f.ymin=d.ymax,f.ymax=d.ymin,f.yscl=-d.yscl}return f};e.mult=function(a,c){var d=Math.max(Math.abs(a),Math.abs(c));if(0===d)return 1;var e=0.1447648*Math.log(d),e=e|e;1>d&&(e-=1);return 0>e?1/Math.pow(10,-3*e):Math.pow(10,
3*e)};e.widget_callback=function(a,c){if(a.prompt&&3===c.which)a.prompt.input.onsubmit();a.widget&&a.widget.callback(c)};e.prompt=function(a,d,f,g,h,l,p,r,n){if(l!==c&&(h=f(l),!h.valid))throw"Prompt default input value not valid due to '"+h.reason+"'";e.onWidgetLayer(a,function(){var s=a.active_canvas.getContext("2d"),k=s.font.indexOf("px"),v=k+3,k=s.font.substr(0,k),s=s.font.substr(v,s.font.length).toString(),s=new CanvasInput({height:a.text_h,fontFamily:s,fontSize:new Number(k),backgroundColor:a.bg,
fontColor:a.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*a.text_w,value:l!==c?l.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),h=function(d,r){return function(){var k=this.value(),s=f(k);s.valid?(a.prompt=c,this.cleanup(),e.onWidgetLayer(a,function(){e.erase_window(a)}),g(k)):(e.message(a,"Value: '"+k+"' isn't valid due to '"+s.reason+"' - RETRY",c,d,r),setTimeout(function(){e.onWidgetLayer(a,function(){e.erase_window(a)});a.widget=null},null!=
n?n:4E3))}},v=function(a,c,d){return function(n,r){e.onWidgetLayer(a,function(){var k=(d.length+2)*a.text_w,s=k+31*a.text_w+6,f=2*a.text_h+6;n||(n=a.xpos);r||(r=a.ypos);var g=Math.max(0,Math.min(n,a.width-s)),v=Math.max(0,Math.min(r,a.height-f)),t=g+3,l=v+3,p=l+1.5*a.text_h,A=t+a.text_w;e.widgetbox(a,g,v,s,f,t,l,0,"");e.text(a,A,p,d);s=p-1.15*a.text_h;c.x(t+a.text_w+k-a.text_w);c.y(s);c.onsubmit(h(g,s-75));c.canvas()?c.render():c.canvas(a.active_canvas)})}}(a,s,d);v(p,r);s.focus();a.prompt={redraw:v,
input:s}})};e.floatValidator=function(a,d){return(d!==c&&!1!==d||""!==a)&&isNaN(parseFloat(a))||!isFinite(a)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}};e.intValidator=function(a,d){return(d===c||!1===d)&&""===a||parseFloat(a)===parseInt(a,10)&&!isNaN(a)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}};e.message=function(a,c,d,f,g){e.onWidgetLayer(a,function(){var d=c.split(/\r\n|\r|\n/g),h=0,r;if(1===
d.length){d=[];h=Math.min((a.width-6)/a.text_w-2,c.length);if(0>=h)return;for(;40<h&&2.5*a.text_h*c.length<a.height*h;)h-=5;var n=0,s=0,k=0,v=0,D=0,l=0,d=[];for(r=!0;s<c.length;){for(var D=s+h-1,l=D=Math.min(D,c.length-1),p=!1,n=s;n<=D&&!p;n++)switch(c[n]){case ",":case ";":case " ":case ":":l=n;break;case "-":case "/":l!==n-1&&(l=n);break;case "@":case "\n":case "\r":r=!1,p=!0,l=n}n===c.length&&(l=D);p?d.push(c.substring(s,l)):(n=c.substring(s,l+1).replace(/^\s+/,""),d.push(n));s=l+1;v=Math.max(v,
d[k].length)}}else for(k=0;k<d.length;k++)h=Math.min((a.width-6)/a.text_w-2,Math.max(h,d[k].length));v=d.length;6<v&&(r=!1);n=0;k=Math.max(1,a.height/a.text_h);l=Math.min(v,n+k-1);h=(h+2)*a.text_w+6;v=(l-n+1)*a.text_h+6;f||(f=a.xpos);g||(g=a.ypos);s=Math.max(0,Math.min(f,a.width-h));D=Math.max(0,Math.min(g,a.height-v));k=s+3;p=D+3;e.widgetbox(a,s,D,h,v,k,p,0,"");v=p+a.text_h/3;for(k+=a.text_w;n<l;)v+=a.text_h,r&&(k=s+h/2-d[n].length*a.text_w/2),e.text(a,k,v,d[n]),n++;a.widget={type:"ONESHOT",callback:function(c){if("mousedown"===
c.type||"keydown"===c.type)a.widget=null,e.onWidgetLayer(a,function(){e.erase_window(a)})}}})};e.draw_box=function(a,d,e,f,g,h,l,r){var n=a.active_canvas.getContext("2d");if("xor"!==d)n.lineWidth=1,n.strokeStyle=d,n.strokeRect(e,f,g,h);else if("undefined"===typeof Uint8ClampedArray)n.lineWidth=1,n.strokeStyle=a.fg,n.strokeRect(e,f,g,h);else{e=Math.floor(e);f=Math.floor(f);g=Math.floor(g);h=Math.floor(h);a=a.canvas.getContext("2d");for(var s=a.getImageData(e,f,g,1),k=s.data,v=0;v<s.data.length;v++)k[4*
v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],k[4*v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(s,e,f);s=a.getImageData(e,f+h,g,1);k=s.data;for(v=0;v<s.data.length;v++)k[4*v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],k[4*v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(s,e,f+h);s=a.getImageData(e,f,1,h);k=s.data;for(v=0;v<h;v++)k[4*v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],k[4*v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(s,e,f);s=a.getImageData(e+g,f,1,h);k=s.data;for(v=0;v<h;v++)k[4*v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],k[4*
v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(s,e+g,f)}l!==c&&0<l&&(a=n.globalAlpha,n.globalAlpha=l,n.fillStyle=r?r:d,n.fillRect(e+1,f+1,g-1,h-1),n.globalAlpha=a)};e.set_font=function(a,c){var d=a.canvas.getContext("2d"),e=a.wid_canvas.getContext("2d");if(a.font&&a.font.width===c)d.font=a.text_h+"px "+a.font.font,e.font=a.text_h+"px "+a.font.font;else{var f=1;do{f+=1;d.font=f+"px Courier New, monospace";e.font=f+"px Courier New, monospace";var g=d.measureText("M");a.text_w=g.width;a.text_h=f}while(a.text_w<
c);a.font={font:"Courier New, monospace",width:c}}};e.textline=function(a,c,d,e,f,g){var h=a.active_canvas.getContext("2d");g||(g={});g.color||(g.color=a.fg);g.width||(g.width=1);B(h,c,d,e,f,g,g.color,g.width)};e.tics=function(a,c,d){var e=1,f=a;if(c===a)return{dtic:1,dtic1:a};e=Math.abs(c-a)/d;d=Math.max(e,1E-36);d=Math.log(d)/Math.log(10);0>d?(d=Math.ceil(d),d-=1):d=Math.floor(d);e*=Math.pow(10,-d);d=Math.pow(10,d);e=1.75>e?d:2.25>e?2*d:3.5>e?2.5*d:7>e?5*d:10*d;0===e&&(e=1);c>=a?(d=Math.floor(0<=
a?a/e+0.995:a/e-0.005),f=d*e):(d=Math.floor(0<=a?a/e+0.005:a/e-0.995),f=d*e,e*=-1);f+e===f&&(e=c-a);return{dtic:e,dtic1:f}};e.drawaxis=function(a,f,g,h,l,p){var q=e.origin(a.origin,1,a.stk[a.level]),r=0,n=0,s=0,k=0,v=0,D=0;h=h===c?30:h;l=l===c?30:l;p.exactbox?(r=Math.floor(q.x1),n=Math.floor(q.y1),s=Math.floor(q.x2),k=Math.floor(q.y2),v=s-r,D=k-n):(r=Math.max(Math.floor(q.x1)-2,0),n=Math.max(Math.floor(q.y1)-2,0),s=Math.min(Math.floor(q.x2)+2,a.width),k=Math.min(Math.floor(q.y2)+2,a.height),v=s-r-
4,D=k-n-4);var H=a.active_canvas.getContext("2d");p.fillStyle?Array.isArray(p.fillStyle)?H.fillStyle=e.linear_gradient(a,0,0,0,k-n,p.fillStyle):H.fillStyle=p.fillStyle:H.fillStyle=a.bg;H.fillRect(r,n,s-r,k-n);p.noaxisbox||(e.textline(a,r,n,s,n),e.textline(a,s,n,s,k),e.textline(a,s,k,r,k),e.textline(a,r,k,r,n));var P;P=1===h?!0:!1;var u={dtic:0,dtic1:0},H={dtic:0,dtic1:0};0>f?(u.dtic1=q.xmin,u.dtic=(q.xmin-q.xmax)/f):u=e.tics(q.xmin,q.xmax,f);var B=1;P||(B=e.mult(q.xmin,q.xmax));0>g?(H.dtic1=q.ymin,
H.dtic=(q.ymin-q.ymax)/g):H=e.tics(q.ymin,q.ymax,g);f=1;f=e.mult(q.ymin,q.ymax);P=!p.noxtlab;g=!p.noytlab;var R=Math.max(0,r-4*a.text_w),N=0,N=p.ontop?Math.min(a.height,Math.floor(k+1.5*a.text_h)):Math.max(a.text_h,Math.floor(n-0.5*a.text_h)),I,w;0<N&&(p.noyplab||(w=d.label(l,f)),p.noxplab||(I=d.label(h,B)));I&&w?e.text(a,R,N,w+" vs "+I):I?e.text(a,R,N,I):w&&e.text(a,R,N,w);h=5.5*a.text_w;l=0;l=p.ontop?p.inside?n+1*a.text_h:n-0.2*a.text_h:p.inside?k-0.5*a.text_h:k+1*a.text_h+2;var v=q.xmin!==q.xmax?
v/(q.xmax-q.xmin):v/1,B=0!==B?1/B:1,y;P&&(y=1E-6<Math.abs(u.dtic)/Math.max(Math.abs(u.dtic1),Math.abs(u.dtic)));0===u.dtic&&(u.dtic=q.xmax-u.dtic1+1);w="";for(R=u.dtic1;R<=q.xmax;R+=u.dtic)I=r+Math.round(v*(R-q.xmin))+2,I<r||(p.grid&&"y"!==p.grid?(p.gridStyle||(p.gridStyle={mode:"dashed",on:1,off:3}),e.textline(a,I,k,I,n,p.gridStyle)):(e.textline(a,I,k-2,I,k+2),e.textline(a,I,n-2,I,n+2)),P&&(y?(w="",w=e.format_f(R*B,12,6),w=F(w,!0),N=Math.round(w.length/2)*a.text_w,p.inside&&(I=Math.max(r+N,I),I=
Math.min(s-N,I)),e.text(a,I-N,l,w)):R===u.dtic1&&(w=(u.dtic1*B).toString(),p.inside&&(I=Math.floor(Math.max(r+h,I))),e.text(a,I-h,l,w))));h=p.yonright?p.inside?Math.min(s-6*a.text_w,a.width-5*a.text_w):Math.min(s+a.text_w,a.width-5*a.text_w):p.inside?Math.max(0,r+a.text_w):Math.max(0,Math.floor(r-5.5*a.text_w));l=0.4*a.text_h;v=q.ymin!==q.ymax?-D/(q.ymax-q.ymin):-D/1;B=0!==f?1/f:1;D=q.ymax>=q.ymin?function(a){return a<=q.ymax}:function(a){return a>=q.ymax};for(y=H.dtic1;D(y);y+=H.dtic)I=k+Math.round(v*
(y-q.ymin))-2,I>k||(p.grid&&"x"!==p.grid?(p.gridStyle||(p.gridStyle={mode:"dashed",on:1,off:3}),e.textline(a,r,I,s,I,p.gridStyle)):(e.textline(a,r-2,I,r+2,I),e.textline(a,s-2,I,s+2,I)),!g||p.inside&&(I<n+a.text_h||I>k-2*a.text_h)||(u=e.format_f(y*B,12,6),u=F(u,p.inside),e.text(a,h,Math.min(k,I+l),u)))};e.inrect=function(a,d,c,e,f,g){return a>=c&&a<=c+f&&d>=e&&d<=e+g};var J={GBorder:3,sidelab:0,toplab:1};e.menu=function(a,d){var h=1.5*a.text_h;if(d){if(!a.widget){d.x=a.xpos;d.y=a.ypos;d.val=0;d.h=
2*J.GBorder+h*d.items.length+J.toplab*(h+J.GBorder)-1;d.y=d.y-((J.toplab+Math.max(1,d.val)-0.5)*h+(1+J.toplab)*J.GBorder)+1;for(var p=d.title.length,q=0,z=0;z<d.items.length;z++){var u=d.items[z],p=Math.max(p,u.text.length);"checkbox"===u.style&&(p+=2);"separator"===u.style&&(p+=2);u.checked&&"checkbox"!==u.style&&(q=h*z)}d.y-=q;p=(p+2)*a.text_w;d.w=2*J.GBorder+Math.abs(J.sidelab)+p-1;d.x-=d.w/2;a.menu=d;a.widget={type:"MENU",callback:function(r){var n=d;if(r===c)g(a,n);else if("mousemove"===r.type){n.drag_x!==
c&&n.drag_y!==c&&2<Math.abs(a.xpos-n.drag_x)&&2<Math.abs(a.ypos-n.drag_y)&&(n.x+=a.xpos-n.drag_x,n.y+=a.ypos-n.drag_y,n.drag_x=a.xpos,n.drag_y=a.ypos);var s=n.x+J.GBorder+Math.max(0,J.sidelab),k=n.w-2*J.GBorder-Math.abs(J.sidelab),v=1.5*a.text_h,h=n.y+J.GBorder+J.toplab*(v+J.GBorder);for(r=0;r<n.items.length;r++){var p=h+v*r,q=n.items[r];q.selected=!1;e.inrect(a.xpos,a.ypos,s,p,k,v)&&(q.selected=!0)}g(a,n)}else if("mouseup"===r.type)n.drag_x=c,n.drag_y=c;else if("mousedown"===r.type)r.preventDefault(),
1===r.which?a.xpos>n.x&&a.xpos<n.x+n.w&&a.ypos>n.y&&a.ypos<n.y+1.5*a.text_h?(n.drag_x=a.xpos,n.drag_y=a.ypos):f(a,n):l(a,n);else if("keydown"===r.type&&a.menu)if(n=a.menu,r.preventDefault(),r=getKeyCode(r),13===r)f(a,n);else if(38===r){for(r=0;r<n.items.length;r++)if(q=n.items[r],q.selected){q.selected=!1;n.items[r-1]!==c&&(n.items[r-1].selected=!0);break}else r===n.items.length-1&&(q.selected=!0);g(a,n)}else if(40===r){for(r=0;r<n.items.length;r++)if(q=n.items[r],q.selected){q.selected=!1;n.items[r+
1]!==c&&(n.items[r+1].selected=!0);break}else r===n.items.length-1&&(n.items[0].selected=!0);g(a,n)}else if(48<=r&&57>=r||65<=r&&90>=r){r=String.fromCharCode(r).toUpperCase();n.keypresses=n.keypresses===c?r:n.keypresses+r;for(r=s=0;r<n.items.length;r++)q=n.items[r],q.selected=!1,q.text&&0===q.text.toUpperCase().indexOf(n.keypresses)&&(0===s&&(q.selected=!0),s++);0===s?(n.keypresses=c,g(a,n)):1===s?f(a,n):g(a,n)}}}}g(a,d)}};e.widgetbox=function(a,d,c,f,g,h,l,r,n,s){e.shadowbox(a,d,c,f,g,1,2,"",0);
s&&(g=s.length,g=Math.min(g,f/a.text_w),g=Math.max(g,1),d+=(f-g*a.text_w)/2,c+=3,e.text(a,d,c+(l-c+0.7*a.text_h)/2,s,a.xwfg));0<r&&0<n&&(c=a.active_canvas.getContext("2d"),c.fillStyle=a.bg,c.fillRect(h,l,r,n))};e.text=function(a,d,e,f,g){var h=a.active_canvas.getContext("2d");d=Math.max(0,d);e=Math.max(0,e);if(0>d||0>e)throw"On No!";h.textBaseline="bottom";h.textAlign="left";h.fillStyle=g===c?a.fg:g;h.fillText(f,d,e)};e.getcolor=function(a,d,c){for(a=0;6>a&&0===d[a+1].pos;a++);for(;c>d[a].pos&&6>
a;)a++;if(0===a||c>=d[a].pos)return y(C(d[a].red),C(d[a].green),C(d[a].blue));c=C((c-d[a-1].pos)/(d[a].pos-d[a-1].pos)*100);var e=255-c;return y(d[a].red/100*c+d[a-1].red/100*e,d[a].green/100*c+d[a-1].green/100*e,d[a].blue/100*c+d[a-1].blue/100*e)};e.redraw_warpbox=function(a){a.warpbox&&(a._animationFrameHandle&&cancelAnimFrame(a._animationFrameHandle),a._animationFrameHandle=requestAnimFrame(function(){E(a)}))};e.format_g=function(a,d,c,f){d=Math.abs(a).toString();var g=d.indexOf(".");-1===g&&(d+=
".",g=d.length);f=0;var h=d.indexOf("e");-1!==h&&(f=parseInt(d.slice(h+1,d.length),10),d=d.slice(0,h));for(var h=Math.min(c-(d.length-g)+1,c),l=0;l<h;l++)d+="0";if(0!==a)if(1>Math.abs(a))if("0."===d.slice(0,2))for(l=2;l<d.length;l++)if("0"===d[l])f-=1;else{d="0."+d.slice(l,l+c);break}else d=d.slice(0,c+2);else g>c?(f=Math.max(0,d.length-c-2),d=d[0]+"."+d.slice(1,9)):d=d.slice(0,c+2);0===f?d+="    ":(c=e.pad(Math.abs(f).toString(),2,"0"),d=0>f?d+"E-"+c:d+"E+"+c);return 0>a?"-"+d:" "+d};e.format_f=
function(a,d,c){a=a.toFixed(c).toString();return a=e.pad(a,d+c," ")};e.pad=function(a,d,c){for(;a.length<d;)a=c+a;return a};e.shadowbox=function(a,c,f,g,h,l,p,r){for(var n=r.length,s=0,k=0,s=0,k=[],v=0;11>v;v++)k[v]={x:0,y:0};v=!(1===p||-1===p);0!==p&&0<e.GBorder&&(s=d.trunc(Math.min(g,h)/3),s=Math.max(1,Math.min(s,e.GBorder)));if(0<s){k[0].x=k[1].x=c;k[8].x=k[9].x=c+g;k[1].y=k[8].y=f;k[0].y=k[9].y=f+h;switch(l){case e.L_ArrowLeft:k[0].y=k[1].y=f+d.trunc(h/2);c+=2;--g;break;case e.L_ArrowRight:k[8].y=
k[9].y=f+d.trunc(h/2);--c;--g;break;case e.L_ArrowUp:k[1].x=k[8].x=c+d.trunc(g/2);f+=2;--h;break;case e.L_ArrowDown:k[0].x=k[9].x=c+d.trunc(g/2),--f,--h}k[2]=k[8];k[10]=k[0];c+=s;f+=s;g-=2*s;h-=2*s}k[4].x=k[5].x=c;k[3].x=k[6].x=c+g;k[3].y=k[4].y=f;k[5].y=k[6].y=f+h;switch(l){case e.L_ArrowLeft:k[4].y=k[5].y=f+d.trunc(h/2);break;case e.L_ArrowRight:k[3].y=k[6].y=f+d.trunc(h/2);break;case e.L_ArrowUp:k[3].x=k[4].x=c+d.trunc(g/2);break;case e.L_ArrowDown:k[5].x=k[6].x=c+d.trunc(g/2)}k[7]=k[3];l=a.active_canvas.getContext("2d");
0<s&&(l.fillStyle=0<p?a.xwts:a.xwbs,u(l,k.slice(0,7)),l.fillStyle=0>p?a.xwts:a.xwbs,u(l,k.slice(5,11)));v&&(l.fillStyle=a.xwbg,u(l,k.slice(3,8)));l.fillStyle=a.xwfg;l.textBaseline="alphabetic";v&&0<n&&(n=Math.min(n,d.trunc(g/a.text_w)),n=Math.max(n,1),s=c+d.trunc((g-n*a.text_w)/2),k=f+d.trunc((h+0.7*a.text_h)/2),l.fillText(r,s,k))};e.ifevent=function(a,d){a.button_press=0;a.button_release=0;a.state_mask=0;var e=d.target.getBoundingClientRect(),f=d.offsetX===c?d.pageX-e.left-window.scrollX:d.offsetX,
e=d.offsetX===c?d.pageY-e.top-window.scrollY:d.offsetY;switch(d.type){case "mousedown":a.xpos=K(f,0,a.width);a.ypos=K(e,0,a.height);switch(d.which){case 1:a.button_press=1;break;case 2:a.button_press=2;break;case 3:a.button_press=3;break;case 4:a.button_press=4;break;case 5:a.button_press=5}break;case "mouseup":switch(a.xpos=K(f,0,a.width),a.ypos=K(e,0,a.height),d.which){case 1:a.button_release=1;break;case 2:a.button_release=2;break;case 3:a.button_release=3;break;case 4:a.button_release=4;break;
case 5:a.button_release=5}}};e.scroll_real2pix=function(a){if(0===a.range)return{s1:a.a1,sw:a.a2-a.a1};var d,c;d=(a.a2-a.a1)/a.trange;c=a.a1+Math.floor(0.5+(a.smin-a.tmin)*d);d=c+Math.floor(0.5+a.srange*d);c=c>a.a2-a.swmin?a.a2-a.swmin:Math.max(c,a.a1);d=d<a.a1+a.swmin?a.a1+a.swmin:Math.min(d,a.a2);return{s1:c,sw:Math.max(d-c,a.swmin)}};e.redrawScrollbar=function(a,c,f){var g,h,l,p,r,n,s,k,v=c.active_canvas.getContext("2d");h=e.scroll_real2pix(a);s=h.s1;k=h.sw;n=s;h=a.x;l=a.y;p=a.w;r=a.h;a.origin&
1?(g=l+r/2,a.origin&2&&(n=p-n-k),f===e.XW_DRAW&&(f=a.arrow,e.shadowbox(c,h,l,f,r-1,e.L_ArrowLeft,2,"",0),e.shadowbox(c,h+p-f,l,f-1,r,e.L_ArrowRight,2,"",0)),c.legacyRender?e.draw_line(c,c.fg,h+a.a1,g,h+a.a2,g):(v=v.createLinearGradient(h+a.a1,0,h+a.a2,0),v.addColorStop(0,c.xwbs),v.addColorStop(0.5,c.xwts),v.addColorStop(1,c.xwbs),e.draw_line(c,v,h+a.a1,g,h+a.a2,g,1)),e.shadowbox(c,h+n,l,k+1,r,1,2,"",0)):(g=h+d.trunc(p/2),2>=a.origin&&(n=r-n-k),f===e.XW_DRAW&&(f=a.arrow,e.shadowbox(c,h,l,p-1,f,e.L_ArrowUp,
2,"",0),e.shadowbox(c,h,l+r-f,p-1,f,e.L_ArrowDown,2,"",0)),c.legacyRender?e.draw_line(c,c.fg,g,l+a.a1,g,l+a.a2):(v=v.createLinearGradient(0,l+a.a1,0,l+a.a2),v.addColorStop(0,c.xwbs),v.addColorStop(0.5,c.xwts),v.addColorStop(1,c.xwbs),e.draw_line(c,v,g,l+a.a1,g,l+a.a2)),e.shadowbox(c,h,l+n,p,k+1,1,2,"",0));a.s1=s;a.sw=k};e.real_to_pixel=function(a,d,c,f){a=e.origin(a.origin,4,a.stk[a.level]);if(0===a.xscl||0===a.yscl)return{x:0,y:0};var g=a.x1,h=a.y1,l=a.xmin,r=1/a.xscl,n=a.ymin,s=1/a.yscl,k=d>a.xmax||
d<a.xmin||c>a.ymin||c<a.ymax;f&&(d=Math.min(d,a.xmax),c=Math.max(d,a.xmin),c=Math.min(c,a.ymin),c=Math.max(c,a.ymax));d=Math.round((d-l)*r)+g;c=Math.round((c-n)*s)+h;return{x:d,y:c,clipped:k}};e.pixel_to_real=function(a,d,c){d=Math.min(a.r,Math.max(a.l,d));c=Math.min(a.b,Math.max(a.t,c));var e=a.level;return{x:2!==a.origin&&3!==a.origin?a.stk[e].xmin+(d-a.stk[e].x1)*a.stk[e].xscl:a.stk[e].xmin+(a.stk[e].x2-d)*a.stk[e].xscl,y:2<a.origin?a.stk[e].ymin+(c-a.stk[e].y1)*a.stk[e].yscl:a.stk[e].ymin+(a.stk[e].y2-
c)*a.stk[e].yscl}};e.colormap=function(a,d,c){a.pixel=Array(c);for(var e=Array(c),f=100/(Math.max(2,c)-1),g=0;g<c;g++)e[g]=f*g+0.5;for(f=0;6>f&&0===d[f+1].pos;f++);for(g=0;g<c;g++){a.pixel[g]=0;for(var h=e[g];6>f&&Math.floor(h)>d[f].pos;)f++;if(0===f||h>=d[f].pos)a.pixel[g]={red:C(d[f].red),green:C(d[f].green),blue:C(d[f].blue)};else{var h=C((h-d[f-1].pos)/(d[f].pos-d[f-1].pos)*100),r=255-h;a.pixel[g]={red:d[f].red/100*h+d[f-1].red/100*r,green:d[f].green/100*h+d[f-1].green/100*r,blue:d[f].blue/100*
h+d[f-1].blue/100*r}}}};e.colorbar=function(a,d,c,f,g){for(var h=1;h<g;h++)e.draw_line(a,Math.floor(a.pixel.length*(h-1)/g),d,c+g-h,d+f,c+g-h);e.draw_box(a,a.fg,d+0.5,c,f,g)};var X="undefined"===typeof Uint8ClampedArray?U:T;e.shift_image_rows=function(a,d,c){a=new Uint32Array(d);0<c?(c*=d.width,a.set(a.subarray(0,a.length-c),c)):0>c&&(c=Math.abs(c)*d.width,a.set(a.subarray(c)));return d};e.update_image_row=function(a,d,c,e,f,g){e=new Uint32Array(d,e*d.width*4,d.width);var h=1;g!==f&&(h=a.pixel.length/
Math.abs(g-f));for(g=0;g<c.length;g++){var r=Math.floor((c[g]-f)*h),r=Math.max(0,Math.min(a.pixel.length-1,r));(r=a.pixel[r])&&(e[g]=-16777216|r.blue<<16|r.green<<8|r.red)}return d};e.create_image=function(a,c,f,g,h,l){a.active_canvas.getContext("2d");a.pixel&&0!==a.pixel.length||(d.log.warn("COLORMAP not initialized, defaulting to foreground"),e.colormap(a,d.Mc.colormap[1],16));var p=1;l!==h&&(p=a.pixel.length/Math.abs(l-h));f=Math.ceil(f);g=Math.ceil(g);l=new ArrayBuffer(f*g*4);l.width=f;l.height=
g;for(var r=new Uint32Array(l),n=0;n<r.length;n++){var s=Math.floor((c[(3===a.origin||4===a.origin?Math.floor(n/f):g-Math.floor(n/f)-1)*f+(1===a.origin||4===a.origin?Math.floor(n%f):f-Math.floor(n%f)-1)]-h)*p),s=Math.max(0,Math.min(a.pixel.length-1,s));(s=a.pixel[s])&&(r[n]=-16777216|s.blue<<16|s.green<<8|s.red)}return l};e.put_image=function(a,c,f,g,h,l,p,r,n,s,k){n=a.active_canvas.getContext("2d");a.pixel&&0!==a.pixel.length||(d.log.warn("COLORMAP not initialized, defaulting to foreground"),e.colormap(a,
d.Mc.colormap[1],16));f=Math.floor(0<h?f*h:-h);g=Math.floor(g*l);l=new ArrayBuffer(f*g*4);l.width=f;l.height=g;h=new Uint32Array(l);for(var v=0;v<h.length;v++){var D=Math.max(0,c[v]),D=Math.min(a.pixel.length-1,D);(D=a.pixel[D])&&(h[v]=-16777216|D.blue<<16|D.green<<8|D.red)}X(a,n,l,s,k,p,r,f,g);return l};e.draw_image=function(a,d,c,f,g,h,l,r){var n=Math.max(c,a.stk[a.level].xmin),s=Math.min(g,a.stk[a.level].xmax),k=Math.max(f,a.stk[a.level].ymin),v=Math.min(h,a.stk[a.level].ymax);if(!(1>=d.width||
0===Math.abs(g-c)||1>=d.height||0===Math.abs(h-f))){var p=(d.width-1)/(g-c);c=Math.max(0,Math.floor((n-c)*p));g=Math.min(d.width,d.width-Math.floor((g-s)*p)-c);p=(d.height-1)/(h-f);f=Math.max(0,Math.floor((k-f)*p));h=Math.min(d.height,d.height-Math.floor((h-v)*p)-f);var q,P;1===a.origin?(q=e.real_to_pixel(a,n,v),P=e.real_to_pixel(a,s,k)):2===a.origin?(q=e.real_to_pixel(a,s,v),P=e.real_to_pixel(a,n,k)):3===a.origin?(q=e.real_to_pixel(a,s,k),P=e.real_to_pixel(a,n,v)):4===a.origin&&(q=e.real_to_pixel(a,
n,k),P=e.real_to_pixel(a,s,v));n=P.x-q.x;P=P.y-q.y;s=a.active_canvas.getContext("2d");X(a,s,d,l,r,q.x,q.y,n,P,c,f,g,h)}}})(window.mx,window.m);
(function(e,d,c,x){e.Layer1D=function(d){this.plot=d;this.ybuf=this.xbuf=x;this.xmax=this.xmin=this.imin=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=x;this.size=0;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=this.opacity=1;this.options={}};e.Layer1D.prototype={init:function(d,g){this.hcb=d;this.hcb.buf_type="D";this.ybufn=this.xbufn=this.size=this.offset=
0;this.hcb.pipe?this.size=g.framesize:2===d["class"]?(c.force1000(d),this.size=d.subsize):this.size=d.size;2>=d["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===d.format[0]);this.skip=1;this.cx&&(this.skip=2);this.xstart=d.xstart;this.xdelta=d.xdelta;var f=d.xstart+d.xdelta*(this.size-1);this.xmin=Math.min(d.xstart,f);this.xmax=Math.max(d.xstart,f);this.xlab=d.xunits;this.ylab=d.yunits;if(this.hcb.pipe){this.drawmode="scrolling";this.position=0;this.tle=g.tl;this.ybufn=this.size*Math.max(this.skip*
e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT);this.ybuf=new ArrayBuffer(this.ybufn);var l=this;c.addPipeWriteListener(this.hcb,function(){l._onpipewrite()})}},_onpipewrite:function(){var d=new e.PointArray(this.ybuf),g=this.tle;if(g===x)g=Math.floor(c.pavail(this.hcb))/this.hcb.spa;else if(c.pavail(this.hcb)<g*this.hcb.spa)return;var f=g*this.hcb.spa;if("lefttoright"===this.drawmode)this.position=0,d.set(d.subarray(0,this.size-f),f);else if("righttoleft"===this.drawmode)this.position=
this.size-g,d.set(d.subarray(f),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";g=Math.min(g,this.size-this.position);0!==c.grabx(this.hcb,d,g*this.hcb.spa,this.position*this.hcb.spa)&&(this.position=(this.position+g)%this.size,1<this.plot._Gx.autol&&this.plot.rescale())},get_data:function(d,g){var f=this.plot._Gx,l=this.hcb,p=this.skip,q;q=2===l["class"]?l.subsize:l.size;var u=0,p=0;f.index?(u=Math.floor(d),p=Math.floor(g+0.5)):0<=l.xdelta?(u=Math.floor((d-l.xstart)/l.xdelta)-1,p=
Math.floor((g-l.xstart)/l.xdelta+0.5)):(u=Math.floor((g-l.xstart)/l.xdelta)-1,p=Math.floor((d-l.xstart)/l.xdelta+0.5));u=Math.max(0,u);p=Math.min(q,p);f=Math.max(0,Math.min(p-u+1,f.bufmax));0>l.xdelta&&(u=p-f+1);if(!(u>=this.imin&&u+f<=this.imin+this.size&&this.ybuf!==x||this.modified)&&2>=l["class"]){q=this.offset+u;p=this.skip;this.ybufn=f*Math.max(p*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT);if(this.ybuf===x||this.ybuf.byteLength<this.ybufn)this.ybuf=new ArrayBuffer(this.ybufn);
p=new e.PointArray(this.ybuf);f=c.grab(l,p,q,f);this.imin=u;this.xstart=l.xstart+u*this.xdelta;this.size=f}},change_settings:function(d){if(d.index!==x)if(d.index)this.xmin=this.xdelta=this.xstart=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta;this.xdelta=this.hcb.xdelta;var c=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,c);this.xmax=Math.max(this.hcb.xstart,c)}d.drawmode!==x&&(this.drawmode=d.drawmode,this.position=0,this.ybufn=this.size*
Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn))},reload:function(d,c){var e=this.hcb.dview.length!==d.length||c;if(c)for(var l in c)this.hcb[l]=c[l];this.hcb.setData(d);this.imin=0;this.xstart=x;this.size=0;l=this.xmin;var p=this.xmax;e&&(e=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1),this.xmin=Math.min(this.hcb.xstart,e),this.xmax=Math.max(this.hcb.xstart,e),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,p=l=x);
return{xmin:l,xmax:p}},push:function(d,g,f){if(g){for(var l in g)this.hcb[l]=g[l],"type"===l&&(this.hcb["class"]=g[l]/1E3);g.subsize&&2===this.hcb["class"]&&(c.force1000(this.hcb),this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));l=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1);this.xmin=Math.min(this.hcb.xstart,l);this.xmax=Math.max(this.hcb.xstart,l);this.xdelta=
this.hcb.xdelta;this.xstart=this.hcb.xstart}c.filad(this.hcb,d,f);return g?!0:!1},prep:function(d,g){var f=this.plot._Gx,l=this.plot._Mx,p=Math.ceil(this.size),q=this.skip;if(0!==p){p*e.PointArray.BYTES_PER_ELEMENT>f.pointbufsize&&(f.pointbufsize=p*e.PointArray.BYTES_PER_ELEMENT,f.xptr=new ArrayBuffer(f.pointbufsize),f.yptr=new ArrayBuffer(f.pointbufsize));var u=new e.PointArray(this.ybuf),w=new e.PointArray(f.xptr),C=this.xmin,y=this.xmax,x,E;if(5===f.cmode||0<this.xsub)0>=p?(C=f.panxmin,y=f.panxmax):
5!==f.cmode?w=new e.PointArray(this.xbuf):this.cx?c.vmov(u,q,w,1,p):0!==this.line?(E=c.vmxmn(u,p),w[0]=E.smax,w[1]=E.smin,p=2):w=u,0<p&&(E=c.vmxmn(w,p),y=E.smax,C=E.smin);else if(0<p){E=this.xstart;var K=this.xdelta,u=p;f.index?(x=0,p-=1):0<=K?(x=Math.max(1,Math.min(u,Math.round((d-E)/K)))-1,p=Math.max(1,Math.min(u,Math.round((g-E)/K)+2))-1):(x=Math.max(1,Math.min(u,Math.round((g-E)/K)-1))-1,p=Math.max(1,Math.min(u,Math.round((d-E)/K)+2))-1);p=p-x+1;0>p&&(c.log.debug("Nothing to plot"),p=0);u=(new e.PointArray(this.ybuf)).subarray(x*
q);E+=K*x;for(x=0;x<p;x++)w[x]=f.index?this.imin+x+1:E+x*K}f.panxmin>f.panxmax?(f.panxmin=C,f.panxmax=y):(f.panxmin=Math.min(f.panxmin,C),f.panxmax=Math.max(f.panxmax,y));if(0>=p)c.log.debug("Nothing to plot");else{C=new e.PointArray(f.yptr);if(this.cx)1===f.cmode?c.cvmag(u,C,p):2===f.cmode?25===f.plab?(c.cvpha(u,C,p),c.vsmul(C,1/(2*Math.PI),C,p)):24!==f.plab?c.cvpha(u,C,p):c.cvphad(u,C,p):3===f.cmode?c.vmov(u,q,C,1,p):6<=f.cmode?c.cvmag2(u,C,p):4<=f.cmode&&c.vmov(u.subarray(1),q,C,1,p);else if(5===
f.cmode)c.vfill(C,0,p);else if(1===f.cmode||6<=f.cmode)for(x=0;x<p;x++)C[x]=Math.abs(u[x]);else for(x=0;x<p;x++)C[x]=u[x];6<=f.cmode&&(c.vlog10(C,f.dbmin,C),q=10,7===f.cmode&&(q=20),0<f.lyr.length&&f.lyr[0].cx&&(q/=2),c.vsmul(C,q,C));E=c.vmxmn(C,p);y=E.smax;C=E.smin;q=y-C;0>q&&(y=C,C=y+q,q=-q);1E-20>=q?(C-=1,y+=1):(C-=0.02*q,y+=0.02*q);0===l.level&&(f.panymin>f.panymax?(f.panymin=C,f.panymax=y):(f.panymin=Math.min(f.panymin,C),f.panymax=Math.max(f.panymax,y)),1<f.autol&&(q=1/Math.max(f.autol,1),f.panymin=
f.panymin*q+l.stk[0].ymin*(1-q),f.panymax=f.panymax*q+l.stk[0].ymax*(1-q)));return p}}},draw:function(){var c=this.plot._Mx,g=this.plot._Gx,f=this.color,l=this.symbol,p=this.radius,q=0,u={};u.fillStyle=g.fillStyle;this.options&&(u.highlight=this.options.highlight,u.noclip=this.options.noclip);0===this.line?q=0:(q=1,0<this.thick?q=this.thick:0>this.thick&&(q=Math.abs(this.thick),u.dashed=!0),1===this.line&&(u.vertsym=!0),2===this.line&&(u.horzsym=!0));var w=g.segment&&5!==g.cmode&&0<this.xsub&&!0,
x=this.xdelta,y,F;this.xdata?(y=this.xmin,F=this.xmax):(y=Math.max(this.xmin,c.stk[c.level].xmin),F=Math.min(this.xmax,c.stk[c.level].xmax),y>=F&&(g.panxmin=Math.min(g.panxmin,this.xmin),g.panxmax=Math.max(g.panxmax,this.xmax)));if(!g.all){var E=(g.bufmax-1)*x;-0<=E?F=Math.min(F,y+E):y=Math.max(y,F+E)}if(0!==q||0!==l){for(;y<F;)this.hcb.pipe||this.get_data(y,F),E=this.prep(y,F),0<E&&!w&&d.trace(c,f,new e.PointArray(g.xptr),new e.PointArray(g.yptr),E,1,q,l,p,u),g.all?0===this.size?y=F:g.index?y+=E:
0<=x?y+=this.size*x:F+=this.size*x:y=F;this.position&&"scrolling"===this.drawmode&&(g=d.real_to_pixel(c,this.position*this.xdelta,0),g.x>c.l&&g.x<c.r&&d.draw_line(c,"white",g.x,c.t,g.x,c.b))}},add_highlight:function(d){this.options.highlight||(this.options.highlight=[]);d instanceof Array?this.options.highlight.push.apply(this.options.highlight,d):this.options.highlight.push(d);this.plot.refresh()},remove_highlight:function(d){if(this.options.highlight){for(var c=this.options.highlight.length;c--;)d!==
this.options.highlight[c]&&d!==this.options.highlight[c].id||this.options.highlight.splice(c,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=x,this.plot.refresh())}};var q=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];e.Layer1D.overlay=function(h,g,f){var l=h._Gx,p=h._Mx;2===g["class"]&&c.force1000(g);g.buf_type="D";var B=1;2===g["class"]&&(B=Math.min(g.size/
g.subsize,16-l.lyr.length));for(var u=0;u<B;u++){var w=new e.Layer1D(h);w.init(g,f);w.color=d.getcolor(p,c.Mc.colormap[3],q[l.lyr.length%q.length]);2===g["class"]?(w.name=g.file_name?c.trim_name(g.file_name):"layer_"+l.lyr.length,w.name=w.name+"."+d.pad((u+1).toString(),3,"0"),w.offset=u*g.subsize):(w.name=g.file_name?c.trim_name(g.file_name):"layer_"+l.lyr.length,w.offset=0);for(var C in f)w[C]!==x&&(w[C]=f[C]);h.add_layer(w)}}})(window.sigplot=window.sigplot||{},mx,m);
(function(e,d,c,x){e.Layer2D=function(d){this.plot=d;this.xmax=this.xmin=this.imin=this.ydelta=this.ystart=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=x;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=4;this.opacity=1;this.lpb=x;this.yc=1;this.options={}};e.Layer2D.prototype={init:function(d){var h=this.plot._Gx,g=this.plot._Mx;this.hcb=d;this.hcb.buf_type=
"D";if(this.hcb.pipe){var f=this;this.frame=this.position=0;this.lps=Math.ceil(Math.max(1,g.b-g.t));c.addPipeWriteListener(this.hcb,function(){f._onpipewrite()});this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa);this.zbuf=new e.PointArray(this.lps*this.hcb.subsize)}else this.lps=Math.ceil(d.size);this.ybufn=this.xbufn=this.offset=0;this.drawmode="scrolling";2>=d["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===d.format[0]);this.skip=1;this.cx&&(this.skip=2);h.index?(this.xmin=
this.xdelta=this.xstart=1,this.xmax=d.subsize,this.ymin=this.ydelta=this.ystart=1,this.ymax=this.size):(this.xstart=d.xstart,this.xdelta=d.xdelta,h=d.xstart+d.xdelta*(d.subsize-1),this.xmin=Math.min(d.xstart,h),this.xmax=Math.max(d.xstart,h),this.ystart=d.ystart,this.ydelta=d.ydelta,h=d.ystart+d.ydelta*(this.lps-1),this.ymin=Math.min(d.ystart,h),this.ymax=Math.max(d.ystart,h));this.xframe=this.hcb.subsize;this.yframe=this.lps*this.hcb.subsize/this.xframe;0===this.lpb&&(this.lpb=this.yframe);if(!this.lpb||
0>=this.lpb)this.lpb=16;this.lpb=Math.max(1,this.lpb/this.yc)*this.yc;this.xlab=d.xunits;this.ylab=d.yunits},_onpipewrite:function(){var q=this.plot._Gx,h=this.plot._Mx;if(!(c.pavail(this.hcb)<this.hcb.subsize*this.hcb.spa)){if("falling"===this.drawmode)this.position=0,this.buf.set(this.buf.subarray(0,(this.lps-1)*this.hcb.subsize*this.hcb.spa),this.hcb.subsize*this.hcb.spa),this.img&&d.shift_image_rows(h,this.img,1);else if("rising"===this.drawmode)this.position=this.lps-1,this.buf.set(this.buf.subarray(this.hcb.subsize*
this.hcb.spa),0),this.img&&d.shift_image_rows(h,this.img,-1);else if("scrolling"===this.drawmode)this.position>=this.lps&&(this.position=0);else throw"Invalid draw mode";if(0===c.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa,this.position*this.hcb.subsize*this.hcb.spa))c.log.error("Internal error");else{var g=this.buf.subarray(this.position*this.hcb.subsize*this.hcb.spa,(this.position+1)*this.hcb.subsize*this.hcb.spa),f=new e.PointArray(this.hcb.subsize);this.cx?1===q.cmode?c.cvmag(g,f,f.length):
2===q.cmode?25===q.plab?(c.cvpha(g,f,f.length),c.vsmul(f,1/(2*Math.PI),f,f.length)):24!==q.plab?c.cvpha(g,f,f.length):c.cvphad(g,f,f.length):3===q.cmode?c.vmov(g,this.skip,f,1,f.length):4===q.cmode?c.vmov(g.subarray(1),this.skip,f,1,f.length):5===q.cmode?c.vfill(f,0,f.length):6===q.cmode?c.cvmag2logscale(g,q.dbmin,10,f):7===q.cmode&&c.cvmag2logscale(g,q.dbmin,20,f):1===q.cmode?c.vabs(g,f):2===q.cmode?c.vfill(f,0,f.length):3===q.cmode?c.vmov(g,this.skip,f,1,f.length):4===q.cmode?c.vfill(f,0,f.length):
5===q.cmode?c.vfill(f,0,f.length):6===q.cmode?c.vlogscale(g,q.dbmin,10,f):7===q.cmode&&c.vlogscale(g,q.dbmin,20,f);for(var g=f[0],l=f[0],p=0;p<f.length;p++)f[p]<g&&(g=f[p]),f[p]>l&&(l=f[p]);1===q.autol?(q.zmin=g,q.zmax=l):1<q.autol&&(p=1/Math.max(q.autol,1),q.zmin=q.zmin*p+g*(1-p),q.zmax=q.zmax*p+l*(1-p));this.img&&d.update_image_row(h,this.img,f,this.position,q.zmin,q.zmax);this.frame+=1;"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps)}}},get_data:function(){var d=this.hcb;
this.buf||(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize));this.hcb.pipe||c.grab(d,this.buf,0,d.subsize)},get_z:function(d,c){return this.zbuf[Math.floor(c/this.hcb.ydelta)*this.hcb.subsize+Math.floor(d/this.hcb.xdelta)]},change_settings:function(d){var c=this.plot._Gx;d.cmode!==x&&(this.img=x,c.zmin=x,c.zmax=x);d.cmap!==x&&(this.img=x);d.drawmode!==x&&(this.drawmode=d.drawmode,this.frame=this.position=0,this.buf=
this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize),this.img=x)},push:function(d,h,g){if(h){for(var f in h)this.hcb[f]=h[f],"type"===f&&(this.hcb["class"]=h[f]/1E3);h.subsize&&(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize));f=this.hcb.xstart+this.hcb.xdelta*(this.hcb.subsize-1);this.xmin=Math.min(this.hcb.xstart,f);this.xmax=Math.max(this.hcb.xstart,
f);this.xdelta=this.hcb.xdelta;this.xstart=this.hcb.xstart;this.ystart=this.hcb.ystart;this.ydelta=this.hcb.ydelta;f=this.hcb.ystart+this.hcb.ydelta*(this.lps-1);this.ymin=Math.min(this.hcb.ystart,f);this.ymax=Math.max(this.hcb.ystart,f)}c.filad(this.hcb,d,g);return h?!0:!1},prep:function(e,h){var g=this.plot._Gx,f=this.plot._Mx,l=this.lps,p=this.xmin,B=this.xmax,u;this.get_data(e,h);if(!(5===g.cmode||0<this.xsub)&&0<l){var w=this.xstart,C=this.xdelta,y=l;g.index?(u=0,l-=1):0<=C?(u=Math.max(1,Math.min(y,
Math.round((e-w)/C)))-1,l=Math.max(1,Math.min(y,Math.round((h-w)/C)+2))-1):(u=Math.max(1,Math.min(y,Math.round((h-w)/C)-1))-1,l=Math.max(1,Math.min(y,Math.round((e-w)/C)+2))-1);l=l-u+1;0>l&&(c.log.debug("Nothing to plot"),l=0)}g.panxmin>g.panxmax?(g.panxmin=p,g.panxmax=B):(g.panxmin=Math.min(g.panxmin,p),g.panxmax=Math.max(g.panxmax,B));if(0>=l)c.log.debug("Nothing to plot");else{!(5===g.cmode||0<this.ysub)&&0<l&&(p=this.ystart,B=this.ydelta,y=l,g.index?(u=0,l-=1):0<=B?(u=Math.max(1,Math.min(y,Math.round((e-
p)/B)))-1,l=Math.max(1,Math.min(y,Math.round((h-p)/B)+2))-1):(u=Math.max(1,Math.min(y,Math.round((h-p)/B)-1))-1,l=Math.max(1,Math.min(y,Math.round((e-p)/B)+2))-1),l=l-u+1,0>l&&(c.log.debug("Nothing to plot"),l=0));g.panymin>g.panxmax?(g.panymin=this.ymin,g.panymax=this.ymax):(g.panymin=Math.min(g.panymin,this.ymin),g.panymax=Math.max(g.panymax,this.ymax));this.cx?1===g.cmode?c.cvmag(this.buf,this.zbuf,this.zbuf.length):2===g.cmode?25===g.plab?(c.cvpha(this.buf,this.zbuf,this.zbuf.length),c.vsmul(this.zbuf,
1/(2*Math.PI),this.zbuf,this.zbuf.length)):24!==g.plab?c.cvpha(this.buf,this.zbuf,this.zbuf.length):c.cvphad(this.buf,this.zbuf,this.zbuf.length):3===g.cmode?c.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===g.cmode?c.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):5===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):6===g.cmode?c.cvmag2logscale(this.buf,g.dbmin,10,this.zbuf):7===g.cmode&&c.cvmag2logscale(this.buf,g.dbmin,20,this.zbuf):1===g.cmode?c.vabs(this.buf,this.zbuf):
2===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):3===g.cmode?c.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):5===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):6===g.cmode?c.vlogscale(this.buf,g.dbmin,10,this.zbuf):7===g.cmode&&c.vlogscale(this.buf,g.dbmin,20,this.zbuf);y=this.zbuf;this.hcb.pipe&&this.frame<this.lps&&(y="rising"===this.drawmode?this.zbuf.subarray(this.zbuf.length-this.frame*this.hcb.subsize):this.zbuf.subarray(0,this.frame*
this.hcb.subsize));B=p=0;if(0<y.length)for(p=y[0],B=y[0],u=0;u<y.length&&!(u/this.xframe>=this.lpb);u++)y[u]<p&&(p=y[u]),y[u]>B&&(B=y[u]);g.zmin=g.zmin!==x?Math.min(g.zmin,p):p;g.zmax=g.zmax!==x?Math.min(g.zmax,B):B;this.img=d.create_image(f,this.zbuf,this.hcb.subsize,this.lps,g.zmin,g.zmax);this.img.cmode=g.cmode;this.img.cmap=g.cmap;this.img.origin=f.origin;if(this.hcb.pipe&&this.frame<this.lps)if(g=new Uint32Array(this.img),"rising"===this.drawmode)for(u=0;u<g.length-this.frame*this.hcb.subsize;u++)g[u]=
0;else for(u=this.frame*this.hcb.subsize;u<g.length;u++)g[u]=0;return l}},draw:function(){var c=this.plot._Mx,h=this.plot._Gx,g=this.hcb;if(this.hcb.pipe){var f=Math.ceil(Math.max(1,c.b-c.t));if(f!==this.lps&&this.buf){var l=this.hcb.createArray(null,0,f*this.hcb.subsize*this.hcb.spa),p=new e.PointArray(f*this.hcb.subsize);l.set(this.buf.subarray(0,l.length));p.set(this.zbuf.subarray(0,p.length));this.buf=l;this.zbuf=p;this.lps=f;this.position>=this.lps&&(this.position=0);f=g.ystart+g.ydelta*(this.lps-
1);this.ymin=Math.min(g.ystart,f);this.ymax=Math.max(g.ystart,f);this.plot.rescale()}}f=Math.max(this.xmin,c.stk[c.level].xmin);l=Math.min(this.xmax,c.stk[c.level].xmax);if(f>=l)h.panxmin=Math.min(h.panxmin,this.xmin),h.panxmax=Math.max(h.panxmax,this.xmax);else{var x=Math.max(this.ymin,c.stk[c.level].ymin),u=Math.min(this.ymax,c.stk[c.level].ymax),p=Math.abs(l-f)+1,w=Math.abs(u-x)+1,p=Math.floor(p/g.xdelta),w=Math.floor(w/g.ydelta),p=Math.min(p,g.subsize),w=Math.min(w,g.size),g=d.real_to_pixel(c,
f,x),u=d.real_to_pixel(c,l,u),w=(u.y-g.y)/w;h.xe=Math.max(1,Math.round((u.x-g.x)/p));h.ye=Math.max(1,Math.round(w));this.img?h.cmode===this.img.cmode&&h.cmap===this.img.cmap&&c.origin===this.img.origin||this.prep(f,l):this.prep(f,l);this.img&&d.draw_image(c,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,h.rasterSmoothing);this.position&&(h=d.real_to_pixel(c,0,this.position*this.ydelta),h.y>c.t&&h.y<c.b&&d.draw_line(c,"white",c.l,h.y,c.r,h.y))}}};e.Layer2D.overlay=function(d,h,g){var f=
d._Gx;h.buf_type="D";var l=new e.Layer2D(d);l.init(h);l.name=h.file_name?c.trim_name(h.file_name):"layer_"+f.lyr.length;for(var p in g)l[p]!==x&&(l[p]=g[p]);d.add_layer(l)}})(window.sigplot=window.sigplot||{},mx,m);window.sigplot=window.sigplot||{};
(function(e,d,c){function x(){this.yptr=this.xptr=void 0;this.ymax=this.ymin=this.xmax=this.xmin=this.panymax=this.panymin=this.panxmax=this.panxmin=this.xdelta=this.xstart=this.arety=this.aretx=this.ymrk=this.xmrk=this.rety=this.retx=0;this.zmax=this.zmin=void 0;this.pmt=this.pyscl=this.pxscl=this.dbmin=0;this.format=this.note="";this.modsource=this.modlayer=this.pthk=this.pyl=this.py2=this.py1=this.px2=this.px1=this.pb=this.pt=this.pr=this.pl=0;this.modified=!1;this.ydiv=this.xdiv=this.modmode=
0;this.cross=this.expand=this.all=!1;this.grid=!0;this.gridBackground=void 0;this.index=!1;this.legend=this.specs=this.pan=!0;this.xdata=!1;this.show_readout=this.show_y_axis=this.show_x_axis=!0;this.autohide_panbars=this.autohide_readout=this.hide_note=!1;this.panning=void 0;this.panmode=0;this.hold=!1;this.isec=this.nsec=this.iysec=this.sections=0;this.ylab=this.xlab=void 0;this.default_rubberbox_action="zoom";this.default_rubberbox_mode="box";this.wheelscroll_mode_natural=!0;this.scroll_time_interval=
10;this.stillPanning=this.repeatPanning=void 0;this.autol=-1;this.wheelZoom=this.rasterSmoothing=this.lineSmoothing=!1;this.wheelZoomPercent=0.2;this.inContinuousZoom=!1;this.lyr=[];this.HCB=[];this.plugins=[];this.plotData=document.createElement("canvas");this.plotData.valid=!1}function q(a,c){var e=a._Mx;d.removeEventListener(e,"mousedown",a.onmousedown,!1);d.menu(e,{title:"SCROLLBAR",refresh:function(){a.refresh()},finalize:function(){d.addEventListener(e,"mousedown",a.onmousedown,!1);a.refresh()},
items:[{text:"Expand Range",handler:function(){t(a,d.SB_EXPAND,c)}},{text:"Shrink Range",handler:function(){t(a,d.SB_SHRINK,c)}},{text:"Expand Full",handler:function(){t(a,d.SB_FULL,c)}}]})}function h(a){var e=a._Gx,f=a._Mx;d.removeEventListener(f,"mousedown",a.onmousedown,!1);var k={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){a.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){a.change_settings({xcnt:-1})}},
{text:"Off",checked:0===e.cntrls,handler:function(){a.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){a.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){a.change_settings({xcnt:2})}}]}},g={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===e.cmode,handler:function(){a.change_settings({cmode:1})}},{text:"Phase",checked:2===e.cmode,handler:function(){a.change_settings({cmode:2})}},{text:"Real",
checked:3===e.cmode,handler:function(){a.change_settings({cmode:3})}},{text:"Imaginary",checked:4===e.cmode,handler:function(){a.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===e.cmode,handler:function(){a.change_settings({cmode:5})}},{text:"10*Log10",checked:6===e.cmode,handler:function(){a.change_settings({cmode:6})}},{text:"20*Log10",checked:7===e.cmode,handler:function(){a.change_settings({cmode:7})}}]}},h={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},
{text:"Parameters...",checked:0===e.autoy,handler:function(){e.autoy=0;K(a,"Y Axis Min:",d.floatValidator,function(d){parseFloat(d)!==f.stk[f.level].ymin?(""===d&&(d=0),A(a,parseFloat(d),f.stk[f.level].ymax,"Y")):a.refresh()},f.stk[f.level].ymin,void 0,void 0,function(){K(a,"Y Axis Max:",d.floatValidator,function(d){parseFloat(d)!==f.stk[f.level].ymax?(""===d&&(d=0),A(a,f.stk[f.level].ymin,parseFloat(d),"Y")):a.refresh()},f.stk[f.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===
e.autoy,handler:function(){e.autoy=1}},{text:"Max Auto",checked:2===e.autoy,handler:function(){e.autoy=2}},{text:"Full Auto",checked:3===e.autoy,handler:function(){e.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===e.autox,handler:function(){e.autox=0;K(a,"X Axis Min:",d.floatValidator,function(d){parseFloat(d)!==f.stk[f.level].xmin?(""===d&&(d=0),A(a,parseFloat(d),f.stk[f.level].xmax,"X")):a.refresh()},f.stk[f.level].xmin,void 0,void 0,function(){K(a,"X Axis Max:",d.floatValidator,
function(d){parseFloat(d)!==f.stk[f.level].xmax?(""===d&&(d=0),A(a,f.stk[f.level].xmin,parseFloat(d),"X")):a.refresh()},f.stk[f.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autox,handler:function(){e.autox=1}},{text:"Max Auto",checked:2===e.autox,handler:function(){e.autox=2}},{text:"Full Auto",checked:3===e.autox,handler:function(){e.autox=3}}]}},l={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:e.all,style:"checkbox",handler:function(){a.change_settings({all:!e.all})}},
{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){a.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){a.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){a.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){a.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){a.change_settings({xcnt:2})}}]}},
{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:void 0===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action=void 0}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===
e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!e.cross,handler:function(){e.cross=!1}},{text:"On",checked:!0===e.cross,handler:function(){e.cross=
!0}},{text:"Horizontal",checked:"horizontal"===e.cross,handler:function(){e.cross="horizontal"}},{text:"Vertical",checked:"vertical"===e.cross,handler:function(){e.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:e.wheelscroll_mode_natural,style:"checkbox",handler:function(){a.change_settings({wheelscroll_mode_natural:!e.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:e.cross,style:"checkbox",handler:function(){a.change_settings({cross:!e.cross})}},{text:"GRID",checked:e.grid,
style:"checkbox",handler:function(){a.change_settings({grid:!e.grid})}},{text:"INDEX Mode",checked:e.index,style:"checkbox",handler:function(){a.change_settings({index:!e.index})}},{text:"LEGEND",checked:e.legend,style:"checkbox",handler:function(){a.change_settings({legend:!e.legend})}},{text:"PAN Scrollbars",checked:e.pan,style:"checkbox",handler:function(){a.change_settings({pan:!e.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===e.plab,handler:function(){a.change_settings({phunits:"R"})}},
{text:"Degrees",checked:24===e.plab,handler:function(){a.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===e.plab,handler:function(){a.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:e.specs,style:"checkbox",handler:function(){a.change_settings({specs:!e.specs})}},{text:"XDIVisions...",handler:function(){K(a,"X Divisions:",function(a){var e=d.intValidator(a),n=c.trunc(f.width/2);return e.valid&&a>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:e},function(d){parseFloat(d)!==
e.xdiv&&(""===d&&(d=1),e.xdiv=parseFloat(d));a.refresh()},e.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){K(a,"X Units:",function(a){console.log("The value is "+a);return d.intValidator(a)},function(d){parseFloat(d)!==e.xlab&&(0>d&&(d=0),e.xlab=parseFloat(d));a.refresh()},e.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){K(a,"Y Divisions:",function(a){var e=d.intValidator(a),n=c.trunc(f.height/2);return e.valid&&a>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+
n+")."}:e},function(d){parseFloat(d)!==e.ydiv&&(""===d&&(d=1),e.ydiv=parseFloat(d));a.refresh()},e.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===f.origin,style:"checkbox",handler:function(){a.change_settings({yinv:4!==f.origin})}},{text:"YLABel...",handler:function(){K(a,"Y Units:",function(a){return d.intValidator(a)},function(d){parseFloat(d)!==e.ylab&&(0>d&&(d=0),e.ylab=parseFloat(d));a.refresh()},e.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:e.show_x_axis,style:"checkbox",
handler:function(){a.change_settings({show_x_axis:!e.show_x_axis})}},{text:"Y-axis",checked:e.show_y_axis,style:"checkbox",handler:function(){a.change_settings({show_y_axis:!e.show_y_axis})}},{text:"Readout",checked:e.show_readout,style:"checkbox",handler:function(){a.change_settings({show_readout:!e.show_readout})}},{text:"Invert Colors",checked:f.xi,style:"checkbox",handler:function(){d.invertbgfg(f)}}]}},p={text:"Colormap...",menu:{title:"COLORMAP",items:[{text:"Greyscale",checked:0===e.cmap,handler:function(){a.change_settings({cmap:0})}},
{text:"Ramp Colormap",checked:1===e.cmap,handler:function(){a.change_settings({cmap:1})}},{text:"Color Wheel",checked:2===e.cmap,handler:function(){a.change_settings({cmap:2})}},{text:"Spectrum",checked:3===e.cmap,handler:function(){a.change_settings({cmap:3})}},{text:"Sunset",checked:4===e.cmap,handler:function(){a.change_settings({cmap:4})}}]}},q=function(c){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var k=1;if(void 0!==c)k=Math.abs(a._Gx.lyr[c].thick);else{if(0===
e.lyr.length)return;for(var k=Math.abs(a._Gx.lyr[0].thick),f=0;f<e.lyr.length;f++)if(k!==Math.abs(a._Gx.lyr[f].thick)){k=1;break}}K(a,"Line thickness:",d.intValidator,function(d){if(void 0!==c)a._Gx.lyr[c].line=3,a._Gx.lyr[c].thick=-1*d,a._Gx.lyr[c].symbol=0;else for(var c=0;c<e.lyr.length;c++)a._Gx.lyr[c].line=3,a._Gx.lyr[c].thick=-1*d,a._Gx.lyr[c].symbol=0},k)}},{text:"Dots...",handler:function(){var k=3;if(void 0!==c)k=Math.abs(a._Gx.lyr[c].radius);else{if(0===e.lyr.length)return;for(var f=0;f<
e.lyr.length;f++)if(k!==Math.abs(a._Gx.lyr[f].radius)){k=3;break}}K(a,"Radius/Shape:",d.intValidator,function(d){var k;0>d?(k=3,d=Math.abs(d)):0<d?k=2:(k=1,d=0);if(void 0!==c)a._Gx.lyr[c].line=0,a._Gx.lyr[c].radius=d,a._Gx.lyr[c].symbol=k;else for(var f=0;f<e.lyr.length;f++)a._Gx.lyr[f].line=0,a._Gx.lyr[f].radius=d,a._Gx.lyr[f].symbol=k},k)}},{text:"Solid...",handler:function(){var k=1;if(void 0!==c)k=Math.abs(a._Gx.lyr[c].thick);else{if(0===e.lyr.length)return;for(var k=Math.abs(a._Gx.lyr[0].thick),
f=0;f<e.lyr.length;f++)if(k!==Math.abs(a._Gx.lyr[f].thick)){k=1;break}}K(a,"Line thickness:",d.intValidator,function(d){if(void 0!==c)a._Gx.lyr[c].line=3,a._Gx.lyr[c].thick=d,a._Gx.lyr[c].symbol=0;else for(var k=0;k<e.lyr.length;k++)a._Gx.lyr[k].line=3,a._Gx.lyr[k].thick=d,a._Gx.lyr[k].symbol=0},k)}},{text:"Toggle",style:void 0!==c?"checkbox":void 0,checked:void 0!==c?a._Gx.lyr[c].display:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].display=!a._Gx.lyr[c].display;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].display=
!a._Gx.lyr[d].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=0,a._Gx.lyr[c].symbol=0;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=0,a._Gx.lyr[d].symbol=0}},{text:"Pixels",checked:void 0!==c?1===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=1,a._Gx.lyr[c].symbol=1;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=
1,a._Gx.lyr[d].symbol=1}},{text:"Circles",checked:void 0!==c?2===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=2;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=2}},{text:"Squares",checked:void 0!==c?3===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=3;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=3}},{text:"Plusses",checked:void 0!==
c?4===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=4;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=4}},{text:"X's",checked:void 0!==c?5===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=5;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=5}},{text:"Triangles",checked:void 0!==c?6===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==
c)a._Gx.lyr[c].radius=6,a._Gx.lyr[c].symbol=6;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=6,a._Gx.lyr[d].symbol=6}},{text:"Downward Triangles",checked:void 0!==c?7===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=6,a._Gx.lyr[c].symbol=7;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].radius=6,a._Gx.lyr[d].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===a._Gx.lyr[c].line:void 0,
handler:function(){if(void 0!==c)a._Gx.lyr[c].line=0;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].line=0}},{text:"Verticals",checked:void 0!==c?1===a._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].line=1;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].line=1}},{text:"Horizontals",checked:void 0!==c?2===a._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].line=2;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].line=2}},{text:"Connecting",checked:void 0!==
c?3===a._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].line=3;else for(var d=0;d<e.lyr.length;d++)a._Gx.lyr[d].line=3}}]}},{text:"Thickness...",handler:function(){var k=1;void 0!==c&&(k=a._Gx.lyr[c].thick);K(a,"Thickness",d.intValidator,function(d){""===d&&(d=1);d=Math.max(0,d);if(void 0!==c)a._Gx.lyr[c].thick=d;else for(var k=0;k<e.lyr.length;k++)a._Gx.lyr[k].thick=d},k,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var k=1;void 0!==c&&(k=a._Gx.lyr[c].opacity);
K(a,"Opacity:",d.floatValidator,function(d){""===d&&(d=1);d=Math.max(0,d);d=Math.min(1,d);if(void 0!==c)a._Gx.lyr[c].opacity=d;else for(var k=0;k<e.lyr.length;k++)a._Gx.lyr[k].opacity=d},k,void 0,void 0,void 0)}}]}},u={text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var d=[],a=0;a<e.plugins.length;a++){var c=e.plugins[a];c.impl.menu&&("function"===typeof c.impl.menu?d.push(c.impl.menu()):d.push(c.impl.menu))}return d}()}};d.menu(f,{title:"SIG-PLOT",finalize:function(){f.prompt||d.addEventListener(f,
"mousedown",a.onmousedown,!1);a.refresh()},items:[{text:"Refresh"},k,g,h,{text:"Grid",handler:function(){a.change_settings({grid:!e.grid})}},l,p,{text:"Traces...",menu:function(){var d=a._Gx,c={title:"TRACE",items:[]};c.items.push({text:"All",menu:q()});for(var e=0;e<d.lyr.length;e++)c.items.push({text:d.lyr[e].name,menu:q(e)});return c}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var d=a._Gx,c={title:"DEOVERLAY",items:[]};c.items.push({text:"Deoverlay All",
handler:function(){a.deoverlay()}});for(var e=0;e<d.lyr.length;e++){var n=function(d){return function(){a.deoverlay(d)}}(e);c.items.push({text:d.lyr[e].name,handler:n})}return c}}]}},u,{text:"Keypress Info",handler:function(){d.message(f,G)}},{text:"Exit",handler:function(){var a=document.createEvent("Event");a.initEvent("sigplotexit",!0,!0);d.dispatchEvent(f,a)}}]})}function g(a){return function(e,f,k,g,h,l){var p,q=a._Gx,u=a._Mx,t=Math.min(f,g);p=Math.min(k,h);var w=Math.abs(g-f),x=Math.abs(h-k);
void 0===l||"zoom"===l?1===e.which&&(2>w&&2>x?(t=!1,p=a._Mx,w=p.xpos,x=p.ypos,f=p.text_h,k=p.text_w,g=" ",w<p.l-k&&x<=p.b&&x>=p.t?(g="YCENTER",t=!0):x>p.b+c.trunc(0.5*k)&&x<=p.b+c.trunc(c.trunc(3*f)/2)&&w>=p.l&&w<=p.r&&(g="XCENTER",t=!0),p=g,t?" "!==p&&E(a,p,0,e):1===q.cntrls&&(f=document.createEvent("Event"),f.initEvent("mtag",!0,!0),f.x=q.xmrk,f.y=q.ymrk,f.w=void 0,f.h=void 0,f.shift=e.shiftKey,d.dispatchEvent(u,f))):(a.pixel_zoom(f,k,g,h),a.refresh())):"select"===l&&(f=document.createEvent("Event"),
f.initEvent("mtag",!0,!0),q=O(a,t,p),t=O(a,t+w,p+x),f.x=q.x,f.y=q.y,f.w=Math.abs(t.x-q.x),f.h=Math.abs(t.y-q.y),f.shift=e.shiftKey,d.dispatchEvent(u,f))}}function f(a,e){var f=a._Mx,k=a._Gx;k.xmin=void 0===e.xmin?0:e.xmin;k.xmax=void 0===e.xmax?0:e.xmax;var g=void 0!==e.xmin,h=void 0!==e.xmax,p=void 0===e.cmode?"":e.cmode.toUpperCase();k.ylab=e.ylab;k.ymin=void 0===e.ymin?0:e.ymin;k.ymax=void 0===e.ymax?0:e.ymax;var q=void 0!==e.ymin,t=void 0!==e.ymax;void 0!==e.colors&&d.setbgfg(f,e.colors.bg,e.colors.fg,
f.xi);void 0!==e.xi&&d.invertbgfg(f);k.forcelab=void 0===e.forcelab?!0:e.forcelab;k.all=void 0===e.all?!1:e.all;k.expand=void 0===e.expand?!1:e.expand;k.xlab=e.xlab;k.segment=void 0===e.segment?!1:e.segment;k.plab=24;var u=void 0===e.phunits?"D":e.phunits;"R"===u[0]?k.plab=23:"C"===u[0]&&(k.plab=25);k.xdiv=void 0===e.xdiv?5:e.xdiv;k.ydiv=void 0===e.ydiv?5:e.ydiv;f.origin=1;e.yinv&&(f.origin=4);k.pmt=void 0===e.pmt?1:e.pmt;k.bufmax=void 0===e.bufmax?32768:e.bufmax;k.sections=void 0===e.nsec?0:e.nsec;
k.anno_type=void 0===e.anno_type?0:e.anno_type;k.xfmt=void 0===e.xfmt?"":e.xfmt;k.yfmt=void 0===e.yfmt?"":e.yfmt;k.index=void 0===e.index?!1:e.index;if(u=k.index||"IN"===p.slice(0,2))g&&1===k.xmin&&(g=!1),h&&1===k.xmin&&(h=!1);k.yptr=void 0;k.xptr=void 0;k.pointbufsize=0;k.xdata=!1;k.note="";k.hold=0;c.vstype("D");e.inputs||l(a,!1);var w=p.slice(0,2);if("IN"===w||"AB"===w||"__"===w)w=p.slice(2,4);k.cmode=0<k.lyr.length&&k.lyr[0].cx?1:3;"MA"===w&&(k.cmode=1);"PH"===w&&(k.cmode=2);"RE"===w&&(k.cmode=
3);"IM"===w&&(k.cmode=4);if("LO"===w||"D1"===w)k.cmode=6;if("L2"===w||"D2"===w)k.cmode=7;if("RI"===w||"IR"===w)k.index?alert("Imag/Real mode not permitted in INDEX mode"):k.cmode=5;k.basemode=k.cmode;a.change_settings({cmode:k.cmode});k.dbmin=1E-20;6<=k.cmode&&(p=10,7===k.cmode&&(p=20),"L"===w[0]?0<k.lyr.length&&k.lyr[0].cx?(k.ymin=Math.max(k.ymin,1E-10),k.ymax=Math.max(k.ymax,1E-10)):(k.ymin=Math.max(k.ymin,1E-20),k.ymax=Math.max(k.ymax,1E-20)):0<k.lyr.length&&k.lyr[0].cx?(k.ymin=Math.max(-18*p,
k.ymin),k.ymax=Math.max(-18*p,k.ymax),k.dbmin=1E-37):Math.min(k.ymin,k.ymax)<-20*p&&(k.ymin=Math.max(-37*p,k.ymin),k.ymax=Math.max(-37*p,k.ymax),k.dbmin=Math.pow(10,Math.min(k.ymin,k.ymax)/p)));f.level=0;u&&!k.index&&(g&&(k.xmin=k.xstart+k.xdelta*(k.xmin-1)),g&&(k.xmax=k.xstart+k.xdelta*(k.xmax-1)));k.autox=void 0===e.autox?-1:e.autox;0>k.autox&&(k.autox=0,g||(k.autox+=1),h||(k.autox+=2));k.autoy=void 0===e.autoy?-1:e.autoy;0>k.autoy&&(k.autoy=0,q||(k.autoy+=1),t||(k.autoy+=2));k.autol=void 0===e.autol?
-1:e.autol;g||(k.xmin=void 0);h||(k.xmax=void 0);T(a,{get_data:!0},k.xmin,k.xmax,k.xlab,k.ylab);g||(k.xmin=f.stk[0].xmin);h||(k.xmax=f.stk[0].xmax);q||(k.ymin=f.stk[0].ymin);t||(k.ymax=f.stk[0].ymax);k.xmin>k.xmax&&(f.stk[0].xmin=k.xmax,k.xmax=k.xmin,k.xmin=f.stk[0].xmin);k.ymin>k.ymax&&(f.stk[0].ymin=k.ymax,k.ymax=k.ymin,k.ymin=f.stk[0].ymin);f.stk[0].xmin=k.xmin;f.stk[0].xmax=k.xmax;f.stk[0].ymin=k.ymin;f.stk[0].ymax=k.ymax;k.panxmin=Math.min(k.panxmin,k.xmin);k.panxmax=Math.max(k.panxmax,k.xmax);
k.panymin=Math.min(k.panymin,k.ymin);k.panymax=Math.max(k.panymax,k.ymax);k.xmin=f.stk[0].xmin;k.ymin=f.stk[0].ymin;d.set_font(f,Math.min(7,f.width/64));k.ncolors=void 0===e.ncolors?16:e.ncolors;k.cmap=void 0===e.xc?-1:e.xc;0>k.ncolors&&(k.ncolors*=-1,k.cmap=Math.max(1,k.cmap));if(1>k.cmap||5<k.cmap)k.cmap=2===k.cmode?2:1;d.colormap(f,c.Mc.colormap[k.cmap],k.ncolors);k.cntrls="leftmouse"===e.xcnt?1:"continuous"===e.xcnt?2:void 0===e.xcnt?1:e.xcnt;k.default_rubberbox_mode=void 0===e.rubberbox_mode?
"box":e.rubberbox_mode;k.default_rubberbox_action=void 0===e.rubberbox_action?"zoom":e.rubberbox_action;k.cross=void 0===e.cross?!1:e.cross;k.grid=void 0===e.nogrid?!0:!e.nogrid;k.gridBackground=e.gridBackground;k.gridStyle=e.gridStyle;k.wheelZoom=e.wheelZoom;k.wheelZoomPercent=e.wheelZoomPercent;k.legend=void 0===e.legend?!1:e.legend;k.legendBtnLocation={x:0,y:0,width:0,height:0};k.pan=void 0===e.nopan?!0:!e.nopan;k.nomenu=void 0===e.nomenu?!1:e.nomenu;k.modmode=0;k.modlayer=-1;k.modsource=0;k.modified=
e.mod&&0<k.lyr.length;k.nmark=0;k.iabsc=0;k.index&&(k.iabsc=1);k.specs=!e.nospecs;k.scroll_time_interval=void 0===e.scroll_time_interval?k.scroll_time_interval:e.scroll_time_interval;k.autohide_readout=e.autohide_readout;k.autohide_panbars=e.autohide_panbars;k.specs?(k.show_x_axis=!e.noxaxis,k.show_y_axis=!e.noyaxis,k.show_readout=!e.noreadout,k.specs=k.show_x_axis||k.show_y_axis||k.show_readout?!0:!1):(k.show_x_axis=!1,k.show_y_axis=!1,k.show_readout=!1);k.hide_note=e.hide_note||!1;k.xmrk=0;k.ymrk=
0;e.nodragdrop||(d.addEventListener(f,"dragover",function(a){a.preventDefault()},!1),d.addEventListener(f,"drop",function(a){return function(d){var c=d.dataTransfer.files;0<c.length&&(d.preventDefault(),a.load_files(c))}}(a),!1))}function l(a,d){var c=a._Gx,e=a._Mx;if(d){var f=c.HCB[0];c.xstart=f.xstart;c.xdelta=f.xdelta}else c.xstart=0,c.xdelta=1,c.autol=-1,c.zmin=void 0,c.zmax=void 0;e.origin=1}function p(a,e){var f=a._Mx,k=a._Gx;if(0<e&&(4<=e&&k.show_readout&&!k.hide_note&&d.text(f,f.width-k.lbtn-
(k.note.length+1)*f.text_w,f.text_h,k.note),4<=e&&F(a),1<=e&&k.legend)){for(var f=a._Mx,k=a._Gx,g=f.canvas.getContext("2d"),h=0,l=0,p=0,q=0,t=0,u=0,w=0,x=h=0,y=0,q=f.text_w,w=23*q,h=(k.lyr.length+1)*f.text_h,t=f.r-w,u=f.t,l=t+2,p=u+2,x=w-5,y=h-5,z=0,h=w=0;h<k.lyr.length;h++){var A=g.measureText(k.lyr[h].name).width;A>z&&(z=A)}98<z&&(w=z-98,x+=w,l-=w);g.strokeStyle=f.fg;g.fillStyle=f.bg;g.fillRect(l,p,x,y);g.strokeRect(l,p,x,y);for(h=0;h<k.lyr.length;h++)l=t+4*q,p=u+h*f.text_h+f.text_h,h===k.modlayer&&
d.text(f,t+q-w,p+Math.floor(f.text_w/2),"**"),k.lyr[h].display&&(y=k.lyr[h].color,0<k.lyr[h].line&&(x=c.sign(Math.min(q,Math.abs(k.lyr[h].thick)),k.lyr[h].thick),0>x||x===d.L_dashed?d.draw_line(f,y,l-w,p-3,l+2*q-w,p-3,Math.abs(x),{mode:"dashed",on:4,off:4}):d.draw_line(f,y,l-w,p-3,l+2*q-w,p-3,Math.abs(x))),0<k.lyr[h].symbol&&(x=0>k.lyr[h].radius?-c.trunc(0.6*q):Math.min(k.lyr[h].radius,c.trunc(0.6*q)),d.draw_symbol(f,y,l+q-w,p-3,k.lyr[h].symbol,x))),l+=3*q,p+=0.3*f.text_h,d.text(f,l-w,p,k.lyr[h].name)}}
function B(a){for(var d=a._Gx,c=a._Mx.canvas.getContext("2d"),e,f=0;f<d.plugins.length;)d.plugins[f].impl.refresh&&(e=d.plugins[f].canvas,e.width!==a._Mx.canvas.width&&(e.width=a._Mx.canvas.width),e.height!==a._Mx.canvas.height&&(e.height=a._Mx.canvas.height),e.getContext("2d").clearRect(0,0,e.width,e.height),d.plugins[f].impl.refresh(e),c.drawImage(e,0,0)),f+=1}function u(a){a=a._Gx;if(0===a.HCB.length)a.note="";else if(void 0===a.HCB[0].plotnote){for(var d=[],c=0;c<a.HCB.length;c++)a.HCB[c].file_name&&
d.push(a.HCB[c].file_name);a.note=d.join("|").toUpperCase()}}function w(a,d){var c=a._Gx;d>=c.lyr.length||!c.lyr[d].display||0!==c.hold||c.lyr[d].draw()}function C(a){var c=a._Gx;a=a._Mx;c.cross&&(("vertical"===c.cross||!0===c.cross)&&a.xpos>=a.l&&a.xpos<=a.r&&c.cross_xpos!==a.xpos&&(void 0!==c.cross_xpos&&d.rubberline(a,c.cross_xpos,a.t,c.cross_xpos,a.b),d.rubberline(a,a.xpos,a.t,a.xpos,a.b),c.cross_xpos=a.xpos),("horizontal"===c.cross||!0===c.cross)&&a.ypos>=a.t&&a.ypos<=a.b&&c.cross_ypos!==a.ypos&&
(void 0!==c.cross_ypos&&d.rubberline(a,a.l,c.cross_ypos,a.r,c.cross_ypos),d.rubberline(a,a.l,a.ypos,a.r,a.ypos),c.cross_ypos=a.ypos))}function y(a,d){var c=a._Mx,e=a._Gx;e.xdata=!1;for(var f=0;f<e.lyr.length;f++)e.lyr[f].xdata=5===d?!0:!1,e.lyr[f].xdata&&(e.xdata=!0);if(d!==e.cmode)if(5===d&&e.index)alert("Imag/Real mode not permitted in INDEX mode");else if(0>=e.lyr.length)e.cmode=d,U(a);else if(0<d){f=e.cmode;e.cmode=d;var g=e.autox,h=e.autoy;e.autox=3;e.autoy=3;if(5===d||5===f)e.panxmin=1,e.panxmax=
-1,e.panymin=1,e.panymax=-1,c.level=0,d===e.basemode?(c.stk[0].xmin=e.xmin,c.stk[0].xmax=e.xmax,c.stk[0].ymin=e.ymin,c.stk[0].ymax=e.ymax):5===d||5===e.basemode?T(a,{get_data:!0}):(c.stk[0].xmin=e.xmin,c.stk[0].xmax=e.xmax,T(a,{get_data:!0},e.xmin,e.xmax));else for(d===e.basemode?(e.panymin=1,e.panymax=-1,c.stk[0].ymin=e.ymin,c.stk[0].ymax=e.ymax):T(a,{},c.stk[c.level].xmin,c.stk[c.level].xmax),f=1;f<=c.level;f++)c.stk[f].ymin=c.stk[0].ymin,c.stk[f].ymax=c.stk[0].ymax;e.autox=g;e.autoy=h;a.refresh()}}
function F(a){var c,e=a._Mx,k=a._Gx;if(k.pan&&!e.widget){c=e.level;var f={ps:e.stk[c].ymin,pe:e.stk[c].ymax},g=f.ps!==k.panymin||f.pe!==k.panymax,g=g&&0<e.level;!k.autohide_panbars||g&&a.mouseOnCanvas||k.panning?(d.scrollbar(e,0,k.pyl,k.pyl+k.pthk,e.t,e.b,f,k.panymin,k.panymax,void 0,e.scrollbar_y),e.stk[c].ymin=f.ps,e.stk[c].ymax=f.pe):(f=e.canvas.getContext("2d"),f.fillStyle=e.bg,f.fillRect(k.pyl,e.t,k.pyl+k.pthk,e.b-e.t));k.pl<e.width&&(f={ps:e.stk[c].xmin,pe:e.stk[c].xmax},g=(g=f.ps!==k.panxmin||
f.pe!==k.panxmax)&&(!k.all||0<e.level),!k.autohide_panbars||g&&a.mouseOnCanvas||k.panning?(d.scrollbar(e,0,k.pl,k.pr,k.pt,k.pt+k.pthk,f,k.panxmin,k.panxmax,void 0,e.scrollbar_x),e.stk[c].xmin=f.ps,e.stk[c].xmax=f.pe):(f=e.canvas.getContext("2d"),f.fillStyle=e.bg,f.fillRect(k.pl,k.pt-1,k.pr-k.pl,k.pthk+4)))}}function E(a,c,e,f){var g=a._Mx,h=a._Gx,l,p,q,t;t=new d.SCROLLBAR;p=new d.SCROLLBAR;var u=!1;l=g.level;0<h.panmode?(t.flag=11,p.flag=11):(t.flag=-12,p.flag=-12);0===e&&(t.action=0,p.action=0);
if("Y"===c.substring(0,1)){if(t=g.stk[l].ymin,e=g.stk[l].ymax,q=e-t,"YPAN"===c?(c=g.scrollbar_y,e={ps:t,pe:e},d.scrollbar(g,p,h.pyl,h.pyl+h.pthk,g.t,g.b,e,h.panymin,h.panymax,f,c),t=e.ps,e=e.pe,0!==p.action&&d.scroll(g,p,d.XW_UPDATE,void 0,c)):"YCENTER"===c&&(t-=q*(g.ypos-(g.t+g.b)/2)/(g.b-g.t),e=t+q),t!==g.stk[l].ymin||e!==g.stk[l].ymax)g.stk[l].ymin=t,g.stk[l].ymax=e,h.cmode===h.basemode&&1===g.level&&(h.ymin=Math.min(h.ymin,t),h.ymax=Math.max(h.ymax,e)),a.refresh(),u=!0}else if(p=g.stk[l].xmin,
e=g.stk[l].xmax,q=e-p,"XPAN"===c?(c=g.scrollbar_x,e={ps:p,pe:e},d.scrollbar(g,t,h.pl,h.pr,h.pt,h.pt+h.pthk,e,h.panxmin,h.panxmax,f,c),p=e.ps,e=e.pe,0!==t.action&&d.scroll(g,t,d.XW_UPDATE,void 0,c)):"XCENTER"===c&&(p+=q*(g.xpos-(g.l+g.r)/2)/(g.r-g.l),p!==g.stk[l].xmin&&(e=p+q)),g.stk[l].xmin!==p||g.stk[l].xmax!==e)g.stk[l].xmin=p,g.stk[l].xmax=e,h.xdata||1!==g.level||(h.xmin=g.stk[1].xmin,h.xmax=g.stk[1].xmax),a.refresh(),u=!0;return u}function K(a,c,e,f,g,h,l,p){var q=a._Mx;if(q.prompt)throw"Prompt already exists! Can only have one prompt at a time!";
d.disableListeners(q);a.disable_listeners();var t=function(a,c){return function(e){c(e);d.enableListeners(q);a.enable_listeners();a.refresh();void 0!==p&&p()}},u=function(){a.refresh()};try{d.prompt(q,c,e,t(a,f),u,g,h,l,5E3)}catch(w){console.log("ERROR: Failed to set up prompt due to: "+w)}}function U(a){var c=a._Mx,e=a._Gx,f=c.canvas.getContext("2d");0===e.sections&&(e.isec=0);e.aretx=e.retx;e.arety=e.rety;e.dretx=e.retx-e.xmrk;e.drety=e.rety-e.ymrk;5===e.cmode&&1===e.iabsc&&(e.iabsc=2);1===e.iabsc?
(e.aretx=Math.round((e.aretx-e.xstart)/e.xdelta),e.index||(e.aretx+=1),e.dretx=Math.round(e.dretx/e.xdelta)):2===e.iabsc&&(0!==e.aretx&&(e.aretx=1/e.aretx),0!==e.arety&&(e.arety=1/e.arety),0!==e.dretx&&(e.dretx=1/e.dretx),0!==e.drety&&(e.drety=1/e.drety));if(e.show_readout&&!c.widget){f.fillStyle=c.bg;var g=Math.floor(c.height-2.5*c.text_h);f.fillRect(c.text_w,g,49*c.text_w,g+1.5*c.text_h);var g=Math.floor(c.height-0.5*c.text_h),h=Math.max(e.pr+c.text_w,c.width-2*c.text_w);f.fillStyle=c.bg;f.fillRect(h,
g-c.text_h,c.text_w,c.text_h);if(!e.autohide_readout||a.mouseOnCanvas||e.panning)a="y: "+d.format_g(e.arety,16,9,!0)+" dy: "+d.format_g(e.drety,16,9)+" L="+c.level+" "+z[e.cmode-1],f="x: "+d.format_g(e.aretx,16,9,!0)+" dx: "+d.format_g(e.dretx,16,9)+" "+S[e.iabsc],3===e.iabsc&&(a=0===e.dretx?a.substr(0,20)+"sl: Inf             "+a.substr(40,a.length):a.substr(0,20)+"sl: "+d.format_g(e.drety/e.dretx,16,9)+a.substr(40,a.length)),g=Math.floor(c.height-1.5*c.text_h),d.text(c,c.text_w,g,a),g=Math.floor(c.height-
0.5*c.text_h),d.text(c,c.text_w,g,f),h<c.width&&(0<e.cntrls?d.text(c,h,g,"C"):d.text(c,h,g," ")),d.colorbar(c,49*c.text_w-1,c.height-2.5*c.text_h,c.text_w,2*c.text_h)}}function T(a,d,c,e,f,g){var h=a._Mx;a=a._Gx;d=!0===d.get_data;a.panxmin=1;a.panxmax=-1;a.panymin=1;a.panymax=-1;var l=void 0===c,p=void 0===e;if(0===a.lyr.length)a.panxmin=-1,a.panxmax=1,a.panymin=-1,a.panymax=1;else for(void 0===f&&(a.xlab=a.lyr[0].xlab),void 0===g&&(a.ylab=a.lyr[0].ylab),f=0;f<a.lyr.length;f++)if(l&&(c=a.lyr[f].xmin),
p&&(e=a.lyr[f].xmax),a.xlab!==a.lyr[f].xlab&&(a.xlab=0),a.ylab!==a.lyr[f].ylab&&(a.ylab=0),d&&a.lyr[f].get_data(c,e),0<a.autox||0<a.autoy)for(;c<e;)a.lyr[f].get_data(c,e),g=a.lyr[f].prep(c,e),a.all&&a.expand?0===a.lyr[f].size?c=e:a.index?c+=g:0<=a.lyr[f].xdelta?c+=a.lyr[f].size*a.lyr[f].xdelta:e+=a.lyr[f].size*a.lyr[f].xdelta:c=e;else a.lyr[f].prep(1,-1);f=a.panxmax-a.panxmin;0>f&&(a.panxmax=a.panxmin,a.panxmin=a.panxmax+f,f=-f);1E-20>=f&&(a.panxmin-=1,a.panxmax+=1);0!==(a.autox&1)&&l&&(h.stk[0].xmin=
a.panxmin);if(0!==(a.autox&2)&&p&&(h.stk[0].xmax=a.panxmax,!a.all&&!a.xdata))for(f=0;f<a.lyr.length;f++)e=Math.min(a.lyr[f].xmax,h.stk[0].xmax),g=Math.abs((e-a.lyr[f].xmin)/a.lyr[f].xdelta)-a.bufmax+1,0<g&&(h.stk[0].xmax=e-g*Math.abs(a.lyr[f].xdelta));0!==(a.autoy&1)&&(h.stk[0].ymin=a.panymin);0!==(a.autoy&2)&&(h.stk[0].ymax=a.panymax)}function O(a,c,e){var f=a._Gx;a=d.pixel_to_real(a._Mx,c,e);f.index&&(a.x*=f.xdelta);return a}function J(a,c,d,e,f,g){return a>=d&&a<=d+f&&c>=e&&c<=e+g}function X(a){var d=
!1,e=a._Gx,f=a._Mx,g=f.xpos,h=f.ypos,l=" ";if(!a.mouseOnCanvas)return!1;e.pan&&g>f.r&&h>=f.t&&h<=f.b?(l="YPAN",f.xpos=e.pyl+c.trunc(e.pthk/2),d=!0):e.pan&&g>=e.pl&&g<=e.pr&&(e.show_readout&&h>e.pt-2||!e.show_readout&&h<=e.pt+e.pthk+2)&&(l="XPAN",f.ypos=e.pt+c.trunc(e.pthk/2),d=!0);return{inPanRegion:d,command:l}}function a(a,c){var e,f,g;c.origin&1?(g=a.x-c.x,c.origin&2&&(g=c.w-g)):(g=a.y-c.y,2>=c.origin&&(g=c.h-g));f=d.scroll_real2pix(c);e=f.s1;f=f.sw;return g>=e&&g<=e+f?!0:!1}function t(a,c,e){var f=
a._Mx,g;"XPAN"===e?g=f.scrollbar_x:"YPAN"===e&&(g=f.scrollbar_y);g.action=c;g.step=0.1*g.srange;g.page=9*g.step;g.scale=2;d.scroll(f,g,d.XW_COMMAND,void 0,g);A(a,g.smin,g.smin+g.srange,e.slice(0,1))}function A(a,c,d,e){var f=a._Mx,g=a._Gx,h=f.level;if("X"===e){if(f.stk[h].xmin!==c||f.stk[h].xmax!==d)f.stk[h].xmin=c,f.stk[h].xmax=d,g.xdata||1!==f.level||(g.xmin=f.stk[1].xmin,g.xmax=f.stk[1].xmax),a.refresh()}else"Y"!==e||c===f.stk[h].ymin&&d===f.stk[h].ymax||(f.stk[h].ymin=c,f.stk[h].ymax=d,g.cmode===
g.basemode&&1===f.level&&(g.ymin=Math.min(g.ymin,c),g.ymax=Math.max(g.ymax,d)),a.refresh())}var G="Keypress Table:\n--------------\n?    - Main help box.\nA    - Toggle display x,y readouts:\n       (absc) -> (index) -> (1/absc) -> (time).\nB    - Toggle LM Drag Mode:\n       (box) -> (horizontal) -> (vertical).\nC    - Toggle controls.\nL    - Toggle legend.\nM    - Pops up main menu\nR    - Toggle display specs (x/y readout)\nS    - Toggle display specs and axes.\nT    - Popup box with timecode value at mouse.\nX    - Popup box with X value at mouse.\nY    - Popup box with Y value at mouse.\nF    - Toggle fullscreen.\n";
e.browserIsCompatible=function(){var a=document.createElement("canvas").getContext?!0:!1,c="ArrayBuffer"in window;return a&&c};navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"===typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?e.PointArray=Float32Array:e.PointArray=Float64Array;e.Plot=function(r,n){if(!e.browserIsCompatible())throw"Browser is not compatible";var l=this._Mx=d.open(r);this._Gx=new x;this._Gx.parent=r;this.mouseOnCanvas=!1;n||(n={});f(this,n);
this._refresh();this.onmousemove=function(a){return function(c){var e=a._Mx,f=a._Gx,g=c.target.getBoundingClientRect(),n=void 0===c.offsetX?c.pageX-g.left-window.scrollX:c.offsetX;c=void 0===c.offsetX?c.pageY-g.top-window.scrollY:c.offsetY;g=O(a,n,c);f.retx=g.x;f.rety=g.y;e.widget||(U(a),g=document.createEvent("Event"),g.initEvent("mmove",!0,!0),g.xpos=n,g.ypos=c,g.x=f.retx,g.y=f.rety,d.dispatchEvent(e,g)&&(f.cross&&(e.warpbox?(void 0!==f.cross_xpos&&d.rubberline(e,f.cross_xpos,e.t,f.cross_xpos,e.b),
void 0!==f.cross_ypos&&d.rubberline(e,e.l,f.cross_ypos,e.r,f.cross_ypos),f.cross_xpos=void 0,f.cross_ypos=void 0):C(a)),2===f.cntrls&&(g=document.createEvent("Event"),g.initEvent("mtag",!0,!0),g.x=f.retx,g.y=f.rety,d.dispatchEvent(e,g))))}}(this);this.ontouchmove=function(a){return function(c){c.preventDefault();a.onmousemove(c)}}(this);this.throttledOnMouseMove=c.throttle(this._Gx.scroll_time_interval,this.onmousemove);d.addEventListener(l,"mousemove",this.throttledOnMouseMove,!1);this.onmouseout=
function(a){return function(c){c=a._Gx;var d=a._Mx;a.mouseOnCanvas&&(a.mouseOnCanvas=!1,c.autohide_readout&&U(a),c.autohide_panbars&&F(a),d.prompt&&d.prompt.input.enableBlur())}}(this);d.addEventListener(l,"mouseout",this.onmouseout,!1);this.onmouseover=function(a){return function(c){c=a._Gx;var d=a._Mx;a.mouseOnCanvas=!0;c.autohide_panbars&&F(a);d.prompt&&d.prompt.input.disableBlur()}}(this);d.addEventListener(l,"mouseover",this.onmouseover,!1);this.onmousedown=function(c){return function(e){e.preventDefault();
var f=c._Mx,n=c._Gx;f.widget&&"ONESHOT"===f.widget.type&&(f.widget=null,c.refresh());d.ifevent(f,e);var r=document.createEvent("Event");r.initEvent("mdown",!0,!0);r.xpos=f.xpos;r.ypos=f.ypos;r.x=n.retx;r.y=n.rety;r.which=e.which;if(!d.dispatchEvent(f,r))return!1;var l=X(c);if(l.inPanRegion){if(e.preventDefault()," "!==l.command){var p=null,r=null;"XPAN"===l.command?p=f.scrollbar_x:"YPAN"===l.command&&(p=f.scrollbar_y);if(2===e.which)r={x:f.xpos,y:f.ypos},void 0!==p&&a(r,p)&&q(c,l.command);else if(" "!==
l.command&&(r={x:f.xpos,y:f.ypos},!a(r,p)&&1===e.which)){E(c,l.command,0,e);var s=function(){a({x:f.xpos,y:f.ypos},p)?n.stillPanning&&(window.clearInterval(n.stillPanning),n.repeatPanning=void 0):E(c,l.command,0,e)};n.stillPanning=window.setTimeout(function(){n.repeatPanning=window.setInterval(s,50)},250)}}}else if(1===e.which)if(J(f.xpos,f.ypos,n.legendBtnLocation.x,n.legendBtnLocation.y,n.legendBtnLocation.width,n.legendBtnLocation.height))c.change_settings({legend:!n.legend});else{n.xmrk=n.retx;
n.ymrk=n.rety;U(c);var r={opacity:0,return_value:"zoom"},t={opacity:0.4,fill_color:f.hi,return_value:"select"};"zoom"===n.default_rubberbox_action?d.rubberbox(f,g(c),n.default_rubberbox_mode,r,t):"select"===n.default_rubberbox_action&&d.rubberbox(f,g(c),n.default_rubberbox_mode,t,r)}else 2===e.which&&(n.nomenu||h(c));return!1}}(this);this.ontouchstart=function(a){return function(c){c.preventDefault();a.onmousedown({which:1})}}(this);d.addEventListener(l,"mousedown",this.onmousedown,!1);this.docMouseUp=
function(a){return function(c){var d=a._Gx;1===c.which&&(d.panning=void 0,a._Mx.scrollbar_x.action=0,a._Mx.scrollbar_y.action=0);d.stillPanning&&(window.clearTimeout(d.stillPanning),d.stillPanning=void 0);d.repeatPanning&&(window.clearInterval(d.repeatPanning),d.repeatPanning=void 0);return!1}}(this);document.addEventListener("mouseup",this.docMouseUp,!1);this.mouseup=function(a){return function(c){c.preventDefault();var e=a._Gx,f=a._Mx;d.ifevent(a._Mx,c);var g=document.createEvent("Event");g.initEvent("mup",
!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=c.which;if(d.dispatchEvent(f,g))if(3===c.which)c.preventDefault(),a.unzoom(1),a.refresh();else if(2===c.which&&e.nomenu&&(g=document.createEvent("Event"),g.initEvent("showmenu",!0,!0),g.x=c.x||c.clientX,g.y=c.y||c.clientY,d.dispatchEvent(f,g))){c.stopPropagation&&c.stopPropagation();c.cancelBubble=!0;d.removeEventListener(f,"mousedown",a.onmousedown,!1);var n=function(){try{var c=document.createEvent("Event");c.initEvent("hidemenu",
!0,!0);d.dispatchEvent(f,c)&&d.addEventListener(f,"mousedown",a.onmousedown,!1)}finally{document.removeEventListener("mouseup",n,!1)}};document.addEventListener("mouseup",n,!1)}}}(this);this.ontouchend=function(a){return function(a){a.preventDefault()}}(this);d.addEventListener(l,"mouseup",this.mouseup,!1);this.mouseclick=function(a){return function(c){c.preventDefault();var e=a._Gx,f=a._Mx;d.ifevent(a._Mx,c);var g=document.createEvent("Event");g.initEvent("mclick",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;
g.x=e.retx;g.y=e.rety;g.which=c.which;d.dispatchEvent(f,g);return!1}}(this);d.addEventListener(l,"click",this.mouseclick,!1);this.mousedblclick=function(a){return function(c){c.preventDefault();var e=a._Gx,f=a._Mx;d.ifevent(a._Mx,c);var g=document.createEvent("Event");g.initEvent("mdblclick",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=c.which;d.dispatchEvent(f,g);return!1}}(this);d.addEventListener(l,"dblclick",this.mousedblclick,!1);this.dragMouseDownHandler=function(c){return function(d){var e=
c._Mx,f=c._Gx,g=X(c);if(g.inPanRegion&&(d.preventDefault()," "!==g.command)){var n;"XPAN"===g.command?n=e.scrollbar_x:"YPAN"===g.command&&(n=e.scrollbar_y);var r={x:e.xpos,y:e.ypos};void 0!==n&&a(r,n)&&1===d.which&&(f.panning={axis:g.command,xpos:d.screenX,ypos:d.screenY,xmin:e.stk[e.level].xmin,xmax:e.stk[e.level].xmax,ymin:e.stk[e.level].ymin,ymax:e.stk[e.level].ymax})}}}(this);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);this.dragMouseMoveHandler=function(a){return function(c){var e=
a._Gx;if(void 0!==e.panning)try{var f=e.panning.axis,g=a._Mx,n=a._Gx,r,h,l;if("XPAN"===f)l=a._Mx.scrollbar_x;else if("YPAN"===f)l=a._Mx.scrollbar_y;else throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";l.flag=-12;var p=g.level;"XPAN"===f?(r=g.stk[p].xmin,h=g.stk[p].xmax):"YPAN"===f?(r=g.stk[p].ymin,h=g.stk[p].ymax):h=r=void 0;var e=r,p=h,s=l;s.action=d.SB_DRAG;if("YPAN"===f){var q=g.scrollbar_y.trange/g.scrollbar_y.h;4===s.origin&&(q*=-1);var t=c.screenY-n.panning.ypos,u=t*
q;n.panning.ymin-u<n.panymin?(p=n.panymin+(p-e),e=n.panymin):n.panning.ymax-u>n.panymax?(e=n.panymax-(p-e),p=n.panymax):(e=n.panning.ymin-u,p=n.panning.ymax-u)}else"XPAN"===f&&(q=g.scrollbar_x.trange/g.scrollbar_x.w,3===s.origin&&(q*=-1),t=c.screenX-n.panning.xpos,u=t*q,n.panning.xmin+u<n.panxmin?(p=n.panxmin+(p-e),e=n.panxmin):n.panning.xmax+u>n.panxmax?(e=n.panxmax-(p-e),p=n.panxmax):(e=n.panning.xmin+u,p=n.panning.xmax+u));r=e;h=p;l.smin=r;l.srange=h-r;d.redrawScrollbar(l,g,void 0);A(a,l.smin,
l.smin+l.srange,f.slice(0,1));l.action=0;a.refresh()}catch(w){console.log("Error: "+w)}}}(this);this.throttledDragOnMouseMove=c.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);this.dragMouseUpHandler=function(a){return function(c){var d=a._Gx;1===c.which&&(d.panning=void 0)}}(this);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);this.onresize=function(a){return function(c){d.checkresize(a._Mx)&&a.refresh()}}(this);
this.wheelHandler=function(a){var e=a._Mx,f=a._Gx,g=c.throttle(100,function(c){var g;"XPAN"===c.command?g=e.scrollbar_x:"YPAN"===c.command&&(g=e.scrollbar_y);g.action=f.wheelscroll_mode_natural?0>event.deltaY?d.SB_WHEELDOWN:d.SB_WHEELUP:0>event.deltaY?d.SB_WHEELUP:d.SB_WHEELDOWN;g.step=0.1*g.srange;g.page=9*g.step;d.scroll(e,g,d.XW_COMMAND,void 0,g);A(a,g.smin,g.smin+g.srange,c.command.slice(0,1))}),n=c.throttle(100,function(){var c=f.wheelZoomPercent||0.2;f.wheelscroll_mode_natural?0<event.deltaY&&
(c*=-1):0>event.deltaY&&(c*=-1);"x"===f.wheelZoom?a.percent_zoom(c,1,!0):"y"===f.wheelZoom?a.percent_zoom(1,c,!0):a.percent_zoom(c,c,!0)});return function(c){d.ifevent(e,c);var r=X(a);a.mouseOnCanvas&&(c.preventDefault(),r.inPanRegion?g(r):f.wheelZoom&&n())}}(this);window.addWheelListener(window,this.wheelHandler,!1);window.addEventListener("resize",this.onresize,!1);n.nokeypress||(this.onkeypress=function(a){return function(e){var f=a._Mx,g=a._Gx;if(a.mouseOnCanvas&&(!f.widget||"MENU"!==f.widget.type))if(f.widget&&
"ONESHOT"===f.widget.type)f.widget=null,a.refresh();else{var n=getKeyCode(e);97===n?(g.iabsc=(g.iabsc+1)%4,U(a)):108===n?a.change_settings({legend:!g.legend}):103===n?a.change_settings({grid:!g.grid}):98===n||2===n?f.warpbox&&(f.warpbox.mode="box"===f.warpbox.mode?"horizontal":"horizontal"===f.warpbox.mode?"vertical":"box",d.redraw_warpbox(f)):99===n?a.change_settings({xcnt:-1*g.cntrls}):114===n?a.change_settings({show_readout:!g.show_readout}):115===n?a.change_settings({specs:!g.specs}):120===n?
(e=a._Gx,f=a._Mx,g=e.aretx.toString(),1===e.iabsc?d.message(f,"INDEX = "+g):2===e.iabsc?d.message(f,"1/X = "+g):d.message(f,"X = "+g)):121===n?(e=a._Gx,f=a._Mx,g=e.arety.toString(),2===e.iabsc?d.message(f,"1/Y = "+g):d.message(f,"Y = "+g)):122===n?(e=a._Gx,f=a._Mx,e.zmin&&e.zmax&&(g="",g=1===e.lyr.length?"Z = "+e.lyr[0].get_z(e.retx,e.rety).toString():"TODO",d.message(f,g))):116===n?(e=a._Gx,f=a._Mx,0<e.lyr.length&&(g=e.lyr[0].hcb,1===g.xunits?d.message(f,"Time = "+c.sec2tod(g.timecode+e.retx)):d.message(f,
"Time = UNK"))):109===n?h(a):63===n?d.message(f,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the key 'M' to bring up the menu.  Information about keypresses and what they do can be foundby selecting 'Keypress Info' from the main menu."):102===n?(d.fullscreen(f),a.refresh()):9===n&&e.ctrlKey&&a.change_settings({invert:null})}}}(this),setKeypressHandler(this.onkeypress));return this};
e.Plot.prototype={add_plugin:function(a,c){void 0===c&&(c=Number.MAX_VALUE);if(0>=c)throw"Invalid plugin zorder";a.init(this);var d=document.createElement("canvas");d.width=this._Mx.canvas.width;d.height=this._Mx.canvas.height;this._Gx.plugins.push({impl:a,zorder:c,canvas:d});this._Gx.plugins.sort(function(a,c){return a.zorder-c.zorder});this.refresh()},remove_plugin:function(a){for(var c=0;c<this._Gx.plugins.length;c++)this._Gx.plugins[c].impl===a&&(a.dispose&&a.dispose(),this._Gx.plugins[c].canvas.parentNode&&
this._Gx.plugins[c].canvas.parentNode.removeElement(this._Gx.plugins[c].canvas));this._Gx.plugins.sort(function(a,c){return a.zorder-c.zorder});this.refresh()},addListener:function(a,c){d.addEventListener(this._Mx,a,c,!1)},removeListener:function(a,c){d.removeEventListener(this._Mx,a,c,!1)},change_settings:function(a){for(var e=this._Gx,f=this._Mx,g=0;g<e.lyr.length;g++)e.lyr[g].change_settings(a);void 0!==a.grid&&(e.grid=null===a.grid?!e.grid:a.grid);void 0!==a.gridBackground&&(e.gridBackground=
a.gridBackground);void 0!==a.gridStyle&&(e.gridStyle=a.gridStyle);void 0!==a.wheelZoom&&(e.wheelZoom=a.wheelZoom);void 0!==a.wheelZoomPercent&&(e.wheelZoomPercent=a.wheelZoomPercent);void 0!==a.autol&&(e.autol=a.autol);void 0!==a.index&&a.index!==e.index&&(e.index=null===a.index?!e.index:a.index,e.index&&1!==e.iabsc?e.iabsc=1:e.index||1!==e.iabsc||(e.iabsc=0),T(this,{get_data:!1},void 0,void 0),this.unzoom());void 0!==a.all&&(e.all=null===a.all?!e.all:a.all);void 0!==a.show_x_axis&&(e.show_x_axis=
null===a.show_x_axis?!e.show_x_axis:a.show_x_axis,e.specs=e.show_x_axis||e.show_y_axis||e.show_readout);void 0!==a.show_y_axis&&(e.show_y_axis=null===a.show_y_axis?!e.show_y_axis:a.show_y_axis,e.specs=e.show_x_axis||e.show_y_axis||e.show_readout);void 0!==a.show_readout&&(e.show_readout=null===a.show_readout?!e.show_readout:a.show_readout,e.specs=e.show_x_axis||e.show_y_axis||e.show_readout);void 0!==a.specs&&(e.specs=null===a.specs?!e.specs:a.specs,e.specs?(e.show_x_axis=!0,e.show_y_axis=!0,e.show_readout=
!0):(e.show_x_axis=!1,e.show_y_axis=!1,e.show_readout=!1));void 0!==a.xcnt&&(e.cntrls="leftmouse"===a.xcnt?1:"continuous"===a.xcnt?2:"disable"===a.xcnt&&0<e.cntrls?-1*e.cntrls:"enable"===a.xcnt&&0>e.cntrls?-1*e.cntrls:a.xcnt);void 0!==a.legend&&(e.legend=null===a.legend?!e.legend:a.legend,p(this,-1),g=e.lbtn-2,e.show_readout?(e.legendBtnLocation={x:this._Mx.width-e.lbtn,y:2,width:g,height:g},d.shadowbox(this._Mx,this._Mx.width-e.lbtn,2,g,g,1,-1,"L")):(e.legendBtnLocation={x:this._Mx.width-e.lbtn,
y:2,width:g,height:g},d.shadowbox(this._Mx,this._Mx.width-e.lbtn,2,g,g,1,1,"L")),p(this,1));void 0!==a.pan&&(e.pan=null===a.pan?!e.pan:a.pan);void 0!==a.cross&&(e.cross=null===a.cross?!e.cross:a.cross,e.cross?(e.cross_xpos=void 0,e.cross_ypos=void 0,C(this)):(void 0!==e.cross_xpos&&d.rubberline(f,e.cross_xpos,f.t,e.cross_xpos,f.b),void 0!==e.cross_ypos&&d.rubberline(f,f.l,e.cross_ypos,f.r,e.cross_ypos),e.cross_xpos=void 0,e.cross_ypos=void 0));void 0!==a.cmode&&y(this,a.cmode);if(void 0!==a.phunits){var h=
a.phunits,g=this._Gx,l=this._Mx,q=g.plab;"R"===h?q=23:"D"===h&&(q=24);"C"===h&&(q=25);if(q!==g.plab&&(h=[Math.PI,180,0.5],h=h[q-23]/h[g.plab-23],g.plab=q,2===g.cmode)){for(q=0;q<=l.level;q++)l.stk[q].ymin*=h,l.stk[q].ymax*=h,l.stk[q].yscl*=h;g.panymin*=h;g.panymax*=h;this.refresh()}}void 0!==a.rubberbox_action&&(e.default_rubberbox_action=a.rubberbox_action);void 0!==a.rubberbox_mode&&(e.default_rubberbox_mode=a.rubberbox_mode);void 0!==a.wheelscroll_mode_natural&&(e.wheelscroll_mode_natural=a.wheelscroll_mode_natural);
void 0!==a.colors&&(a.colors.fg||(a.colors.fg=f.fg),a.colors.bg||(a.colors.bg=f.bg),d.setbgfg(f,a.colors.bg,a.colors.fg,f.xi));void 0!==a.cmap&&(e.cmap=null===a.cmap?2===e.cmode?2:1:a.cmap,d.colormap(f,c.Mc.colormap[e.cmap],e.ncolors));void 0!==a.yinv&&(f.origin=a.yinv?4:1);void 0!==a.rasterSmoothing&&(e.rasterSmoothing=null===a.rasterSmoothing?!e.rasterSmoothing:a.rasterSmoothing);void 0!==a.fillStyle&&(e.fillStyle=a.fillStyle);void 0!==a.invert&&(null===a.invert?d.invertbgfg(f):!0===a.invert?d.setbgfg(this,
"white","black"):d.setbgfg(this,"black","white"));void 0!==a.nomenu&&(e.nomenu=null===a.nomenu?!e.nomenu:a.nomenu);void 0!==a.ymin&&A(this,a.ymin,f.stk[0].ymax,"Y");void 0!==a.ymax&&A(this,f.stk[0].ymin,a.ymax,"Y");void 0!==a.xmin&&A(this,a.xmin,f.stk[0].xmax,"X");void 0!==a.xmax&&A(this,f.stk[0].xmin,a.xmax,"X");this.refresh();void 0!==a.pan&&U(this)},reread:function(){for(var a=this._Gx,c=[],e=0;e<a.lyr.length;e++)c[e]=a.lyr[e];e=a.HCB.slice();this.deoverlay();for(var f=0;f<e.length;f++)this.overlay_bluefile(e[f]);
for(e=0;e<a.lyr.length;e++)a.lyr[e].symbol=c[e].symbol,a.lyr[e].radius=c[e].radius;this.refresh();a=document.createEvent("Event");a.initEvent("reread",!0,!0);d.dispatchEvent(this._Mx,a)},cleanup:function(){},reload:function(a,c,d){var e=this._Mx,f=this._Gx;0>a||a>=f.lyr.length||void 0===f.lyr[a].reload||(a=f.lyr[a].reload(c,d),0===e.level&&T(this,{get_data:!1},a.xmin,a.xmax),this.refresh())},rescale:function(){0===this._Mx.level&&T(this,{get_data:!1},void 0,void 0);this.refresh()},push:function(a,
c,d,e){var f=this._Mx,g=this._Gx;0>a||a>=g.lyr.length||void 0===g.lyr[a].push||(a=g.lyr[a].push(c,d,e),0===f.level&&a&&T(this,{get_data:!1}),this.refresh())},overlay_array:function(a,d,e){c.log.debug("Overlay array");a=c.initialize(a,d);return this.overlay_bluefile(a,e)},overlay_pipe:function(a,d){c.log.debug("Overlay pipe");a||(a={});a.pipe=!0;var e=c.initialize(null,a);return this.overlay_bluefile(e,d)},overlay_websocket:function(a,d,e){c.log.debug("Overlay websocket: "+a);a=new WebSocket(a,"plot-data");
a.binaryType="arraybuffer";var f=this;d||(d={});d.pipe=!0;var g=c.initialize(null,d);g.ws=a;var h=this.overlay_bluefile(g,e);a.onopen=function(a){};a.onmessage=function(a){return function(a){a.data instanceof ArrayBuffer?(a=g.createArray(a.data),f.push(h,a)):"string"===typeof a.data&&(f._Gx.lyr[h].hcb||c.log.warning("Couldn't find header for layer "+h),a=JSON.parse(a.data),f.push(h,[],a))}}(a);return h},overlay_href:function(a,d,e){c.log.debug("Overlay href: "+a);try{this.show_spinner();var f=function(a,
c){return function(d){try{if(d){var f=a.overlay_bluefile(d,e);c&&c(d,f)}else alert("Failed to load data")}finally{a.hide_spinner()}}}(this,d);(new BlueFileReader).read_http(a,f)}catch(g){console.log(g),alert("Failed to load data"),this.hide_spinner()}},show_spinner:function(){this._Gx.spinner||(Q.color=this._Mx.xwfg,this._Gx.spinner=(new Spinner(Q)).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop();this._Gx.spinner=void 0},add_layer:function(a){var c=this._Gx,
e=this._Mx;c.lyr.push(a);var f=document.createEvent("Event");f.initEvent("file_overlayed",!0,!0);f.index=c.lyr.length-1;f.name=a.name;d.dispatchEvent(e,f)},get_layer:function(a){var c=this._Gx;return 0<=a&&a<c.lyr.length?c.lyr[a]:null},overlay_bluefile:function(a,d){c.log.debug("Overlay bluefile: "+a.file_name);var f=this._Mx,g=this._Gx;d=d||{};var h=0===g.HCB.length;g.HCB.push(a);1===g.HCB.length&&l(this,!0);var p=g.lyr.length;void 0===d.layerType?1===a["class"]?e.Layer1D.overlay(this,a,d):2===a["class"]&&
e.Layer2D.overlay(this,a,d):d.layerType.overlay(this,a,d);y(this,g.cmode);if(h)if(0===g.HCB.length)l(this,!1);else{g.basemode=g.cmode;var q,t;0===(g.autox&&1)&&(q=g.xmin);0===(g.autox&&2)&&(t=g.xmin);T(this,{get_data:!0},q,t);f.level=0;0!==(g.autox&&1)&&(g.xmin=f.stk[0].xmin);0!==(g.autox&&2)&&(g.xmax=f.stk[0].xmax);0!==(g.autoy&&1)&&(g.ymin=f.stk[0].ymin);0!==(g.autoy&&2)&&(g.ymax=f.stk[0].ymax);f.resize=!0;f.origin=g.lyr[0].preferred_origin?g.lyr[0].preferred_origin:1}else for(f=p;f<g.lyr.length;f++)w(this,
f);u(this);this.refresh();return g.HCB.length-1},load_files:function(a,c){for(var d=function(a){return function(d){a.overlay_bluefile(d,c)}}(this),e=0;e<a.length;e++){var f=a[e];(new BlueFileReader).read(f,d)}},deoverlay:function(a){var c=this._Gx;if(0<c.HCB.length)if(void 0===a)for(a=c.HCB.length-1;0<=a;a--)this.remove_layer(a);else if(0>a){a=c.HCB.length+a;if(0>a)return;this.remove_layer(a)}else a<c.HCB.length&&this.remove_layer(a);0===c.lyr.length&&(l(this,!1),T(this,{}))},remove_layer:function(a){var c=
this._Gx,e="",f=null;if(0<=a&&a<c.HCB.length){e=c.HCB[a].file_name;f=c.HCB[a];for(c.HCB[a]=null;a<c.HCB.length-1;a++)c.HCB[a]=c.HCB[a+1];c.HCB.length-=1}for(a=c.lyr.length-1;0<=a;a--)if(c.lyr[a].hcb===f){var g=a,h=this._Gx;h.lyr[g].ybufn=0;h.lyr[g].ybuf=null;if(g<h.lyr.length-1)for(;g<h.lyr.length-1;g++)h.lyr[g]=h.lyr[g+1];h.lyr.length-=1;0<h.HCB.length&&(h.panxmin=1,h.panxmax=-1,h.panymin=1,h.panymax=-1)}u(this);this.refresh();c=document.createEvent("Event");c.initEvent("file_deoverlayed",!0,!0);
""!==e&&(c.fileName=e);d.dispatchEvent(this._Mx,c)},pixel_zoom:function(a,c,d,e,f){a=O(this,a,c);d=O(this,d,e);this.zoom(a,d,f)},percent_zoom:function(a,c,d){var e=this._Mx,f=this._Gx,g=0;1>Math.abs(a)&&(g=Math.abs(e.stk[e.level].xmax-e.stk[e.level].xmin),g=g*a/2);a=0;1>Math.abs(c)&&(a=Math.abs(e.stk[e.level].ymax-e.stk[e.level].ymin),a=a*c/2);c={x:Math.max(e.stk[e.level].xmin+g,f.panxmin),y:Math.max(e.stk[e.level].ymin+a,f.panymin)};e={x:Math.min(e.stk[e.level].xmax-g,f.panxmax),y:Math.min(e.stk[e.level].ymax-
a,f.panymax)};this.zoom(c,e,d)},zoom:function(a,c,e){var f=this._Mx,g=this._Gx;if(!(9<=f.level)){void 0===a.x&&(a.x=f.stk[f.level].xmin);void 0===a.y&&(a.y=f.stk[f.level].ymin);void 0===c.x&&(c.x=f.stk[f.level].xmax);void 0===c.y&&(c.y=f.stk[f.level].ymax);if(c.x<a.x){var h=c.x;c.x=a.x;a.x=h}c.y<a.y&&(h=c.y,c.y=a.y,a.y=h);h={};h.xscl=f.stk[f.level].xscl;h.yscl=f.stk[f.level].yscl;h.xmin=a.x;h.xmax=c.x;h.ymin=a.y;h.ymax=c.y;g.index&&(h.xmin=Math.min(h.xmin/g.xdelta),h.xmax=Math.min(h.xmax/g.xdelta));
e&&g.inContinuousZoom?f.stk[f.level]=h:(f.stk.push(h),f.level=f.stk.length-1);g.inContinuousZoom=e;a=document.createEvent("Event");a.initEvent("zoom",!0,!0);a.level=f.level;a.inContinuousZoom=g.inContinuousZoom;a.xmin=f.stk[f.level].xmin;a.ymin=f.stk[f.level].ymin;a.xmax=f.stk[f.level].xmax;a.ymax=f.stk[f.level].ymax;d.dispatchEvent(f,a);this.refresh()}},unzoom:function(a){var c=this._Mx,e=this._Gx;if(0!==c.level){a||(a=c.stk.length);for(;0<a&&0!==c.level;)c.stk.pop(),c.level=c.stk.length-1,a-=1;
e.inContinuousZoom=!1;a=document.createEvent("Event");a.initEvent("unzoom",!0,!0);a.level=c.level;a.xmin=c.stk[c.level].xmin;a.ymin=c.stk[c.level].ymin;a.xmax=c.stk[c.level].xmax;a.ymax=c.stk[c.level].ymax;d.dispatchEvent(c,a);this.refresh()}},mimic:function(a,c){var d=this;c||(c={});c.zoom?a.addListener("zoom",function(a){d.zoom({x:a.xmin,y:a.ymin},{x:a.xmax,y:a.ymax},a.inContinuousZoom)}):c.xzoom?a.addListener("zoom",function(a){d.zoom({x:a.xmin,y:void 0},{x:a.xmax,y:void 0},a.inContinuousZoom)}):
c.yzoom&&a.addListener("zoom",function(a){d.zoom({x:void 0,y:a.ymin},{x:void 0,y:a.ymax},a.inContinuousZoom)});c.unzoom&&a.addListener("unzoom",function(a){d.unzoom(1)})},redraw:function(){var a=this._Gx,c=this._Mx,d=c.canvas.getContext("2d");a.plotData.valid?(d.drawImage(a.plotData,c.l-1,c.t-1,c.r-c.l+2,c.b-c.t+2,c.l-1,c.t-1,c.r-c.l+2,c.b-c.t+2),B(this),a.cross_xpos=void 0,a.cross_ypos=void 0,C(this)):this.refresh()},refresh:function(){var a=this;d.render(this._Mx,function(){a._refresh()})},enable_listeners:function(){var a=
this._Mx;d.addEventListener(a,"mousedown",this.onmousedown,!1);d.addEventListener(a,"mousemove",this.throttledOnMouseMove,!1);document.addEventListener("mouseup",this.docMouseUp,!1);d.addEventListener(a,"mouseup",this.mouseup,!1);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);window.addEventListener("wheel",this.wheelHandler,!1);window.addEventListener("mousewheel",
this.wheelHandler,!1);window.addEventListener("DOMMouseScroll",this.wheelHandler,!1);window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var a=this._Mx;d.removeEventListener(a,"mousedown",this.onmousedown,!1);d.removeEventListener(a,"mousemove",this.throttledOnMouseMove,!1);document.removeEventListener("mouseup",this.docMouseUp,!1);d.removeEventListener(a,"mouseup",this.mouseup,!1);window.removeEventListener("mousedown",this.dragMouseDownHandler,!1);window.removeEventListener("mousemove",
this.throttledDragOnMouseMove,!1);window.removeEventListener("mouseup",this.dragMouseUpHandler,!1);window.removeEventListener("wheel",this.wheelHandler,!1);window.removeEventListener("mousewheel",this.wheelHandler,!1);window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1);window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){d.checkresize(this._Mx)&&this.refresh()},_refresh:function(){var a=this._Mx,c=this._Gx;a.canvas.getContext("2d");if(!c.hold){d.set_font(a,
Math.min(8,a.width/64));c.pthk=1.5*a.text_w;c.specs?(a.l=!0===c.show_y_axis?6*a.text_w:1,a.r=!0===c.pan?a.width-(c.pthk+2*a.text_w):a.width-2,c.show_readout?(a.t=2*a.text_h,a.b=c.show_x_axis?a.height-4*a.text_h:a.height-3*a.text_h):(a.t=c.pan?c.pthk+2*a.text_w:1,a.b=c.show_x_axis?a.height-3*a.text_h/2:a.height-2),c.pl=c.show_readout?50*a.text_w:35*a.text_w,c.pr=Math.max(c.pl+9*a.text_w,a.r),c.pt=c.show_readout?c.show_x_axis?a.b+a.text_h+(a.height-a.b-a.text_h-c.pthk)/2:a.b+(a.height-a.b-c.pthk)/2:
(a.t-c.pthk)/2,c.lbtn=a.text_h+a.text_w+2):(c.pan?(a.t=c.pthk+2*a.text_w,a.r=a.width-(c.pthk+a.text_w)):(a.t=1,a.r=a.width-2),a.b=a.height-2,a.l=1,c.pl=a.l,c.pr=a.r,c.pt=(a.t-c.pthk)/2,c.lbtn=0);c.pyl=a.r+(a.width-a.r-c.pthk)/2+1;var e=a.level;a.stk[e].x1=a.l;a.stk[e].y1=a.t;a.stk[e].x2=a.r;a.stk[e].y2=a.b;a.stk[e].xscl=(a.stk[e].xmax-a.stk[e].xmin)/(a.r-a.l);a.stk[e].yscl=(a.stk[e].ymax-a.stk[e].ymin)/(a.b-a.t);e=O(this,a.xpos,a.ypos);c.retx=e.x;c.rety=e.y;if(0===c.panning||0!==c.panning)c.plotData.valid=
!1,d.clear_window(a);var e=c.xlab,f=c.ylab;void 0===e&&(e=30);c.index&&(e=0);void 0===f&&(f=0<c.lyr.length&&c.lyr[0].cx,1===c.cmode?f=28:2===c.cmode?f=c.plab:3===c.cmode&&f?f=21:4===c.cmode?f=22:5===c.cmode?(f=22,e=21):f=6===c.cmode?26:7===c.cmode?27:0);if(c.specs){if(0===c.sections){var g={grid:c.grid};2===c.panning&&(g.noxtlab=!0);c.show_x_axis||(g.noxtics=!0,g.noxtlab=!0,g.noxplab=!0);c.show_y_axis||(g.noytics=!0,g.noytlab=!0,g.noyplab=!0);!c.specs||c.show_readout||c.pan||(g.noyplab=!0,g.noxplab=
!0);c.gridBackground&&(g.fillStyle=c.gridBackground);c.gridStyle&&(g.gridStyle=c.gridStyle);d.drawaxis(a,c.xdiv,c.ydiv,e,f,g)}e=c.lbtn-2;c.show_readout&&c.pan&&(c.legend?(c.legendBtnLocation={x:a.width-c.lbtn,y:2,width:e,height:e},d.shadowbox(a,a.width-c.lbtn,2,e,e,1,-2,"L")):(c.legendBtnLocation={x:a.width-c.lbtn,y:2,width:e,height:e},d.shadowbox(a,a.width-c.lbtn,2,e,e,1,2,"L")),U(this))}else c.grid&&0<=c.sections&&(g={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0},
d.drawaxis(a,c.xdiv,c.ydiv,e,f,g));for(e=0;e<c.lyr.length;e++)w(this,e);p(this,4);a.r>a.l&&a.b>a.t&&(c.plotData.width=a.canvas.width,c.plotData.height=a.canvas.height,c.plotData.getContext("2d").drawImage(a.canvas,0,0),c.plotData.valid=!0);B(this);c.cross_xpos=void 0;c.cross_ypos=void 0;C(this)}}};var Q={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"auto",left:"auto"},z="Ma Ph Re Im IR Lo L2".split(" "),
S=["(absc)","(indx)","(1/ab)","(dydx)"]})(window.sigplot,window.mx,window.m);
