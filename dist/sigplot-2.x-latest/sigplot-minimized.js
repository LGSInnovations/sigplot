/*

 File: CanvasInput.js
  CanvasInput v1.0.10
  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input

  (c) 2013, James Simpson of GoldFire Studios
  goldfirestudios.com

  (c) 2013, Axios, Inc.
  Modifications made by Axios, Inc.
  axiosengineering.com

  MIT License

 File: common.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.


 File: m.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: sigplot.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: sigplot.layer1d.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: sigplot.layer2d.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License

 File: bluefile.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.


 File: matfile.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: mx.js
 Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.

 This file is part of SigPlot.

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
*/
(function(ea){"object"===typeof exports&&"undefined"!==typeof module?module.exports=ea():"function"===typeof define&&define.amd?define([],ea):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).sigplot=ea()})(function(){return function T(Q,$,a){function k(b,c){if(!$[b]){if(!Q[b]){var f="function"==typeof require&&require;if(!c&&f)return f(b,!0);if(m)return m(b,!0);f=Error("Cannot find module '"+b+"'");throw f.code="MODULE_NOT_FOUND",f;}f=$[b]=
{exports:{}};Q[b][0].call(f.exports,function(a){var f=Q[b][1][a];return k(f?f:a)},f,f.exports,T,Q,$,a)}return $[b].exports}for(var m="function"==typeof require&&require,b=0;b<a.length;b++)k(a[b]);return k}({1:[function(T,Q,$){(function(){var a=[],k=window.CanvasInput=function(m){var b=this;m=m?m:{};b._canvas=m.canvas||null;b._ctx=b._canvas?b._canvas.getContext("2d"):null;b._x=m.x||0;b._y=m.y||0;b._extraX=m.extraX||0;b._extraY=m.extraY||0;b._fontSize=m.fontSize||14;b._fontFamily=m.fontFamily||"Arial";
b._fontColor=m.fontColor||"#000";b._placeHolderColor=m.placeHolderColor||"#bfbebd";b._fontWeight=m.fontWeight||"normal";b._fontStyle=m.fontStyle||"normal";b._readonly=m.readonly||!1;b._maxlength=m.maxlength||null;b._width=m.width||150;b._height=m.height||b._fontSize;b._padding=0<=m.padding?m.padding:5;b._borderWidth=0<=m.borderWidth?m.borderWidth:1;b._borderColor=m.borderColor||"#959595";b._borderRadius=0<=m.borderRadius?m.borderRadius:3;b._backgroundImage=m.backgroundImage||"";b._boxShadow=m.boxShadow||
"1px 1px 0px rgba(255, 255, 255, 1)";b._innerShadow=m.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)";b._selectionColor=m.selectionColor||"rgba(179, 212, 253, 0.8)";b._placeHolder=m.placeHolder||"";b._value=m.value||b._placeHolder;b._onsubmit=m.onsubmit||function(){};b._onkeydown=m.onkeydown||function(){};b._onkeyup=m.onkeyup||function(){};b._onfocus=m.onfocus||function(){};b._onblur=m.onblur||function(){};b._cursor=!1;b._cursorPos=0;b._hasFocus=!1;b._selection=[0,0];b._wasOver=!1;b._renderOnReturn=
void 0!==m.renderOnReturn?m.renderOnReturn:!0;b._disableBlur=m.disableBlur||!1;b._tabToClear=m.tabToClear||!1;b.boxShadow(b._boxShadow,!0);b._calcWH();b._renderCanvas=document.createElement("canvas");b._renderCanvas.setAttribute("width",b.outerW);b._renderCanvas.setAttribute("height",b.outerH);b._renderCtx=b._renderCanvas.getContext("2d");b._shadowCanvas=document.createElement("canvas");b._shadowCanvas.setAttribute("width",b._width+2*b._padding);b._shadowCanvas.setAttribute("height",b._height+2*b._padding);
b._shadowCtx=b._shadowCanvas.getContext("2d");"undefined"!==typeof m.backgroundGradient?(b._backgroundColor=b._renderCtx.createLinearGradient(0,0,0,b.outerH),b._backgroundColor.addColorStop(0,m.backgroundGradient[0]),b._backgroundColor.addColorStop(1,m.backgroundGradient[1])):b._backgroundColor=m.backgroundColor||"#fff";b._canvas&&(b.mousemoveCanvasListener=function(a){a=a||window.event;b.mousemove(a,b)},b._canvas.addEventListener("mousemove",b.mousemoveCanvasListener,!1),b.mousedownCanvasListener=
function(a){a=a||window.event;b.mousedown(a,b)},b._canvas.addEventListener("mousedown",b.mousedownCanvasListener,!1),b.mouseupCanvasListener=function(a){a=a||window.event;b.mouseup(a,b)},b._canvas.addEventListener("mouseup",b.mouseupCanvasListener,!1));b.mouseupWindowListener=function(a){b._hasFocus&&!b._mouseDown&&b.blur()};window.addEventListener("mouseup",b.mouseupWindowListener,!0);b.keydownWindowListener=function(a){a=a||window.event;b._hasFocus&&b.keydown(a,b)};window.addEventListener("keydown",
b.keydownWindowListener,!1);b.keyupWindowListener=function(a){a=a||window.event;b._hasFocus&&b._onkeyup(a,b)};window.addEventListener("keyup",b.keyupWindowListener,!1);b.pasteWindowListener=function(a){a=a||window.event;if(b._hasFocus){a=a.clipboardData.getData("text/plain");var m=b._value.substr(0,b._cursorPos),f=b._value.substr(b._cursorPos);b._value=m+a+f;b._cursorPos+=a.length;b.render()}};window.addEventListener("paste",b.pasteWindowListener,!1);a.push(b);b._inputsIndex=a.length-1;b.render()};
k.prototype={canvas:function(a){return"undefined"!==typeof a?(this._canvas=a,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(a){return"undefined"!==typeof a?(this._x=a,this.render()):this._x},y:function(a){return"undefined"!==typeof a?(this._y=a,this.render()):this._y},extraX:function(a){return"undefined"!==typeof a?(this._extraX=a,this.render()):this._extraX},extraY:function(a){return"undefined"!==typeof a?(this._extraY=a,this.render()):this._extraY},fontSize:function(a){return"undefined"!==
typeof a?(this._fontSize=a,this.render()):this._fontSize},fontFamily:function(a){return"undefined"!==typeof a?(this._fontFamily=a,this.render()):this._fontFamily},fontColor:function(a){return"undefined"!==typeof a?(this._fontColor=a,this.render()):this._fontColor},placeHolderColor:function(a){return"undefined"!==typeof a?(this._placeHolderColor=a,this.render()):this._placeHolderColor},fontWeight:function(a){return"undefined"!==typeof a?(this._fontWeight=a,this.render()):this._fontWeight},fontStyle:function(a){return"undefined"!==
typeof a?(this._fontStyle=a,this.render()):this._fontStyle},width:function(a){return"undefined"!==typeof a?(this._width=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(a){return"undefined"!==typeof a?(this._height=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(a){return"undefined"!==typeof a?(this._padding=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(a){return"undefined"!==typeof a?
(this._borderWidth=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(a){return"undefined"!==typeof a?(this._borderColor=a,this.render()):this._borderColor},borderRadius:function(a){return"undefined"!==typeof a?(this._borderRadius=a,this.render()):this._borderRadius},backgroundColor:function(a){return"undefined"!==typeof a?(this._backgroundColor=a,this.render()):this._backgroundColor},backgroundGradient:function(a){return"undefined"!==typeof a?(this._backgroundColor=
this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,a[0]),this._backgroundColor.addColorStop(1,a[1]),this.render()):this._backgroundColor},boxShadow:function(a,b){if("undefined"!==typeof a){var d=a.split("px ");this._boxShadow={x:"none"===this._boxShadow?0:parseInt(d[0],10),y:"none"===this._boxShadow?0:parseInt(d[1],10),blur:"none"===this._boxShadow?0:parseInt(d[2],10),color:"none"===this._boxShadow?"":d[3]};this.shadowL=0>this._boxShadow.x?Math.abs(this._boxShadow.x)+
this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.x);this.shadowR=this._boxShadow.blur+this._boxShadow.x;this.shadowT=0>this._boxShadow.y?Math.abs(this._boxShadow.y)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.y);this.shadowB=this._boxShadow.blur+this._boxShadow.y;this.shadowW=this.shadowL+this.shadowR;this.shadowH=this.shadowT+this.shadowB;this._calcWH();if(!b)return this._updateCanvasWH(),this.render()}else return this._boxShadow},innerShadow:function(a){return"undefined"!==
typeof a?(this._innerShadow=a,this.render()):this._innerShadow},selectionColor:function(a){return"undefined"!==typeof a?(this._selectionColor=a,this.render()):this._selectionColor},placeHolder:function(a){return"undefined"!==typeof a?(this._placeHolder=a,this.render()):this._placeHolder},value:function(a){return"undefined"!==typeof a?(this._value=a,this.focus()):this._value},onsubmit:function(a){if("undefined"!==typeof a)return this._onsubmit=a,this;this._onsubmit()},onkeydown:function(a){if("undefined"!==
typeof a)return this._onkeydown=a,this;this._onkeydown()},onkeyup:function(a){if("undefined"!==typeof a)return this._onkeyup=a,this;this._onkeyup()},focus:function(a){var b=this,d;if(!b._readonly){b._hasFocus||b._onfocus(b);b._selectionUpdated?delete b._selectionUpdated:b._selection=[0,0];b._cursorPos="number"===typeof a?a:b._clipText().length;b._placeHolder===b._value&&(b._value="");b._hasFocus=!0;b._cursor=!0;b._cursorInterval&&clearInterval(b._cursorInterval);b._cursorInterval=setInterval(function(){b._cursor=
!b._cursor;b.render()},500);a=navigator.userAgent.toLowerCase();a=0<=a.indexOf("chrome")&&0<=a.indexOf("mobile")&&0<=a.indexOf("android");var c="undefined"!==typeof window.orientation;c&&!a&&document&&document.createElement&&(d=document.createElement("input"))?(d.type="text",d.style.opacity=0,d.style.position="absolute",d.style.left=b._x+b._extraX+(b._canvas?b._canvas.offsetLeft:0)+"px",d.style.top=b._y+b._extraY+(b._canvas?b._canvas.offsetTop:0)+"px",d.style.width=b._width,d.style.height=0,document.body.appendChild(d),
d.focus(),d.addEventListener("blur",function(){b.blur(b)},!1)):c&&b.value(prompt(b._placeHolder)||"");return b.render()}},blur:function(a){a=a||this;a._disableBlur||(a._onblur(a),a._cursorInterval&&clearInterval(a._cursorInterval),a._hasFocus=!1,a._cursor=!1,a._selection=[0,0],""===a._value&&(a._value=a._placeHolder));return a.render()},disableBlur:function(a){(a||this)._disableBlur=!0},enableBlur:function(a){(a||this)._disableBlur=!1},keydown:function(m,b){var d=m.which,c=m.shiftKey,f=null,r;if(b._hasFocus){b._onkeydown(m,
b);if(65===d&&(m.ctrlKey||m.metaKey))return b._selection=[0,b._value.length],m.preventDefault(),b.render();if(17===d||m.metaKey||m.ctrlKey)return b;m.preventDefault();if(8===d)!b._clearSelection()&&0<b._cursorPos&&(c=b._value.substr(0,b._cursorPos-1),r=b._value.substr(b._cursorPos,b._value.length),b._value=c+r,b._cursorPos--);else if(37===d)0<b._cursorPos&&(b._cursorPos--,b._cursor=!0,b._selection=[0,0]);else if(39===d)b._cursorPos<b._value.length&&(b._cursorPos++,b._cursor=!0,b._selection=[0,0]);
else if(13===d)b._onsubmit(m,b);else if(9===d)if(b._tabToClear)b._value="",b._cursorPos=0;else{var e=a[b._inputsIndex+1]?b._inputsIndex+1:0;e!==b._inputsIndex&&(b.blur(),setTimeout(function(){a[e].focus()},10))}else if(f=b._mapCodeToKey(c,d)){b._clearSelection();if(b._maxlength&&b._maxlength<=b._value.length)return;c=b._value?b._value.substr(0,b._cursorPos):"";r=b._value?b._value.substr(b._cursorPos):"";b._value=c+f+r;b._cursorPos++}return 13==d&&b._renderOnReturn||13!==d?b.render():function(){}}},
click:function(a,b){var d=b._mousePos(a),c=d.x,d=d.y;if(b._endSelection)delete b._endSelection,delete b._selectionUpdated;else if(b._canvas&&b._overInput(c,d)||!b._canvas){if(b._mouseDown)return b._mouseDown=!1,b.click(a,b),b.focus(b._clickPos(c,d))}else return b.blur()},mousemove:function(a,b){var d=b._mousePos(a),c=d.x,f=d.y;(d=b._overInput(c,f))&&b._canvas?(b._canvas.style.cursor="text",b._wasOver=!0):b._wasOver&&b._canvas&&(b._canvas.style.cursor="default",b._wasOver=!1);if(b._hasFocus&&0<=b._selectionStart)if(f=
b._clickPos(c,f),c=Math.min(b._selectionStart,f),f=Math.max(b._selectionStart,f),!d)b._selectionUpdated=!0,b._endSelection=!0,delete b._selectionStart,b.render();else if(b._selection[0]!==c||b._selection[1]!==f)b._selection=[c,f],b.render()},mousedown:function(a,b){var d=b._mousePos(a),c=d.x,d=d.y,f=b._overInput(c,d);b._mouseDown=f;b._hasFocus&&f&&(b._selectionStart=b._clickPos(c,d))},mouseup:function(a,b){var d=b._mousePos(a),c=d.x,d=d.y,f=b._clickPos(c,d)!==b._selectionStart;b._hasFocus&&0<=b._selectionStart&&
b._overInput(c,d)&&f?(b._selectionUpdated=!0,delete b._selectionStart,b.render()):delete b._selectionStart;b.click(a,b)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",this.mouseupCanvasListener,!1);this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1);this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1);window.removeEventListener("keydown",this.keydownWindowListener,!1);window.removeEventListener("keyup",
this.keyupWindowListener,!1);window.removeEventListener("mouseup",this.mouseupWindowListener,!0);window.removeEventListener("paste",this.pasteWindowListener,!1);clearInterval(this._cursorInterval);this._canvas.style.cursor="default";for(var m=0;m<a.length;m++)a[m]===this&&a.remove(m)},render:function(){var a=this,b=a._renderCtx,d=a.outerW,c=a.outerH,f=a._borderRadius,r=a._borderWidth,e=a.shadowW,x=a.shadowH;b.clearRect(0,0,b.canvas.width,b.canvas.height);b.shadowOffsetX=a._boxShadow.x;b.shadowOffsetY=
a._boxShadow.y;b.shadowBlur=a._boxShadow.blur;b.shadowColor=a._boxShadow.color;0<a._borderWidth&&(b.fillStyle=a._borderColor,a._roundedRect(b,a.shadowL,a.shadowT,d-e,c-x,f),b.fill(),b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=0);a._drawTextBox(function(){b.shadowOffsetX=0;b.shadowOffsetY=0;b.shadowBlur=0;var w=a._clipText(),k=a._padding+a._borderWidth+a.shadowT;if(0<a._selection[1]){var C=a._textWidth(w.substring(0,a._selection[0])),G=a._textWidth(w.substring(a._selection[0],a._selection[1]));
b.fillStyle=a._selectionColor;b.fillRect(k+C,k,G,a._height)}b.fillStyle=a._placeHolder===a._value&&""!==a._value?a._placeHolderColor:a._fontColor;a._cursor&&(C=a._textWidth(w.substring(0,a._cursorPos)),b.fillRect(k+C,k,1,a._height));C=a._padding+a._borderWidth+a.shadowL;k=Math.round(k+a._height/2);b.font=a._fontStyle+" "+a._fontWeight+" "+a._fontSize+"px "+a._fontFamily;b.textAlign="left";b.textBaseline="middle";b.fillText(w,C,k);G=a._innerShadow.split("px ");w="none"===a._innerShadow?0:parseInt(G[0],
10);k="none"===a._innerShadow?0:parseInt(G[1],10);C="none"===a._innerShadow?0:parseInt(G[2],10);G="none"===a._innerShadow?"":G[3];if(0<C){var z=a._shadowCtx,H=z.canvas.width,J=z.canvas.height;z.clearRect(0,0,H,J);z.shadowBlur=C;z.shadowColor=G;z.shadowOffsetX=0;z.shadowOffsetY=k;z.fillRect(-1*d,-100,3*d,100);z.shadowOffsetX=w;z.shadowOffsetY=0;z.fillRect(H,-1*c,100,3*c);z.shadowOffsetX=0;z.shadowOffsetY=k;z.fillRect(-1*d,J,3*d,100);z.shadowOffsetX=w;z.shadowOffsetY=0;z.fillRect(-100,-1*c,100,3*c);
a._roundedRect(b,r+a.shadowL,r+a.shadowT,d-2*r-e,c-2*r-x,f);b.clip();b.drawImage(a._shadowCanvas,0,0,H,J,r+a.shadowL,r+a.shadowT,H,J)}a._ctx&&(a._ctx.clearRect(a._x,a._y,b.canvas.width,b.canvas.height),a._ctx.drawImage(a._renderCanvas,a._x,a._y));return a})},_drawTextBox:function(a){var b=this,d=b._renderCtx,c=b.outerW,f=b.outerH,r=b._borderRadius,e=b._borderWidth,x=b.shadowW,w=b.shadowH;if(""===b._backgroundImage)d.fillStyle=b._backgroundColor,b._roundedRect(d,e+b.shadowL,e+b.shadowT,c-2*e-x,f-2*
e-w,r),d.fill(),a();else{var k=new Image;k.src=b._backgroundImage;k.onload=function(){d.drawImage(k,0,0,k.width,k.height,e+b.shadowL,e+b.shadowT,c,f);a()}}},_clearSelection:function(){if(0<this._selection[1]){var a=this._selection[0],b=this._selection[1];this._value=this._value.substr(0,a)+this._value.substr(b);this._cursorPos=a;this._cursorPos=0>this._cursorPos?0:this._cursorPos;this._selection=[0,0];return!0}return!1},_clipText:function(a){a="undefined"===typeof a?this._value:a;var b=this._textWidth(a)/
(this._width-this._padding);return(1<b?a.substr(-1*Math.floor(a.length/b)):a)+""},_textWidth:function(a){var b=this._renderCtx;b.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily;b.textAlign="left";return b.measureText(a).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW;this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var a=this._renderCanvas.width,b=this._renderCanvas.height;
this._renderCanvas.setAttribute("width",this.outerW);this._renderCanvas.setAttribute("height",this.outerH);this._shadowCanvas.setAttribute("width",this._width+2*this._padding);this._shadowCanvas.setAttribute("height",this._height+2*this._padding);this._ctx&&this._ctx.clearRect(this._x,this._y,a,b)},_roundedRect:function(a,b,d,c,f,r){c<2*r&&(r=c/2);f<2*r&&(r=f/2);a.beginPath();a.moveTo(b+r,d);a.lineTo(b+c-r,d);a.quadraticCurveTo(b+c,d,b+c,d+r);a.lineTo(b+c,d+f-r);a.quadraticCurveTo(b+c,d+f,b+c-r,d+
f);a.lineTo(b+r,d+f);a.quadraticCurveTo(b,d+f,b,d+f-r);a.lineTo(b,d+r);a.quadraticCurveTo(b,d,b+r,d);a.closePath()},_overInput:function(a,b){var d=a<=this._x+this._extraX+this._width+2*this._padding,c=b>=this._y+this._extraY,f=b<=this._y+this._extraY+this._height+2*this._padding;return a>=this._x+this._extraX&&d&&c&&f},_clickPos:function(a,b){var d=this._value;this._value===this._placeHolder&&(d="");var d=this._clipText(d),c=0,f=d.length;if(a-(this._x+this._extraX)<this._textWidth(d))for(var r=0;r<
d.length;r++)if(c+=this._textWidth(d[r]),c>=a-(this._x+this._extraX)){f=r;break}return f},_mousePos:function(a){var b=a.target,d=document.defaultView.getComputedStyle(b,void 0),c=parseInt(d.paddingLeft,10)||0,f=parseInt(d.paddingLeft,10)||0,r=parseInt(d.borderLeftWidth,10)||0,d=parseInt(d.borderLeftWidth,10)||0,e=document.body.parentNode.offsetTop||0,x=document.body.parentNode.offsetLeft||0,w=0,k=0;if("unefined"!==typeof b.offsetParent){do w+=b.offsetLeft,k+=b.offsetTop;while(b=b.offsetParent)}return{x:a.pageX-
(w+(c+r+x)),y:a.pageY-(k+(f+d+e))}},_mapCodeToKey:function(a,b){for(var d=[8,9,13,16,17,18,20,27,91,92],c="",c=0;c<d.length;c++)if(b===d[c])return;if("boolean"===typeof a&&"number"===typeof b)return d={32:" ",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",173:"_",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},c=a?65<=b&&90>=b?String.fromCharCode(b):d[b]:65<=b&&90>=b?String.fromCharCode(b).toLowerCase():96===b?"0":97===
b?"1":98===b?"2":99===b?"3":100===b?"4":101===b?"5":102===b?"6":103===b?"7":104===b?"8":105===b?"9":188===b?",":190===b?".":191===b?"/":192===b?"`":220===b?"\\":187===b?"=":189===b||173===b?"-":222===b?"'":186===b?";":219===b?"[":221===b?"]":String.fromCharCode(b)}};Q.exports=k})()},{}],2:[function(T,Q,$){(function(){function a(){}function k(a){a=new Uint8Array(a);if(I)return String.fromCharCode.apply(null,a);for(var b="",f=0;f<a.length;f++)b+=String.fromCharCode(a[f]);return b}function m(a){return 0<=
a&&31>a?1<<a:m[a]||(m[a]=Math.pow(2,a))}function b(a){var b=document.createElement("a");b.href=a;for(var f=b.protocol.replace(":",""),e=b.hostname,c=b.port,r=b.search,d={},x=b.search.replace(/^\?/,"").split("&"),w=x.length,k=0,m;k<w;k++)x[k]&&(m=x[k].split("="),d[m[0]]=m[1]);return{source:a,protocol:f,host:e,port:c,query:r,params:d,file:(b.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||
[null,""])[1],segments:b.pathname.replace(/^\//,"").split("/")}}function d(a,b,f){f=f||1024;var e=0,c=new ArrayBuffer(a.length),r=new Uint8Array(c),d=function(){for(var x=e+f;e<x;e++)r[e]=a.charCodeAt(e)&255;e>=a.length?b(c):setTimeout(d,0)};setTimeout(d,0)}var c=T("./common");navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var f=function(){var a=new ArrayBuffer(4),b=new Uint32Array(a),a=new Uint8Array(a);b[0]=3735928559;if(239===a[0])return"LE";if(222===a[0])return"BE";throw Error("unknown endianness");
}(),r={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},e={P:0.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},x={P:null,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array},w={P:null,A:null,O:"getUint8",B:"getInt8",I:"getInt16",L:"getInt32",X:function(a,b,f){var e,c,r=Math.pow(2,53);f?(e=4,c=0):(e=0,c=4);e=a.getInt32(b+e,f);a=a.getInt32(b+c,f)+m(32)*e;return a>=r?(window.console.info("Int is bigger than JS can represent."),Infinity):a},F:"getFloat32",
D:"getFloat64"},I=!0;try{var C=new Uint8Array(new ArrayBuffer(4));C[0]=66;C[1]=76;C[2]=85;C[3]=69;"BLUE"!==String.fromCharCode.apply(null,C)&&(I=!1)}catch(G){I=!1}a.BlueHeader=function(a,b){this.options={ext_header_type:"dict"};c.update(this.options,b);this.buf=a;if(null!=this.buf){var f=new DataView(this.buf);this.version=k(this.buf.slice(0,4));this.headrep=k(this.buf.slice(4,8));this.datarep=k(this.buf.slice(8,12));var e="EEEI"===this.headrep,r="EEEI"===this.datarep;this.ext_start=f.getInt32(24,
e);this.ext_size=f.getInt32(28,e);this.type=f.getUint32(48,e);this["class"]=this.type/1E3;this.format=k(this.buf.slice(52,54));this.timecode=f.getFloat64(56,e);1===this["class"]?(this.xstart=f.getFloat64(256,e),this.xdelta=f.getFloat64(264,e),this.xunits=f.getInt32(272,e),this.yunits=f.getInt32(296,e),this.subsize=1):2===this["class"]&&(this.xstart=f.getFloat64(256,e),this.xdelta=f.getFloat64(264,e),this.xunits=f.getInt32(272,e),this.subsize=f.getInt32(276,e),this.ystart=f.getFloat64(280,e),this.ydelta=
f.getFloat64(288,e),this.yunits=f.getInt32(296,e));this.data_start=f.getFloat64(32,e);this.data_size=f.getFloat64(40,e);var f=this.data_start,d=this.data_start+this.data_size;this.ext_size&&(this.ext_header=this.unpack_keywords(this.buf,this.ext_size,512*this.ext_start,e));this.setData(this.buf,f,d,r)}};a.BlueHeader.prototype={setData:function(a,b,c,d){1===this["class"]?(this.spa=r[this.format[0]],this.bps=e[this.format[1]],this.bpa=this.spa*this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2===this["class"]&&
(this.spa=r[this.format[0]],this.bps=e[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa);void 0===d&&(d="LE"===f);if("LE"===f&&!d)throw"Not supported "+f+" "+d;if("BE"===f&&this.littleEndianData)throw"Not supported "+f+" "+d;a?(this.dview=b&&c?this.createArray(a,b,(c-b)/this.bps):this.createArray(a),this.size=this.dview.length/(this.spa*this.ape)):this.dview=this.createArray(null,null,this.size)},unpack_keywords:function(a,b,f,e){var c,r,d,x,y,m,I=[],l={},
B={},N=0;a=a.slice(f,a.length);var p=new DataView(a);for(a=k(a);N<b;)m=N+8,f=p.getUint32(N,e),c=p.getInt16(N+4,e),r=p.getInt8(N+6,e),d=a.slice(N+7,N+8),c=f-c,y=m+c,r=a.slice(y,y+r),"A"===d?x=a.slice(m,m+c):w[d]?x="string"===typeof w[d]?p[w[d]](m,e):w[d](p,m,e):window.console.info("Unsupported keyword format "+d+" for tag "+r),"undefined"===typeof l[r]?l[r]=1:(l[r]++,r=""+r+l[r]),B[r]=x,I.push({tag:r,value:x}),N+=f;a=["dict","json",{},"XMTable","JSON","DICT"];for(var F in a)if(a[F]===this.options.ext_header_type)return B;
return I},createArray:function(a,b,f){var c=x[this.format[1]];if(void 0===c)throw"unknown format "+this.format[1];void 0===b&&(b=0);void 0===f&&(f=a.length||a.byteLength/e[this.format[1]]);return a?new c(a,b,f):new c(f)}};a.BlueFileReader=function(a){this.options=a};a.BlueFileReader.prototype={readheader:function(b,f){var e=this,c=new FileReader,r=b.webkitSlice(0,512);c.onloadend=function(b){return function(r){r.target.error?f(null):(r=new a.BlueHeader(c.result,e.options),r.file=b,f(r))}}(b);c.readAsArrayBuffer(r)},
read:function(b,f){var e=this,c=new FileReader;c.onloadend=function(b){return function(r){r.target.error?f(null):(r=new a.BlueHeader(c.result,e.options),r.file=b,r.file_name=b.name,f(r))}}(b);c.readAsArrayBuffer(b)},read_http:function(f,e){var c=this,r=new XMLHttpRequest;r.open("GET",f,!0);r.responseType="arraybuffer";r.overrideMimeType("text/plain; charset=x-user-defined");r.onload=function(x){if(4!==r.readyState||200!==r.status&&0!==r.status)e(null);else if(x=null,r.response){x=r.response;x=new a.BlueHeader(x,
c.options);b(f);var w=b(f);x.file_name=w.file;e(x)}else r.responseText&&d(r.responseText,function(r){r=new a.BlueHeader(r,c.options);b(f);var d=b(f);r.file_name=d.file;e(r)})};r.onerror=function(a){e(null)};r.send(null)}};Q.exports=a})()},{"./common":3}],3:[function(T,Q,$){(function(){Q.exports={};window.ArrayBuffer&&!ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=function(a,k){var m=new Uint8Array(this);void 0===k&&(k=m.length);for(var b=new ArrayBuffer(k-a),d=new Uint8Array(b),c=0;c<
d.length;c++)d[c]=m[c+a];return b});Array.prototype.remove=function(a,k){var m=this.slice((k||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,m)};window.requestAnimFrame=function(a){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/60)}}();window.cancelAnimFrame=function(a){return window.cancelAnimationFrame||
window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(a){window.clearTimeout(a)}}();Q.exports.dashOn=function(a,k,m){return a.setLineDash?(a.setLineDash([k,m]),!0):void 0!==a.mozDash?(a.mozDash=[k,m],!0):a.webkitLineDash&&0===a.webkitLineDash.length?(a.webkitLineDash=[k,m],!0):!1};Q.exports.dashOff=function(a){a.setLineDash?a.setLineDash([]):a.mozDash?a.mozDash=null:a.webkitLineDash&&(a.webkitLineDash=[])};Q.exports.getKeyCode=
function(a){a=window.event||a;return a=a.charCode||a.keyCode};Q.exports.setKeypressHandler=function(a){window.addEventListener?window.addEventListener("keypress",a,!1):window.attachEvent&&window.attachEvent("onkeypress",a)};Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});window.Float64Array||(window.Float64Array=function(){return window.Float64Array||function(a,k,m){if(!(a instanceof ArrayBuffer))throw"Invalid type";var b=new DataView(a),d=[];
a=(a.byteLength-k)/8;d.length=void 0===m?a:Math.min(m,a);for(m=0;m<d.length;m++)d[m]=b.getFloat64(8*m+k,!0);d.subarray=function(a,b){return d.slice(a,b)};return d}}());(function(){var a=function(){};window.console||(window.console={log:a,info:a,warn:a,debug:a,error:a});if((new Int8Array([0,1,0])).subarray(1).subarray(1)[0]){var k=function(a,b){0===arguments.length?(a=0,b=this.length):(0>a&&(a+=this.length),a=Math.max(0,Math.min(this.length,a)),1===arguments.length?b=this.length:(0>b&&(b+=this.length),
b=Math.max(a,Math.min(this.length,b))));return new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,b-a)};[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(a){a.prototype.subarray=k})}})();(function(a,k){function m(f,r,e,x){f[d](b+r,"wheel"===c?e:function(b){!b&&(b=a.event);var f={originalEvent:b,target:b.target||b.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===b.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){b.preventDefault?
b.preventDefault():b.returnValue=!1}};"mousewheel"===c?(f.deltaY=-0.025*b.wheelDelta,b.wheelDeltaX&&(f.deltaX=-0.025*b.wheelDeltaX)):f.deltaY=b.detail;return e(f)},x||!1)}var b="",d,c;a.addEventListener?d="addEventListener":(d="attachEvent",b="on");c="onwheel"in k.createElement("div")?"wheel":void 0!==k.onmousewheel?"mousewheel":"DOMMouseScroll";a.addWheelListener=function(a,b,e){m(a,c,b,e);"DOMMouseScroll"===c&&m(a,"MozMousePixelScroll",b,e)}})(window,document);Q.exports.update=function k(m,b){for(var d in b){var c=
b[d];"object"===typeof c?k(m[d],c):m[d]=c}return m}})()},{}],4:[function(T,Q,$){(function(){function a(){}function k(a){return(10>a?"0":"")+a}var m=T("./bluefile"),b=T("loglevel");a.log=b;navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"===typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?a.PointArray=Float32Array:a.PointArray=Float64Array;var d={0:["None","U",!0,!0],1:["Time","sec",!0,!0],2:["Delay","sec",!0,!1],3:["Frequency","Hz",!0,!0],4:["Time code format",
"",!0,!1],5:["Distance","m",!0,!0],6:["Speed","m/s",!0,!0],7:["Acceleration","m/sec^2",!0,!0],8:["Jerk","m/sec^3",!0,!0],9:["Doppler","Hz",!0,!1],10:["Doppler rate","Hz/sec",!0,!0],11:["Energy","J",!0,!0],12:["Power","W",!0,!0],13:["Mass","g",!0,!0],14:["Volume","l",!0,!0],15:["Angular power density","W/ster",!0,!0],16:["Integrated power density","W/rad",!0,!0],17:["Spatial power density","W/m^2",!0,!0],18:["Integrated power density","W/m",!1,!0],19:["Spectral power density","W/MHz",!0,!0],20:["Amplitude",
"U",!0,!1],21:["Real","U",!0,!1],22:["Imaginary","U",!0,!1],23:["Phase","rad",!0,!0],24:["Phase","deg",!1,!0],25:["Phase","cycles",!1,!0],26:["10*Log","U",!0,!1],27:["20*Log","U",!0,!1],28:["Magnitude","U",!0,!1],29:["Unknown","U",!0,!1],30:["Unknown","U",!1,!1],31:["General dimensionless","",!0,!0],32:["Counts","",!0,!1],33:["Angle","rad",!0,!1],34:["Angle","deg",!1,!1],35:["Relative power","dB",!0,!0],36:["Relative power","dBm",!1,!0],37:["Relative power","dBW",!1,!0],38:["Solid angle","ster",!0,
!0],40:["Distance","ft",!1,!0],41:["Distance","nmi",!1,!0],42:["Speed","ft/sec",!1,!0],43:["Speed","nmi/sec",!1,!0],44:["Speed","knots=nmi/hr",!1,!0],45:["Acceleration","ft/sec^2",!1,!0],46:["Acceleration","nmi/sec^2",!1,!0],47:["Acceleration","knots/sec",!1,!0],48:["Acceleration","G",!1,!0],49:["Jerk","G/sec",!1,!0],50:["Rotation","rps",!0,!1],51:["Rotation","rpm",!1,!1],52:["Angular velocity","rad/sec",!0,!0],53:["Angular velocity","deg/sec",!1,!0],54:["Angular acceleration","rad/sec^2",!0,!0],
55:["Angular acceleration","deg/sec^2",!1,!0],60:["Latitude","deg",!0,!1],61:["Longitude","deg",!0,!1],62:["Altitude","ft",!0,!1],63:["Altitude","m",!1,!1]};a.UNITS=d;a.Mc={colormap:[{name:"Greyscale",colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,
red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},
{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"calewhite",colors:[{pos:0,red:100,green:100,blue:100},{pos:16.666,red:0,green:0,blue:100},{pos:33.333,red:0,green:100,blue:100},{pos:50,red:0,green:100,blue:0},{pos:66.666,red:100,green:100,blue:0},{pos:83.333,red:100,green:0,blue:0},{pos:100,red:100,green:0,blue:100}]},{name:"HotDesat",colors:[{pos:0,
red:27.84,green:27.84,blue:85.88},{pos:14.2857,red:0,green:0,blue:35.69},{pos:28.571,red:0,green:100,blue:100},{pos:42.857,red:0,green:49.8,blue:0},{pos:57.14286,red:100,green:100,blue:0},{pos:71.42857,red:100,green:37.65,blue:0},{pos:85.7143,red:41.96,green:0,blue:0},{pos:100,red:87.84,green:29.8,blue:29.8}]},{name:"Sunset",colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,
red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]}]};a.PIPESIZE=1048576;a.unit_lookup=function(a){for(var b=0;64>b;b++){var e;e=void 0===d[b]?d[0]:d[b];var c=e[1],w=e[0]+" "+e[1],k=e[0]+"_"+e[1];if(a===e[0]){if(e[2])return b}else if(a===c){if(e[3])return b}else if(a===w||a===k)return b}return a};a.initialize=function(b,c){var e=new m.BlueHeader(null);e.version="BLUE";e.size=0;e.type=1E3;e.format="SF";e.timecode=0;e.xstart=0;e.xdelta=1;e.xunits=0;e.subsize=1;e.ystart=0;e.ydelta=1;e.yunits=
0;e.enabled_streaming_pcut=!1;c||(c={});for(var d in c)e[d]=c[d];e.xunits=a.unit_lookup(e.xunits);e.yunits=a.unit_lookup(e.yunits);1<e.subsize&&(e.type=2E3);e["class"]=e.type/1E3;if(2===e["class"]&&void 0===c.subsize)throw"subsize must be provided with type 2000 files";c.pipe?(e.pipe=!0,e.in_byte=0,e.out_byte=0,e.buf=new ArrayBuffer(c.pipesize||a.PIPESIZE),e.setData(e.buf),e.data_free=e.dview.length):e.setData(b);return e};a.force1000=function(a){2===a["class"]&&(a.size=a.size&&!a.pipe?a.subsize*
a.size:0,a.bpe/=a.subsize,a.ape=1)};a.grab=function(a,b,e,c){if(!a.dview)return 0;"C"===a.format[0]&&(e*=2);c=Math.min(b.length,a.dview.length-e);if(void 0===b.set)for(var d=0;d<c;d++)b[d]=a.dview[e+d];else b.set(a.dview.subarray(e,e+c));"C"===a.format[0]&&(c/=2);return c};a.filad=function(a,b,e){if(a.data_free<b.length)throw"Pipe full";var c=a.in_byte/a.dview.BYTES_PER_ELEMENT,d=c+b.length;if(d>a.dview.length){var d=a.dview.length-c,k=b.length-d;b.subarray?(a.dview.set(b.subarray(0,d),c),a.dview.set(b.subarray(d,
b.length),0)):(a.dview.set(b.slice(0,d),c),a.dview.set(b.slice(d,b.length),0));a.in_byte=k*a.dview.BYTES_PER_ELEMENT}else a.dview.set(b,c),a.in_byte=d*a.dview.BYTES_PER_ELEMENT%a.buf.byteLength;a.data_free-=b.length;if(a.onwritelisteners)for(b=0;b<a.onwritelisteners.length;b++)if(e)a.onwritelisteners[b]();else window.setTimeout(a.onwritelisteners[b],0)};a.pavail=function(a){return a.dview.length-a.data_free};a.grabx=function(a,b,c,d){var k=a.dview.length-a.data_free;void 0===d&&(d=0);if(!c)c=Math.min(b.length-
d,k);else if(c>b.length-d)throw"m.grabx : nget larger then available buffer space";if(0>c)throw"m.grabx : nget cannot be negative";if(c>k)return 0;var k=a.out_byte/a.dview.BYTES_PER_ELEMENT,m=k+c;if(m>=a.dview.length){var C=a.dview.length-k,m=m-a.dview.length;b.set(a.dview.subarray(k,a.dview.length),d);b.set(a.dview.subarray(0,m),d+C)}else b.set(a.dview.subarray(k,m),d);a.out_byte=m*a.dview.BYTES_PER_ELEMENT%a.buf.byteLength;a.data_free+=c;return c};a.addPipeWriteListener=function(a,b){a.onwritelisteners||
(a.onwritelisteners=[]);-1===a.onwritelisteners.indexOf(b)&&a.onwritelisteners.push(b)};a.units_name=function(a){a=d[a];return a[0]+" ("+a[1]+")"};a.trim_name=function(a){var b=a.indexOf("]");-1===b&&(b=a.indexOf("/"));-1===b&&(b=a.indexOf(":"));var c=a.substr(b+1,a.length).indexOf(".");0>c&&(c=a.length-b);return a.substr(b+1,b+c+1)};a.label=function(b,c){var e=["Unknown","U"];"string"===typeof b?e=[b,null]:Array.isArray(b)?e=b:(e=d[b],void 0===e&&(e=["Unknown","U"]));var x=a.mult_prefix(c);return e[1]?
e[0]+" ("+x+e[1]+")":e[0]};a.bound=function(a,b,c){return a<b?b:a>c?c:a};a.touch_distance=function(a,b){var c=a.pageX-b.pageX,d=a.pageY-b.pageY;return Math.sqrt(c*c+d*d)};a.mult_prefix=function(a){var b="?";1==a?b="":10==a?b="da":0.1==a?b="d":100==a?b="h":0.01==a?b="c":1E3==a?b="K":0.001==a?b="m":1E6==a?b="M":1E-6==a?b="u":1E9==a?b="G":1E-9==a?b="n":1E12==a?b="T":1E-12==a&&(b="p");return b};var c="F";a.vstype=function(a){c=a;"D"===c||"L"===c||"F"===c||"I"===c||"B"===c||alert("Unsupported vector type")};
a.log10=function(a,b){void 0===b&&(b=1E-20);return Math.log(Math.max(a,b))/Math.log(10)};a.vlog10=function(a,b,c){void 0===b&&(b=1E-20);void 0===c&&(c=a);for(var d=0;d<a.length&&!(c.length<=d);d++)c[d]=Math.log(Math.max(a[d],b))/Math.log(10)};a.vlogscale=function(a,b,c,d){void 0===b&&(b=1E-20);void 0===c&&(c=1);void 0===d&&(d=a);for(var k=0;k<a.length&&!(d.length<=k);k++)d[k]=Math.log(Math.abs(Math.max(a[k],b)))/Math.log(10),d[k]*=c};a.cvmag2logscale=function(a,b,c,d){void 0===b&&(b=1E-20);void 0===
c&&(c=1);void 0===d&&(d=a);for(var k=0,m=0;m<d.length;m++){k=2*m+1;if(k>=a.length)break;d[m]=a[k-1]*a[k-1]+a[k]*a[k];d[m]=Math.log(Math.abs(Math.max(d[m],b)))/Math.log(10);d[m]*=c}};a.vsmul=function(a,b,c,d){void 0===c&&(c=a);void 0===d&&(d=c.length);d=Math.min(c.length,d);d=Math.min(a.length,d);for(var k=0;k<d&&!(c.length<=k);k++)c[k]=a[k]*b};a.vmxmn=function(a,b){var c=a[0],d=a[0],k=0,m=0;b=Math.min(b,a.length);for(var C=0;C<b;C++)a[C]>c&&(c=a[C],k=C),a[C]<d&&(d=a[C],m=C);return{smax:c,smin:d,imax:k,
imin:m}};a.vmov=function(a,b,c,d,k){void 0===k&&(k=a.length);k=Math.min(a.length,k);for(var m=0;m<k;m++){var C=m*b,G=m*d;if(C>=a.length)break;if(G>=c.length)break;c[G]=a[C]}};a.vfill=function(a,b,c){void 0===c&&(c=a.length);c=Math.min(a.length,c);for(var d=0;d<c;d++)a[d]=b};a.vabs=function(a,b,c){void 0===c&&(c=a.length);void 0===b&&(b=a);for(var d=0;d<c;d++)b[d]=Math.abs(a[d])};a.cvmag=function(a,b,c){void 0===c&&(c=b.length);c=Math.min(b.length,c);for(var d=0;d<c;d++){var k=2*d+1;if(k>=a.length)break;
b[d]=Math.sqrt(a[k-1]*a[k-1]+a[k]*a[k])}};a.cvmag2=function(a,b,c){void 0===c&&(c=b.length);c=Math.min(b.length,c);for(var d=0,k=0;k<c;k++){d=2*k+1;if(d>=a.length)break;b[k]=a[d-1]*a[d-1]+a[d]*a[d]}};a.cvpha=function(a,b,c){void 0===c&&(c=b.length);c=Math.min(b.length,c);for(var d=0,k=0,m=d=0;m<c;m++){d=2*m+1;if(d>=a.length)break;k=a[d-1];d=a[d];0===k&&0===d&&(k=1);b[m]=Math.atan2(d,k)}};a.cvphad=function(a,b,c){void 0===c&&(c=b.length);c=Math.min(b.length,c);for(var d=0,k=0,m=d=0;m<c;m++){d=2*m+
1;if(d>=a.length)break;k=a[d-1];d=a[d];0===k&&0===d&&(k=1);b[m]=Math.atan2(d,k)*(180/Math.PI)}};a.trunc=function(a){return a-a%1};a.sign=function(a,b){return 0<=b?Math.abs(a):-Math.abs(a)};a.sec2tod=function(a,b){var c="",c=Date.UTC(1950,0,1);Date.UTC(1949,11,31);var d=new Date,d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0);0<=a?86400>a?(c=d.getTime()+1E3*a,d=new Date(c),c=k(d.getHours())+":"+k(d.getMinutes())+":"+k(d.getSeconds())):86400===a?c="24:00:00":31536E3>a?(c=a/86400,c=[0<c?
Math.floor(c):Math.ceil(c)],d=new Date(1E3*a+d.getTime()),c=c.toString()+"::"+k(d.getHours())+":"+k(d.getMinutes())+":"+k(d.getSeconds())):(c=Math.floor(1E3*a)+c,d=new Date(c),c=d.getUTCFullYear()+":"+k(d.getUTCMonth()+1)+":"+k(d.getUTCDate())+"::"+k(d.getUTCHours())+":"+k(d.getUTCMinutes())+":"+k(d.getUTCSeconds())):-31536E3<a?(c=a/86400,c=0>=c?Math.ceil(c):Math.floor(c),d=new Date(Math.abs(1E3*a)+d.getTime()),c=0===c?"-0":c.toString(),c=c+"::"+k(d.getHours())+":"+k(d.getMinutes())+":"+k(d.getSeconds())):
(c=Math.floor(1E3*a)+c,d=new Date(c),c=d.getUTCFullYear()+":"+k(d.getUTCMonth()+1)+":"+k(d.getUTCDate())+"::"+k(d.getUTCHours())+":"+k(d.getUTCMinutes())+":"+k(d.getUTCSeconds()));c=0===a%1?c+".000000":c+("."+Math.abs(a%1).toPrecision(6).slice(2,8));if(b){var d=c.indexOf("."),m=-1;-1!==d&&(m=c.substr(d,c.length).indexOf("0"));-1!==m&&(c=c.substr(0,d+m))}return c};a.sec2tspec=function(b,c,d){c=c||"";if(0<=b&&86400>=b)return a.sec2tod(b,d);b%=86400;return"delta"!==c&&0>=b?a.sec2tod(b+86400,d):"delta"===
c&&0>=b?"-"+a.sec2tod(-1*b,d):a.sec2tod(b,d)};a.sec2tod_j1970=function(a){var b="";0<=a&&86400>a?(b=new Date(1E3*a),b=k(b.getHours())+":"+k(b.getMinutes())+":"+k(b.getSeconds())):0>a&&-31536E3<a?(b=new Date(1E3*a),b=(a/86400*-1).toString()+"::"+k(b.getHours())+":"+k(b.getMinutes())+":"+k(b.getSeconds())):(b=new Date(1E3*(a-631152E3)),b=b.getFullYear()+":"+k(b.getMonth())+":"+k(b.getDate())+"::"+k(b.getHours())+":"+k(b.getMinutes())+":"+k(b.getSeconds()));0!==a%1&&(b+="."+(a%1).toPrecision(6).slice(2,
8));return b};a.j1970toj1950=function(a){return void 0!==a.getTime?a.getTime()/1E3+631152E3:a+631152E3};a.j1950toj1970=function(a){return a-631152E3};a.throttle=function(a,b){var c=(new Date).getTime();return function(){var d=(new Date).getTime();d-c>=a&&(c=d,b.apply(null,arguments))}};Q.exports=a})()},{"./bluefile":2,loglevel:10}],5:[function(T,Q,$){(function(a){function k(a){a=new Uint8Array(a);if(U)return String.fromCharCode.apply(null,a);for(var l="",B=0;B<a.length;B++)l+=String.fromCharCode(a[B]);
return l}function m(a){return 0<=a&&31>a?1<<a:m[a]||(m[a]=Math.pow(2,a))}function b(a,l,B,b){var p=[];new DataView(a,l,B);if("miINT8"===b)a=new Int8Array(a,l,B);else if("miUINT8"===b)a=new Uint8Array(a,l,B);else if("miINT16"===b)a=new Int16Array(a,l,B);else if("miUINT16"===b)a=new Uint16Array(a,l,B);else if("miINT32"===b)a=new Int32Array(a,l,B);else if("miUINT32"===b)a=new Uint32Array(a,l,B);else if("miDOUBLE"===b)a=new Float64Array(a,l,B);else{window.console.warn("Array data type not supported yet.");
return}a.forEach(function(a){p.push(a)});return p}function d(a,l,B,b){var p;switch(l){case "miINT8":p=a.getInt8(B,b);break;case "miUINT8":p=a.getInt8(B,b);break;case "miINT16":p=a.getInt16(B,b);break;case "miUINT16":p=a.getUint16(B,b);break;case "miINT32":p=a.getInt32(B,b);break;case "miUINT32":p=a.getUint32(B,b);break;case "miSINGLE":p=a.getFloat32(B,b);break;case "miDOUBLE":p=a.getFloat64(B,b);break;case "miINT64":var c;l=Math.pow(2,53);b?(c=4,p=0):(c=0,p=4);c=a.getInt32(B+c,b);a=a.getInt32(B+p,
b)+m(32)*c;a>=l?(window.console.info("Int is bigger than JS can represent."),p=Infinity):p=a;break;default:window.console.warn(l+" not supported at thsi time")}return p}function c(a,l){this.file_name=this.file=null;this.buf=a;if(null!=this.buf){var B=new DataView(this.buf);this.headerStr=k(this.buf.slice(x-1,w));this.datarep=k(this.buf.slice(z-1,H));var b="IM"===this.datarep,p="IM"===this.datarep;this.headerList=this.headerStr.split(",").map(function(a){return a.trim()});this.matfile=this.headerList[0];
this.platform=this.headerList[1];this.createdOn=this.headerList[2];this.subsystemOffset=k(this.buf.slice(I-1,C));this.version=B.getUint16(G-1,b);this.versionName=aa[this.version];this.dataType=B.getUint32(J-1,b);this.dataTypeName=Z[this.dataType].name;this.arraySize=B.getUint32(S-1,b);var c=da+1,b=B.getUint32(c-1,b),h=Z[b].name,b=Z[b].size,c=c+4;d(B,h,c-1,p);c+=b;d(B,h,c-1,p);var c=c+b+b,t=B.getUint32(c-1,p),c=c+4,h=Z[t].name,t=Z[t].size;B.getUint32(c-1,p);var c=c+4,n=d(B,h,c-1,p),c=c+t;1<n&&window.console.warn("Only 1D arrays are currently supported.");
d(B,h,c-1,p);c+=b;t=B.getUint32(c-1,p);c+=4;b=0;h=!1;15<t&&(t&=255,h=!0,b=B.getUint16(c-5,p));t=Z[t].name;h||(b=d(B,t,c-1,p),c+=4);k(this.buf.slice(c-1,c+b-1));c+=b+(h?(4-b%4)%4:(8-b%8)%8);this.setData(this.buf,B,c,p)}}function f(a){var l=document.createElement("a");l.href=a;for(var B=l.protocol.replace(":",""),b=l.hostname,c=l.port,d=l.search,h={},t=l.search.replace(/^\?/,"").split("&"),n=t.length,v=0,e;v<n;v++)t[v]&&(e=t[v].split("="),h[e[0]]=e[1]);return{source:a,protocol:B,host:b,port:c,query:d,
params:h,file:(l.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:l.hash.replace("#",""),path:l.pathname.replace(/^([^\/])/,"/$1"),relative:(l.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:l.pathname.replace(/^\//,"").split("/")}}function r(a,l,B){B=B||1024;var b=0,c=new ArrayBuffer(a.length),d=new Uint8Array(c),h=function(){for(var t=b+B;b<t;b++)d[b]=a.charCodeAt(b)&255;b>=a.length?l(c):setTimeout(h,0)};setTimeout(h,0)}function e(a){this.options=a}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);
var x=1,w=116,I=117,C=124,G=125,z=127,H=128,J=129,S=133,da=136;(function(){var a=new ArrayBuffer(4),l=new Uint32Array(a),a=new Uint8Array(a);l[0]=3735928559;if(239===a[0])return"LE";if(222===a[0])return"BE";throw Error("unknown endianness");})();var aa={256:"MAT-file"},Z={1:{name:"miINT8",size:1},2:{name:"miUINT8",size:1},3:{name:"miINT16",size:2},4:{name:"miUINT16",size:2},5:{name:"miINT32",size:4},6:{name:"miUINT32",size:4},7:{name:"miSINGLE",size:4},9:{name:"miDOUBLE",size:8},12:{name:"miINT64",
size:8},13:{name:"miUINT64",size:8},14:{name:"miMATRIX",size:null},15:{name:"miCOMPRESSED",size:null},16:{name:"miUTF8",size:null},17:{name:"miUTF16",size:null},18:{name:"miUTF32",size:null}},U=!0;try{var y=new Uint8Array(new ArrayBuffer(4));y[0]=66;y[1]=76;y[2]=85;y[3]=69;"BLUE"!==String.fromCharCode.apply(null,y)&&(U=!1)}catch(M){U=!1}c.prototype={setData:function(a,l,B,N){var c,d=l.getUint32(B-1,N),h=!1;15<d?(d&=255,h=!0,c=l.getUint16(B+1,2,N)):B+=4;var t=Z[d].name,d=Z[d].size;h||(c=l.getUint32(B-
1,N));this.dview=b(a,B+4-1,c/d,t)}};e.prototype={readheader:function(a,l){var B=this,b=new FileReader,p=a.webkitSlice(0,116);b.onloadend=function(a){return function(p){p.target.error?l(null):(p=new c(b.result,B.options),p.file=a,l(p))}}(a);b.readAsArrayBuffer(p)},read:function(a,l){var B=this,b=new FileReader;b.onloadend=function(a){return function(d){d.target.error?l(null):(d=new c(b.result,B.options),d.file=a,d.file_name=a.name,l(d))}}(a);b.readAsArrayBuffer(a)},read_http:function(a,l){var B=this,
b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";b.overrideMimeType("text/plain; charset=x-user-defined");b.onload=function(p){if(4!==b.readyState||200!==b.status&&0!==b.status)l(null);else if(p=null,b.response){p=b.response;p=new c(p,B.options);f(a);var d=f(a);p.file_name=d.file;l(p)}else b.responseText&&r(b.responseText,function(b){b=new c(b,B.options);f(a);var N=f(a);b.file_name=N.file;l(b)})};b.onerror=function(a){l(null)};b.send(null)}};a.MatHeader=a.MatHeader||c;a.MatFileReader=
a.MatFileReader||e})(this)},{}],6:[function(T,Q,$){(function(){function a(){}function k(){this.ymax=this.ymin=this.xmax=this.xmin=this.yl=this.xl=this.yo=this.xo=0;this.mode=this.func=void 0}function m(l){this.root=l;this.parent=document.createElement("div");this.parent.style.position="relative";this.parent.width=l.clientWidth;this.parent.height=l.clientHeight;l.appendChild(this.parent);this.canvas=document.createElement("canvas");this.canvas.style.position="absolute";this.canvas.style.top="0px";
this.canvas.style.left="0px";this.canvas.width=l.clientWidth;this.canvas.height=l.clientHeight;this.parent.appendChild(this.canvas);this.active_canvas=this.canvas;this.wid_canvas=document.createElement("canvas");this.wid_canvas.style.position="absolute";this.wid_canvas.style.top="0px";this.wid_canvas.style.left="0px";this.wid_canvas.style.zIndex=1;this.wid_canvas.width=l.clientWidth;this.wid_canvas.height=l.clientHeight;this.parent.appendChild(this.wid_canvas);this.font=void 0;this.font_family="Courier New, monospace";
this.level=this.text_h=this.text_w=0;this.width=this.parent.width;this.height=this.parent.height;this.ymrk=this.xmrk=this.ypos=this.xpos=0;this.origin=1;this.stk=[new a.STKSTRUCT];a.setbgfg(this,"black","white");this.warpbox=this.event_cb=void 0;this.rmode=!1;this.linewidth=1;this.style=void 0;this.xi=!1;this.l=this.state_mask=this.button_press=this.button_release=0;this.r=this.width;this.t=0;this.b=this.height;this.scrollbar_x=new a.SCROLLBAR;this.scrollbar_y=new a.SCROLLBAR;this.prompt=void 0;this.pixel=
[];this._renderCanvas=document.createElement("canvas")}function b(a,B,b){var c=!1,d=!1;a>=B&&(c=!0);a<=b&&(d=!0);return!0===c&&!0===d?!0:!1}function d(a,B,b,c,d,h,t){d<=b?t>b&&0<(c-B)*(t-b)-(h-B)*(d-b)&&(a+=1):t<=b&&0>(c-B)*(t-b)-(h-B)*(d-b)&&(a-=1);return a}function c(l,B){if(!B.animationFrameHandle){var b=Math.floor((l.canvas.height-70)/(1.5*l.text_h));M.n_show=b>=B.items.length?B.items.length:b;B.animationFrameHandle=requestAnimFrame(a.withWidgetLayer(l,function(){a.erase_window(l);B.animationFrameHandle=
void 0;var b=1.5*l.text_h;B.x=Math.max(B.x,0);B.y=Math.max(B.y,0);B.x=Math.min(B.x,l.width-B.w);B.y=Math.min(B.y,l.height-B.h);var c=B.x+M.GBorder+Math.max(0,M.sidelab),N=B.y+M.GBorder+M.toplab*(b+M.GBorder),d=B.w-2*M.GBorder-Math.abs(M.sidelab);a.widgetbox(l,B.x,B.y,B.w,B.h,c,N,d,B.h-2*M.GBorder-M.toplab*(b+M.GBorder),B.title);var n=l.wid_canvas.getContext("2d");n.lineWidth=1;n.strokeStyle=l.xwbs;n.beginPath();n.moveTo(c,N-4+0.5);n.lineTo(c+d-1,N-4+0.5);n.stroke();n.strokeStyle=l.xwts;n.beginPath();
n.moveTo(c,N-3+0.5);n.lineTo(c+d-1,N-3+0.5);n.stroke();var v=B.queue[0],e=B.queue[M.n_show-1];if(0===e){for(e=0;e<M.n_show;e++)B.queue[e]=e;v=B.queue[0];e=B.queue[M.n_show-1]}for(var g=0;v<=e;v++){var u=B.items[v],q=N+b*g,g=g+1;"separator"===u.style?(n.fillStyle=l.xwbs,n.fillRect(c,q,d,b),n.beginPath(),n.moveTo(c,q+0.5),n.lineTo(c+d,q+0.5),n.stroke(),n.textBaseline="middle",n.textAlign="left",n.fillStyle=l.xwfg,n.fillText(" "+u.text+" ",c+2*l.text_w,q+b/2)):(a.LEGACY_RENDER?(n.fillStyle=l.xwlo,n.fillRect(c,
q,d,b),n.beginPath(),n.moveTo(c,q+0.5),n.lineTo(c+d,q+0.5),n.stroke(),u.selected&&a.shadowbox(l,c-1,q,d+2,b,1,2,"",0.75)):(n.save(),n.globalAlpha=0.75,n.fillStyle=u.selected?l.xwts:l.xwlo,n.fillRect(c,q,d,b),n.restore(),n.strokeStyle=l.bg,n.beginPath(),n.moveTo(c,q+0.5),n.lineTo(c+d,q+0.5),n.stroke()),n.textBaseline="middle",n.textAlign="left",n.fillStyle=l.xwfg,"checkbox"===u.style?(n.fillText(" "+u.text+" ",c+2*l.text_w,q+b/2),n.strokeStyle=l.xwfg,n.strokeRect(c+1+l.text_w,q+(b-l.text_w)/2,l.text_w,
l.text_w),u.checked&&(n.beginPath(),n.moveTo(c+1+l.text_w,q+(b-l.text_w)/2),n.lineTo(c+1+l.text_w+l.text_w,q+(b-l.text_w)/2+l.text_w),n.stroke(),n.beginPath(),n.moveTo(c+1+l.text_w+l.text_w,q+(b-l.text_w)/2),n.lineTo(c+1+l.text_w,q+(b-l.text_w)/2+l.text_w),n.stroke())):(n.fillText(" "+u.text+" ",c,q+b/2),u.checked&&(n.beginPath(),n.moveTo(c+1,q+l.text_h/4),n.lineTo(c+1+l.text_w-2,q+l.text_h/4+l.text_h/2),n.lineTo(c+1,q+l.text_h/4+l.text_h),n.lineTo(c+1,q+l.text_h/4),n.fill())))}}))}}function f(l,
b){a.onWidgetLayer(l,function(){a.erase_window(l)});l.menu=void 0;l.widget=null;for(var c=0;c<b.items.length;c++){var p=b.items[c];if(p.selected){p.handler?p.handler():p.menu&&(c=p.menu,"function"===typeof p.menu&&(c=p.menu()),c.finalize=b.finalize,a.menu(l,c));break}}!l.menu&&b.finalize&&b.finalize()}function r(l,b){a.onWidgetLayer(l,function(){a.erase_window(l)});l.menu=void 0;l.widget=null;!l.menu&&b.finalize&&b.finalize()}function e(a,b,c){var p=!0,d;d=b/a;0<a?d>c.tL?p=!1:d>c.tE&&(c.tE=d):0>a?
d<c.tE?p=!1:d<c.tL&&(c.tL=d):0<b&&(p=!1);return p}function x(a,b,c,p,d,h,t,n){0>b&&(b=0);0>c&&(c=0);0>p&&(p=0);0>d&&(d=0);n&&(a.lineWidth=n);t&&(a.strokeStyle=t);1===a.lineWidth%2&&(b===p&&(p=b=Math.floor(b)+0.5),c===d&&(d=c=Math.floor(c)+0.5));if(!h||!h.mode)a.beginPath(),a.moveTo(b,c),a.lineTo(p,d),a.stroke(),a.beginPath();else if("dashed"===h.mode){if(Z.dashOn(a,h.on,h.off))a.beginPath(),a.moveTo(b,c),a.lineTo(p,d),a.stroke(),Z.dashOff(a);else if(a.beginPath(),c===d)for(d=Math.min(b,p),p=Math.max(b,
p);d<p;)a.moveTo(d,c),a.lineTo(d+h.on,c),a.stroke(),d+=h.on+h.off;else if(b===p)for(p=Math.min(c,d),d=Math.max(c,d);p<d;)a.moveTo(b,p),a.lineTo(b,p+h.on),a.stroke(),p+=h.on+h.off;else throw"Only horizontal or vertical dashed lines are supported";a.beginPath()}else if("xor"===h.mode)if("undefined"===typeof Uint8ClampedArray)a.beginPath(),a.moveTo(b,c),a.lineTo(p,d),a.stroke(),a.beginPath();else{t=h=0;if(c===d)h=Math.abs(p-b),t=n,b=Math.min(b,p);else if(b===p)h=n,t=Math.abs(d-c),c=Math.min(c,d);else throw"Only horizontal and vertical lines can be drawn with XOR";
if(0!==h&&0!==t){b=Math.floor(b);c=Math.floor(c);p=a.getImageData(b,c,h,t);d=p.data;h=0;for(n=d.length;h<n;h+=4)d[h]=255-d[h],d[h+1]=255-d[h+1],d[h+2]=255-d[h+2],d[h+3]=255;a.putImageData(p,b,c);a.clearRect(0,0,1,1)}}}function w(a,b,c,d,F){I(a,b,F);c&&(a.strokeStyle=c);d&&(a.fillStyle=d);a.fill();a.closePath()}function I(a,b,c){if(!(1>b.length)){var d=b[0].x,F=b[0].y;a.lineWidth=c?c:1;a.beginPath();a.moveTo(d,F);for(c=0;c<b.length;c++)d=b[c].x,F=b[c].y,a.lineTo(d,F)}}function C(a){return Math.floor(Math.round(a/
100*255))}function G(a,b,c){return"rgb("+Math.round(a)+", "+Math.round(b)+", "+Math.round(c)+")"}function z(a,b){var c,d;if(".000000"===a.substring(5,8))c=4;else for(c=a.length-1;"0"===a[c];)c-=1;for(d=0;" "===a[d]&&(5<c-d+1||b);)d+=1;c=a.substring(d,c+1);-1===c.indexOf(".")&&(c+=".");return c}function H(l){l._animationFrameHandle=void 0;var b=l.warpbox;l.active_canvas.getContext("2d");if(b&&l.xpos>=b.xmin&&l.xpos<=b.xmax&&l.ypos>=b.ymin&&l.ypos<=b.ymax){b.xl=l.xpos;b.yl=l.ypos;var c=Math.min(b.xo,
b.xl),d=Math.min(b.yo,b.yl),F=Math.abs(b.xl-b.xo),h=Math.abs(b.yl-b.yo);0!==F&&0!==h&&("vertical"===b.mode?(c=l.l,F=l.r-l.l):"horizontal"===b.mode&&(d=l.t,h=l.b-l.t),a.onWidgetLayer(l,function(){a.erase_window(l);a.draw_box(l,"xor",c,d,F,h,b.style.opacity,b.style.fill_color)}))}}function J(a,b,c,d,F,h,t,n,v,e,g,u,q){void 0===e&&(e=0);void 0===g&&(g=0);void 0===u&&(u=c.width-e);void 0===q&&(q=c.height-g);a._renderCanvas.width=c.width;a._renderCanvas.height=c.height;for(var s=a._renderCanvas.getContext("2d"),
f=s.createImageData(a._renderCanvas.width,a._renderCanvas.height),k=new Uint8Array(c),r=0;r<c.height;++r)for(var m=0;m<c.width;++m){var z=4*(r*c.width+m);f.data[z]=k[z];f.data[z+1]=k[z+1];f.data[z+2]=k[z+2];f.data[z+3]=255}s.putImageData(f,0,0);b.save();b.globalAlpha=d;F||(b.imageSmoothingEnabled=!1,b.mozImageSmoothingEnabled=!1,b.webkitImageSmoothingEnabled=!1);b.drawImage(a._renderCanvas,e,g,u,q,h,t,n,v);b.restore()}function S(a,b,c,d,F,h,t,n,v,e,g,u,q){void 0===e&&(e=0);void 0===g&&(g=0);void 0===
u&&(u=c.width-e);void 0===q&&(q=c.height-g);if(32768>c.width&&32768>c.height){a._renderCanvas.width=c.width;a._renderCanvas.height=c.height;var s=a._renderCanvas.getContext("2d"),f=s.createImageData(a._renderCanvas.width,a._renderCanvas.height);c=new Uint8ClampedArray(c);f.data.set(c);s.putImageData(f,0,0)}else 32768>u&&32768>q?(a._renderCanvas.width=u,a._renderCanvas.height=q,da(a._renderCanvas,c,e,g,u,q)):(a._renderCanvas.width=Math.min(2*n,c.width),a._renderCanvas.height=Math.min(2*v,c.height),
da(a._renderCanvas,c,e,g,u,q),u=a._renderCanvas.width,q=a._renderCanvas.height),g=e=0;b.save();b.globalAlpha=d;F||(b.imageSmoothingEnabled=!1,b.mozImageSmoothingEnabled=!1,b.webkitImageSmoothingEnabled=!1);b.drawImage(a._renderCanvas,e,g,u,q,h,t,n,v);b.restore()}function da(a,b,c,d,F,h){var t=new Uint32Array(b);F||(F=b.width);h||(h=b.height);c||(c=0);d||(d=0);var n=a.width,v=a.height;a=a.getContext("2d");var e=a.createImageData(n,v),g=new ArrayBuffer(e.data.length),u=new Uint8ClampedArray(g),g=new Uint32Array(g);
F/=n;h/=v;for(var q=0,s=0,v=q=0;v<g.length;v++)q=Math.round(Math.floor(v%n)*F)+c,s=Math.round(Math.floor(v/n)*h)+d,q=Math.floor(s*b.width+q),g[v]=t[q];e.data.set(u);a.putImageData(e,0,0)}var aa=T("tinycolor2"),Z=T("./common"),U=T("./CanvasInput"),y=T("./m");a.XW_INIT=-3;a.XW_DRAW=1;a.XW_EVENT=2;a.XW_UPDATE=3;a.XW_COMMAND=5;a.SB_EXPAND=1;a.SB_SHRINK=2;a.SB_FULL=3;a.SB_STEPINC=4;a.SB_STEPDEC=5;a.SB_PAGEINC=6;a.SB_PAGEDEC=7;a.SB_DRAG=8;a.SB_WHEELUP=9;a.SB_WHEELDOWN=10;a.L_ArrowLeft=1001;a.L_ArrowRight=
1002;a.L_ArrowUp=1003;a.L_ArrowDown=1004;a.L_dashed=801;a.GBorder=3;a.L_RModeOff=900;a.L_RModeOn=901;a.L_PixelSymbol=1;a.L_CircleSymbol=2;a.L_SquareSymbol=3;a.L_PlusSymbol=4;a.L_XSymbol=5;a.L_TriangleSymbol=6;a.L_ITriangleSymbol=7;a.L_HLineSymbol=8;a.L_VLineSymbol=9;a.LEGACY_RENDER=!1;a.STKSTRUCT=function(){this.y2=this.x2=this.y1=this.x1=this.yscl=this.xscl=this.ymax=this.ymin=this.xmax=this.xmin=0};a.SCROLLBAR=function(){this.repeat_count=this.origin=this.mxevent=this.arrow=this.a2=this.a1=this.soff=
this.swmin=this.sw=this.s1=this.h=this.w=this.y=this.x=this.repeat_pause=this.initial_pause=this.dragoutline=this.scale=this.page=this.step=this.trange=this.tmin=this.srange=this.smin=this.action=this.flag=null};a.open=function(l){l=new m(l);l.wid_canvas.oncontextmenu=function(a){a.preventDefault();return!1};this._ctx=l.active_canvas.getContext("2d");l.onmousemove=function(l){return function(b){var c=b.target.getBoundingClientRect();l.x=b.x||b.clientX;l.y=b.y||b.clientY;l.xpos=void 0===b.offsetX?
b.pageX-c.left-window.scrollX:b.offsetX;l.ypos=void 0===b.offsetX?b.pageY-c.top-window.scrollY:b.offsetY;l.warpbox&&(l.warpbox.style=(b.ctrlKey||b.metaKey)&&void 0!==l.warpbox.alt_style?l.warpbox.alt_style:l.warpbox.def_style,a.redraw_warpbox(l));a.widget_callback(l,b)}}(l);l.onmouseup=function(l){return function(b){if(l.warpbox){a.onWidgetLayer(l,function(){a.erase_window(l)});var c=l.warpbox;l.warpbox=void 0;if((1===b.which||3===b.which)&&c.func){var d=c.xo,h=c.yo,t=c.xl,n=c.yl;"vertical"===c.mode?
(d=l.l,t=l.r):"horizontal"===c.mode&&(h=l.t,n=l.b);c.func(b,d,h,t,n,c.style.return_value,c.mode)}}a.widget_callback(l,b)}}(l);l.onmousedown=function(l){return function(b){b.preventDefault();a.widget_callback(l,b);return!1}}(l);l.onkeydown=function(l){return function(b){if(l.warpbox){var c=Z.getKeyCode(b);17!==c&&224!==c&&91!==c&&93!==c||l.warpbox.style===l.warpbox.alt_style||(l.warpbox.style=l.warpbox.alt_style,a.redraw_warpbox(l))}a.widget_callback(l,b)}}(l);l.onkeyup=function(l){return function(b){l.warpbox&&
(b=Z.getKeyCode(b),17!==b&&224!==b&&91!==b&&93!==b||l.warpbox.style===l.warpbox.def_style||(l.warpbox.style=l.warpbox.def_style,a.redraw_warpbox(l)))}}(l);l.ontouchend=function(a){return function(l){a.onmouseup({which:1})}}(l);l.ontouchmove=function(l){return function(b){var c=l.canvas,d=0,h=0;if(void 0!==c.offsetParent){do d+=c.offsetLeft,h+=c.offsetTop;while(c=c.offsetParent)}l.xpos=b.targetTouches[0].pageX-d;l.ypos=b.targetTouches[0].pageY-h;a.redraw_warpbox(l)}}(l);a.enableListeners(l);return l};
a.enableListeners=function(l){a.addEventListener(l,"mousemove",l.onmousemove,!1);window.addEventListener("mouseup",l.onmouseup,!1);a.addEventListener(l,"mousedown",l.onmousedown,!1);window.addEventListener("keydown",l.onkeydown,!1);window.addEventListener("keyup",l.onkeyup,!1)};a.disableListeners=function(l){a.removeEventListener(l,"mousemove",l.onmousemove,!1);window.removeEventListener("mouseup",l.onmouseup,!1);a.removeEventListener(l,"mousedown",l.onmousedown,!1);window.removeEventListener("keydown",
l.onkeydown,!1);window.removeEventListener("keyup",l.onkeyup,!1)};a.addEventListener=function(a,b,c,d){return a.wid_canvas.addEventListener(b,c,d)};a.removeEventListener=function(a,b,c,d){return a.wid_canvas.removeEventListener(b,c,d)};a.dispatchEvent=function(a,b){return a.wid_canvas.dispatchEvent(b)};a.onWidgetLayer=function(l,b){a.onCanvas(l,l.wid_canvas,b)};a.onCanvas=function(a,b,c){var d=a.active_canvas;a.active_canvas=b;try{if(c)return c()}finally{a.active_canvas=d}};a.withWidgetLayer=function(l,
b){return function(){a.onWidgetLayer(l,b)}};a.render=function(a,b){if(b){var c=a.active_canvas;c._animationFrameHandle||(c._animationFrameHandle=requestAnimFrame(function(){c._animationFrameHandle=void 0;b()}))}};a.fullscreen=function(l,b){void 0===b&&(b=!l.fullscreen);b?(l.fullscreen={position:l.root.style.position,height:l.root.style.height,width:l.root.style.width,left:l.root.style.left,top:l.root.style.top,zIndex:l.root.style.zIndex},l.root.style.position="fixed",l.root.style.height="100%",l.root.style.width=
"100%",l.root.style.left="0px",l.root.style.top="0px",l.root.style.zIndex=16777271):(l.root.style.position=l.fullscreen.position,l.root.style.height=l.fullscreen.height,l.root.style.width=l.fullscreen.width,l.root.style.left=l.fullscreen.left,l.root.style.top=l.fullscreen.top,l.root.style.zIndex=l.fullscreen.zIndex,l.fullscreen=void 0);a.checkresize(l)};a.checkresize=function(a){var b=a.canvas;return b.height!==a.root.clientHeight||b.width!==a.root.clientWidth?(a.height=a.root.clientHeight,a.width=
a.root.clientWidth,a.canvas.height=a.height,a.canvas.width=a.width,a.wid_canvas.height=a.height,a.wid_canvas.width=a.width,!0):!1};a.invertbgfg=function(l){a.setbgfg(l,l.fg,l.bg,!l.xi)};a.mixcolor=function(a,b,c){a=aa(a).toRgb();b=aa(b).toRgb();var d=1-c;b.r=a.r*d+b.r*c;b.g=a.g*d+b.g*c;b.b=a.b*d+b.b*c;return aa(b).toHexString(!0)};a.linear_gradient=function(a,b,c,d,F,h){var t=a.active_canvas.getContext("2d");a=1/h.length;b=t.createLinearGradient(b,c,d,F);for(c=0;c<h.length-1;c++)b.addColorStop(a*
c,h[c]);b.addColorStop(1,h[h.length-1]);return b};a.setbgfg=function(l,b,c,d){l.bg=aa(b).toHexString();l.fg=aa(c).toHexString();l.xi=aa(d).toHexString();aa.equals(l.bg,"black")&&aa.equals(l.fg,"white")?(l.xwfg=l.fg,l.xwbg="rgb(35%,35%,30%)",l.xwts="rgb(60%,60%,55%)",l.xwbs="rgb(25%,25%,20%)",l.xwms=a.mixcolor(l.xwts,l.xwbs,0.5),l.xwlo="rgb(15%,15%,10%)",l.hi=l.xwts):aa.equals(l.bg,"white")&&aa.equals(l.fg,"black")?(l.xwfg=l.fg,l.xwbg="rgb(60%,60%,55%)",l.xwts="rgb(80%,80%,75%)",l.xwbs="rgb(40%,40%,35%)",
l.xwms=a.mixcolor(l.xwts,l.xwbs,0.5),l.xwlo="rgb(70%,70%,65%)",l.hi=l.xwbs):(b=aa(l.bg).toRgb(),127.5<Math.sqrt(0.299*b.r*b.r+0.587*b.g*b.g+0.114*b.b*b.b)?(l.xwfg="black",l.xwbg="rgb(60%,60%,55%)",l.xwts="rgb(80%,80%,75%)",l.xwbs="rgb(40%,40%,35%)",l.xwms=a.mixcolor(l.xwts,l.xwbs,0.5),l.xwlo="rgb(70%,70%,65%)",l.hi=l.xwts):(l.xwfg="white",l.xwbg="rgb(35%,35%,30%)",l.xwts="rgb(60%,60%,55%)",l.xwbs="rgb(25%,25%,20%)",l.xwms=a.mixcolor(l.xwts,l.xwbs,0.5),l.xwlo="rgb(15%,15%,10%)",l.hi=l.xwbs))};a.settheme=
function(a,b){a.bg=b.bg;a.fg=b.fg;a.xi=b.xi;a.xwfg=b.xwfg;a.xwbg=b.xwbg;a.xwts=b.xwts;a.xwbs=b.xwbs;a.xwlo=b.xwlo;a.hi=b.hi};a.close=function(a){var b=a.wid_canvas;b.removeEventListener("mousemove",a.onmousemove,!1);b.removeEventListener("mouseup",a.onmouseup,!1);a.parent&&a.parent.parentNode&&a.parent.parentNode.removeChild(a.parent)};a.scrollbar=function(b,c,d,p,F,h,t,n,v,e,g){var u,q,s,f=0,k=new a.SCROLLBAR;u=void 0!==c.flag?c.flag:c;q=Math.abs(u);s=h-F>p-d?3>b.origin?2:4:b.origin&2?3:1;10>q&&
(c=k);if(10>q||0===c.action)a.scroll(b,c,a.XW_INIT,void 0,g),c.flag=u,c.initial_pause=-1,a.scroll_loc(c,d,F,p-d+1,h-F+1,s,g);c.srange=t.pe-t.ps;switch(q){case 0:d=p=F=1;break;case 1:case 11:d=p=0.9*c.srange;F=2;break;case 2:case 12:d=0.1*c.srange;p=9*d;F=2;break;case 3:case 13:d=1;p=c.srange-1;F=1;break;default:return 0}a.scroll_vals(c,t.ps,c.srange,n,v-n,d,p,F,g);0===u?a.scroll(b,c,a.XW_DRAW,void 0,void 0):a.scroll(b,c,a.XW_EVENT,e,g)&&(t.ps!==c.smin&&(t.ps=c.smin,f+=1),t.pe!==c.smin+c.srange&&(t.pe=
c.smin+c.srange,f+=2));return f};a.scroll=function(b,c,d,p,F){var h;if(void 0===c)return!1;switch(d){case a.XW_INIT:a.scroll_loc(c,0,0,b.width,20,1,F);a.scroll_vals(c,0,10,0,100,1,10,1,F);c.flag=0;c.action=0;c.initial_pause=0.25;c.repeat_pause=0.05;c.mxevent=!0;c.repeat_count=0;break;case a.XW_EVENT:h=0;if(c.mxevent)h=b.button_release?-b.button_release:b.button_press;else if("mousedown"===p.type||"mouseup"===p.type){switch(p.which){case 1:h=1;break;case 2:h=2;break;case 3:h=3;break;case 4:h=4;break;
case 5:h=5}"mouseup"===p.type&&(h=-h)}else if("mousewheel"===p.type||"DOM-MouseScroll"===p.type)p.wheelDelta&&0<p.wheelDelta?h=4:p.wheelDelta&&0>p.wheelDelta&&(h=5);if(0===c.action){if(4===h||5===h)b.xpos=c.x;if(1!==h&&2!==h&&4!==h&&5!==h||b.xpos<c.x||b.ypos<c.y||b.xpos>c.x+c.w||b.ypos>c.y+c.h)return!1}else if(0>h){c.action=c.repeat_count=0;break}c.origin&1?(p=b.xpos-c.x,c.origin&2&&(p=c.w-p)):(p=b.ypos-c.y,2>=c.origin&&(p=c.h-p));if(0===c.action){c.repeat_count=0;var t=a.scroll_real2pix(c);c.s1=
F.s1=t.s1;c.sw=F.sw=t.sw;c.soff=F.soff=p-c.s1;if(0===c.trange)c.smin=F.smin=c.tmin,c.srange=F.srange=0;else switch(h){case 1:c.action=p>c.a1&&p<c.a2?0<c.soff?a.SB_PAGEINC:a.SB_PAGEDEC:0<c.soff?a.SB_STEPINC:a.SB_STEPDEC;break;case 4:c.action=a.SB_WHEELUP;break;case 5:c.action=a.SB_WHEELDOWN;break}}else switch(c.action){case a.SB_WHEELUP:case a.SB_WHEELDOWN:case a.SB_EXPAND:case a.SB_SHRINK:case a.SB_FULL:c.action=c.repeat_count=0}case a.XW_COMMAND:h=c.smin;p=c.srange;switch(c.action){case a.SB_STEPINC:h+=
c.step;break;case a.SB_STEPDEC:h-=c.step;break;case a.SB_PAGEINC:h+=c.page;break;case a.SB_PAGEDEC:h-=c.page;break;case a.SB_FULL:h=c.tmin;p=c.trange;break;case a.SB_EXPAND:p*=c.scale;h=0>=h&&0<=h+c.srange?h*c.scale:h-(p-c.srange)/2;break;case a.SB_SHRINK:p/=c.scale;h=0>h&&0<=h+c.srange?h+p/c.scale:0===h&&0<=h+c.srange?p/c.scale:h+(c.srange-p)/2;break;case a.SB_WHEELUP:h-=c.page;break;case a.SB_WHEELDOWN:h+=c.page}0<c.trange?(h=Math.max(c.tmin,Math.min(h,c.tmin+c.trange-p)),p=Math.min(p,c.trange)):
(h=Math.min(c.tmin,Math.max(h,c.tmin+c.trange-p)),p=Math.max(p,c.trange));c.smin===h&&c.srange===p?c.action!==a.SB_DRAG&&(c.action=c.repeat_count=0):(c.smin=F.smin=h,c.srange=F.srange=p,c.repeat_count++);d===a.XW_COMMAND&&(a.scroll(b,c,a.XW_UPDATE,void 0),c.action=0);break;case a.XW_DRAW:case a.XW_UPDATE:a.redrawScrollbar(c,b,d)}return!0};a.scroll_loc=function(b,c,d,p,F,h,t){void 0!==b&&(b.x=t.x=c,b.y=t.y=d,b.w=t.w=p,b.h=t.h=F,b.origin=t.origin=Math.max(1,Math.min(4,h)),b.origin&1?(b.a2=t.a2=b.w,
b.arrow=t.arrow=Math.min(y.trunc((b.w-y.trunc(2*a.GBorder))/3),b.h+a.GBorder)):(b.a2=t.a2=b.h,b.arrow=t.arrow=Math.min(y.trunc((b.h-y.trunc(2*a.GBorder))/3),b.w+a.GBorder)),b.a1=t.a1=b.arrow+a.GBorder,b.a2-=b.arrow+a.GBorder,t.a2-=b.arrow+a.GBorder,b.swmin=t.swmin=Math.min(10,b.a2-b.a1),b.s1=t.s1=0,b.sw=t.sw=0,b.action=t.action=0)};a.scroll_vals=function(a,b,c,d,F,h,t,n,v){void 0!==a&&(a.smin=v.smin=b,a.srange=v.srange=c,a.tmin=v.tmin=d,a.trange=v.trange=F,a.step=v.step=h,a.page=v.page=t,a.scale=
v.scale=Math.max(n,1))};a.draw_symbol=function(b,c,d,p,F,h,t){for(var n=b.active_canvas.getContext("2d"),v=0,e=0,g=0,u=!1,q=[],e=0;4>e;e++)q[e]={x:0,y:0};e="";u=0>h;v=Math.abs(h);e=2*v;n.fillStyle=c;n.strokeStyle=c;if("function"===typeof F)F(n,t,d,p);else switch(F){case a.L_CircleSymbol:n.beginPath();u?(n.arc(d,p,v,0,360),n.fill()):(n.arc(d,p,v,0,360),n.stroke());break;case a.L_SquareSymbol:u?n.fillRect(d-v,p-v,e,e):n.strokeRect(d-v,p-v,e,e);break;case a.L_PixelSymbol:n.beginPath();n.arc(d,p,1,0,
2*Math.PI,!0);n.fill();break;case a.L_ITriangleSymbol:v=-v;case a.L_TriangleSymbol:e=y.trunc(1.5*v);g=y.trunc(0.8*v);q[1].x=-g;q[1].y=e;q[2].x=2*g;q[2].y=0;q[3].x=-g;q[3].y=-e;b=[];for(e=0;4>e;e++)b[e]={x:0,y:0};u?(b[0].x=d,b[0].y=p-v,b[1].x=b[0].x+q[1].x,b[1].y=b[0].y+q[1].y,b[2].x=b[1].x+q[2].x,b[2].y=b[1].y+q[2].y,b[3].x=b[2].x+q[3].x,b[3].y=b[2].y+q[3].y,w(n,b)):(b[0].x=d,b[0].y=p-v,b[1].x=b[0].x+q[1].x,b[1].y=b[0].y+q[1].y,b[2].x=b[1].x+q[2].x,b[2].y=b[1].y+q[2].y,b[3].x=b[2].x+q[3].x,b[3].y=
b[2].y+q[3].y,I(n,b,void 0),n.stroke(),n.closePath());break;case a.L_PlusSymbol:x(n,d,p+v,d,p-v);x(n,d+v,p,d-v,p);break;case a.L_HLineSymbol:x(n,d+v,p,d-v,p);break;case a.L_VLineSymbol:x(n,d,p+v,d,p-v);break;case a.L_XSymbol:x(n,d-v,p-v,d+v,p+v);x(n,d+v,p-v,d-v,p+v);break;default:e=F,v=y.trunc(b.text_w/2),u&&n.fillText(e.substring(0,2),d-v,p+v)}};a.draw_symbols=function(b,c,d,p,e,h,t,n){for(var v=0;v<e;v++)a.draw_symbol(b,c,d[v],p[v],h,t,v+n)};a.trace=function(l,c,N,p,F,h,t,n,v,f,g){if(void 0===N||
void 0===p)throw"mx.trace requires xpoint and ypoint";void 0===t&&(t=1);void 0===n&&(n=1);void 0===v&&(v=0);void 0===f&&(f=0);void 0===g&&(g={});if(0>=F)y.log.warn("No points to draw");else if(0===n&&0===v)y.log.warn("No line or symbol to draw");else{var u;g.dashed&&(u={mode:"dashed",on:4,off:4});var q=a.origin(l.origin,4,l.stk[l.level]);if(0!==q.xscl&&0!==q.yscl){var s=q.x1,k=q.y1,r=q.xmin,m=1/q.xscl,z=q.ymin,w=1/q.yscl;g.noclip||a.clip(l,s,k,q.x2-s+1,q.y2-k+1);var H=Math.abs(q.xmax-q.xmin),V=Math.abs(q.ymax-
q.ymin),D=Math.min(q.xmin,q.xmax),K=Math.min(q.ymin,q.ymax),E=D+H,X=K+V,Y=4*Math.ceil(2*N.length),q=new Int32Array(new ArrayBuffer(Y)),Y=new Int32Array(new ArrayBuffer(Y)),A=0;if(0===n&&0!==v)for(var P=t-1;P<F;P+=t){var O=N[P],L=p[P],x=O>=D&&O<=E&&L>=K&&L<=X;x&&(q[0]=Math.round((O-r)*m)+s,Y[0]=Math.round((L-z)*w)+k,a.draw_symbol(l,c,q[0],Y[0],v,f,h+P))}if(!0===g.vertsym)for(P=t-1;P<F;P+=t)if(O=N[P],L=p[P],O>=D&&O<=E){var R=Math.round((O-r)*m)+s;a.draw_line(l,c,R,0,R,l.height);L>=K&&L<=X&&(q[0]=R,
Y[0]=Math.round((L-z)*w)+k,a.draw_symbol(l,c,q[0],Y[0],v,f,h+P))}if(!0===g.horzsym)for(P=t-1;P<F;P+=t)O=N[P],L=p[P],L>=K&&L<=X&&(R=Math.round((L-z)*w)+k,a.draw_line(l,c,0,R,l.width,R),O>=D&&O<=E&&(q[0]=Math.round((O-r)*m)+s,Y[0]=R,a.draw_symbol(l,c,q[0],Y[0],v,f,h+P)));else if(0!==n){if(g&&g.highlight){for(var R=[],ba=0;ba<g.highlight.length;ba++)if(!(g.highlight[ba].xstart>=E||g.highlight[ba].xend<=D)&&(P=Math.max(g.highlight[ba].xstart,D),O=Math.min(g.highlight[ba].xend,E),P<O)){P=Math.round((P-
r)*m)+s;O=Math.round((O-r)*m)+s;for(L=R.length-1;0<=L;L--)P<=R[L].start&&O>=R[L].end?R.splice(L,1):(P>=R[L].start&&O<=R[L].end?(R.push({start:O,end:R[L].end,color:R[L].color}),R[L].end=P):P<=R[L].start&&O>=R[L].start?R[L].start=O:P<=R[L].end&&O>=R[L].end&&(R[L].end=P),R[L].end<=R[L].start&&R.splice(L,1));R.push({start:P,end:O,color:g.highlight[ba].color})}R.push({start:s,color:c});R.sort(function(a,D){return a.start-D.start})}else R=c;var G=(l.stk[l.level].xmax+l.stk[l.level].xmin)/2,C=(l.stk[l.level].ymax+
l.stk[l.level].ymin)/2,O=N[0],L=p[0],ba=d(0,G,C,l.stk[l.level].xmin,l.stk[l.level].ymin,O,L);(x=O>=D&&O<=E&&L>=K&&L<=X)?(q[A]=Math.round((O-r)*m)+s,Y[A]=Math.round((L-z)*w)+k,A+=1,0!==v&&a.draw_symbols(l,c,q,Y,1,v,f,h)):A=0;for(var J=0,I=!1,P=t;P<=t*(F-1);P+=t)if(H=O,V=L,O=N[P],L=p[P],ba=d(ba,G,C,H,V,O,L),I=O>=D&&O<=E&&L>=K&&L<=X,x&&I)q[A]=Math.round((O-r)*m)+s,Y[A]=Math.round((L-z)*w)+k,A+=1;else if(x=I,H-=O,V-=L,0!==H||0!==V){var S={tL:1,tE:0};e(H,D-O,S)&&e(-H,O-E,S)&&e(V,K-L,S)&&e(-V,L-X,S)&&(1>
S.tL&&(q[A]=Math.round((O-r+S.tL*H)*m)+s,Y[A]=Math.round((L-z+S.tL*V)*w)+k,A+=1),0<S.tE?(q[A]=Math.round((O-r+S.tE*H)*m)+s,Y[A]=Math.round((L-z+S.tE*V)*w)+k,A+=1,a.draw_lines(l,R,q.subarray(J,A),Y.subarray(J,A),A-J,n,u),0!==v&&2<A-J&&a.draw_symbols(l,c,q.subarray(J+1,A-1),Y.subarray(J+1,A-1),A-J-2,v,f,h+P-(A-J-2)),J=A):(q[A]=Math.round((O-r)*m)+s,Y[A]=Math.round((L-z)*w)+k,A+=1))}ba=d(ba,G,C,O,L,l.stk[l.level].xmax,l.stk[l.level].ymin);ba=d(ba,G,C,l.stk[l.level].xmax,l.stk[l.level].ymin,l.stk[l.level].xmin,
l.stk[l.level].ymin);0<A-J&&(a.draw_lines(l,R,q.subarray(J,A),Y.subarray(J,A),A-J,n,u),I&&(J+=1),0!==v&&1<A-J&&a.draw_symbols(l,c,q.subarray(J-1,A),Y.subarray(J-1,A),A-J-1,v,f,P-A+h));!g.fillStyle||l.fillMin||l.fillMax||(1<A||0!==ba)&&a.fill_trace(l,g.fillStyle,q,Y,A);if(g.highlight)for(R=0;R<g.highlight.length;R++)if(c=g.highlight[R],c.fill&&(p=c.xstart,N=c.xend,console.log("x start ",p),console.log("x end ",N),!(p>=l.stk[l.level].xmax||N<=l.stk[l.level].xmin)&&(1<A||0!==ba))){p=a.real_to_pixel(l,
p,0);F=a.real_to_pixel(l,N,0);N=p.x;p=F.x;F=[];h=[];for(t=0;t<A;t++)n=q[t],v=Y[t],!0===b(n,N,p)&&(F.push(n),h.push(v));if(0<F.length||0!==ba)N=Math.max(N,F[0]),p=Math.min(p,F[F.length-1]),a.fill_trace(l,c.fill,F,h,F.length,N,p)}}g.noclip||a.clip(l,0,0,0,0)}}};a.draw_mode=function(a,b,c){a.linewidth=void 0===b?1:b;a.style=c};a.draw_line=function(a,b,c,d,e,h,t,n){var v=a.active_canvas.getContext("2d");void 0===t&&(t=a.linewidth);void 0===n&&(n=a.style);"number"===typeof b&&(a.pixel&&0!==a.pixel.length?
(b=Math.max(0,Math.min(a.pixel.length,b)),b=G(a.pixel[b].red,a.pixel[b].green,a.pixel[b].blue)):(y.log.warn("COLORMAP not initialized, defaulting to foreground"),b=a.fg));x(v,c,d,e,h,n,b,t)};a.rubberline=function(a,b,c,d,e){a=a.active_canvas.getContext("2d");x(a,b,c,d,e,{mode:"xor"},"white",1)};a.fill_trace=function(b,c,d,p,e,h,t){var n=b.active_canvas.getContext("2d");Array.isArray(c)?n.fillStyle=a.linear_gradient(b,0,0,0,b.b-b.t,c):n.fillStyle=c;if(1>e)n.fillRect(b.l,b.t,b.r-b.l,b.b-b.t);else if(void 0===
h&&(h=b.l),void 0===t&&(t=b.r),c){c=d[0];var v=p[0];n.beginPath();v===b.t?n.lineTo(h,b.t):n.lineTo(h,b.b);n.lineTo(c,v);for(var f=1;f<e;f++)c=d[f],v=p[f],n.lineTo(c,v);v===b.t&&n.lineTo(t,b.t);n.lineTo(t,b.b);p[0]===b.t&&n.lineTo(h,b.b);n.closePath();n.fill("evenodd")}};a.draw_lines=function(a,b,c,d,e,h,t){var n=a.active_canvas.getContext("2d");if(!(1>e)){var v=c[0],f=d[0];void 0===h&&(h=a.linewidth);void 0===t&&(t=a.style);t&&"dashed"===t.mode&&(Z.dashOn(n,t.on,t.off)||y.log.warn("WARNING: Dashed lines aren't supported on your browser"));
n.lineWidth=h;a=0;"string"===typeof b?b=[{start:0,color:b}]:b instanceof Array||(void 0===b.start&&(b.start=0),b=[b]);for(h=0;h<b.length;h++)null!=b[h].end&&b[h].end<v?b.remove(h):b[h].start<v&&(a=h);n.strokeStyle=b[a].color;n.beginPath();n.moveTo(v,f);for(h=0;h<e;h++)if(v!==c[h]||f!==d[h]){v=c[h];f=d[h];t=!1;if(0<a&&null!=b[a].end&&b[a].end<v)for(t=!0;null!=b[a].end&&b[a].end<v&&(b.remove(a),a-=1,0!==a););if(a+1<b.length&&b[a+1].start<=v)for(t=!0;a+1<b.length&&b[a+1].start<=v;)a++;n.lineTo(v,f);
t&&(n.stroke(),n.strokeStyle=b[a].color,n.beginPath(),n.lineTo(v,f))}n.stroke();Z.dashOff(n);n.beginPath()}};a.clip=function(a,b,c,d,e){a=a.active_canvas.getContext("2d");0===b&&0===c&&0===d&&0===e?a.restore():(a.save(),a.beginPath(),a.rect(b,c,d,e),a.clip())};a.clear_window=function(a){var b=a.active_canvas.getContext("2d");b.fillStyle=a.bg;b.fillRect(0,0,a.width,a.height)};a.erase_window=function(a){a.active_canvas.getContext("2d").clearRect(0,0,a.width,a.height)};a.rubberbox=function(b,c,d,p,e){a.warpbox(b,
b.xpos,b.ypos,b.xpos,b.ypos,0,b.width,0,b.height,c,d,p,e)};a.warpbox=function(a,b,c,d,e,h,t,n,v,f,g,u,q){u||(u={});a.warpbox=new k;a.warpbox.xo=b;a.warpbox.yo=c;a.warpbox.xl=d;a.warpbox.yl=e;a.warpbox.xmin=h;a.warpbox.xmax=t;a.warpbox.ymin=n;a.warpbox.ymax=v;a.warpbox.func=f;a.warpbox.mode=g;a.warpbox.style=u;a.warpbox.def_style=u;a.warpbox.alt_style=q};a.origin=function(b,c,d){b=Math.max(1,b);c=Math.max(1,c);var p=new a.STKSTRUCT;p.xmin=d.xmin;p.xmax=d.xmax;p.ymin=d.ymin;p.ymax=d.ymax;p.xscl=d.xscl;
p.yscl=d.yscl;p.x1=d.x1;p.y1=d.y1;p.x2=d.x2;p.y2=d.y2;if(b!==c){var e=Math.abs(c-b);b=c+b;if(2===e||5!==b)p.xmin=d.xmax,p.xmax=d.xmin,p.xscl=-d.xscl;if(2===e||5===b)p.ymin=d.ymax,p.ymax=d.ymin,p.yscl=-d.yscl}return p};a.mult=function(a,b){var c=Math.max(Math.abs(a),Math.abs(b));if(0===c)return 1;var d=0.1447648*Math.log(c),d=d|d;1>c&&(d-=1);return 0>d?1/Math.pow(10,-3*d):Math.pow(10,3*d)};a.widget_callback=function(a,b){if(a.prompt&&3===b.which)a.prompt.input.onsubmit();a.widget&&a.widget.callback(b)};
a.prompt=function(b,c,d,p,e,h,t,n,v){if(void 0!==h&&(e=d(h),!e.valid))throw"Prompt default input value not valid due to '"+e.reason+"'";a.onWidgetLayer(b,function(){var e=b.active_canvas.getContext("2d"),g=e.font.indexOf("px"),u=g+3,g=e.font.substr(0,g),e=e.font.substr(u,e.font.length).toString(),e=new U({height:b.text_h,fontFamily:e,fontSize:new Number(g),backgroundColor:b.bg,fontColor:b.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*b.text_w,value:void 0!==
h?h.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),q=function(c,g){return function(){var q=this.value(),B=d(q);B.valid?(b.prompt=void 0,this.cleanup(),a.onWidgetLayer(b,function(){a.erase_window(b)}),p(q)):(a.message(b,"Value: '"+q+"' isn't valid due to '"+B.reason+"' - RETRY",void 0,c,g),setTimeout(function(){a.onWidgetLayer(b,function(){a.erase_window(b)});b.widget=null},null!=v?v:4E3))}},u=function(b,c,l){return function(d,g){a.onWidgetLayer(b,function(){var B=(l.length+2)*b.text_w,
p=B+31*b.text_w+6,V=2*b.text_h+6;d||(d=b.xpos);g||(g=b.ypos);var D=Math.max(0,Math.min(d,b.width-p)),K=Math.max(0,Math.min(g,b.height-V)),E=D+3,X=K+3,Y=X+1.5*b.text_h,A=E+b.text_w;a.widgetbox(b,D,K,p,V,E,X,0,"");a.text(b,A,Y,l);p=Y-1.15*b.text_h;c.x(E+b.text_w+B-b.text_w);c.y(p);c.onsubmit(q(D,p-75));c.canvas()?c.render():c.canvas(b.active_canvas)})}}(b,e,c);u(t,n);e.focus();b.prompt={redraw:u,input:e}})};a.floatValidator=function(a,b){return(void 0!==b&&!1!==b||""!==a)&&isNaN(parseFloat(a))||!isFinite(a)?
{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}};a.intValidator=function(a,b){return(void 0===b||!1===b)&&""===a||parseFloat(a)===parseInt(a,10)&&!isNaN(a)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}};a.hexValidator=function(a,b){var c=/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/;return(void 0===b||!1===b)&&""===a||!1!==c.test(a)?{valid:!0,reason:""}:{valid:!1,reason:"Failed hexcode validation: not a valid hexcode"}};
a.message=function(b,c,d,p,e,h){a.onWidgetLayer(b,function(){a.render_message_box(b,c,p,e);b.widget={type:h||"ONESHOT",callback:function(c){if("mousedown"===c.type||"keydown"===c.type)b.widget=null,a.onWidgetLayer(b,function(){a.erase_window(b)})}}})};a.render_message_box=function(b,c,d,p,e){var h=c.split(/\r\n|\r|\n/g),t=0,n;if(1===h.length){t=Math.min((b.width-6)/b.text_w-2,c.length);if(0>=t)return;for(;40<t&&2.5*b.text_h*c.length<b.height*t;)t-=5;var v=0,f=0,g=0,u=0,q=0,s=0,h=[];for(n=!0;f<c.length;){for(var q=
f+t-1,s=q=Math.min(q,c.length-1),k=!1,v=f;v<=q&&!k;v++)switch(c[v]){case ",":case ";":case " ":case ":":s=v;break;case "-":case "/":s!==v-1&&(s=v);break;case "@":case "\n":case "\r":n=!1,k=!0,s=v}v===c.length&&(s=q);k?h.push(c.substring(f,s)):(v=c.substring(f,s+1).replace(/^\s+/,""),h.push(v));f=s+1;u=Math.max(u,h[g].length)}}else for(g=0;g<h.length;g++)t=Math.min((b.width-6)/b.text_w-2,Math.max(t,h[g].length));u=h.length;6<u&&(n=!1);v=0;g=Math.max(1,b.height/b.text_h);c=Math.min(u,v+g-1);t=(t+2)*
b.text_w+6;u=(c-v+1)*b.text_h+6;d||(d=b.xpos);p||(p=b.ypos);d=Math.max(b.l,Math.min(d,b.r-t));g=Math.max(b.t,Math.min(p,b.b-u));p=d+3;s=g+3;a.widgetbox(b,d,g,t,u,p,s,0,"");u=s+b.text_h/3;for(g=p+b.text_w;v<c;)u+=b.text_h,n&&(g=d+t/2-h[v].length*b.text_w/2),a.text(b,g,u,h[v],e),v++};a.draw_round_box=function(a,b,c,d,e,h,t,n,v){a=a.active_canvas.getContext("2d");v||(v=5);a.beginPath();a.moveTo(c+v,d);a.lineTo(c+e-v,d);a.quadraticCurveTo(c+e,d,c+e,d+v);a.lineTo(c+e,d+h-v);a.quadraticCurveTo(c+e,d+h,
c+e-v,d+h);a.lineTo(c+v,d+h);a.quadraticCurveTo(c,d+h,c,d+h-v);a.lineTo(c,d+v);a.quadraticCurveTo(c,d,c+v,d);a.closePath();a.lineWidth=1;a.strokeStyle=b;a.stroke();void 0!==t&&0<t&&(c=a.globalAlpha,a.globalAlpha=t,a.fillStyle=n?n:b,a.fill(),a.globalAlpha=c)};a.draw_box=function(a,b,c,d,e,h,t,n){var v=a.active_canvas.getContext("2d");if("xor"!==b)v.lineWidth=1,v.strokeStyle=b,v.strokeRect(c,d,e,h);else if("undefined"===typeof Uint8ClampedArray)v.lineWidth=1,v.strokeStyle=a.fg,v.strokeRect(c,d,e,h);
else{c=Math.floor(c);d=Math.floor(d);e=Math.floor(e);h=Math.floor(h);a=a.canvas.getContext("2d");for(var f=a.getImageData(c,d,e,1),g=f.data,u=0;u<f.data.length;u++)g[4*u]=255-g[4*u],g[4*u+1]=255-g[4*u+1],g[4*u+2]=255-g[4*u+2],g[4*u+3]=255;v.putImageData(f,c,d);f=a.getImageData(c,d+h,e,1);g=f.data;for(u=0;u<f.data.length;u++)g[4*u]=255-g[4*u],g[4*u+1]=255-g[4*u+1],g[4*u+2]=255-g[4*u+2],g[4*u+3]=255;v.putImageData(f,c,d+h);f=a.getImageData(c,d,1,h);g=f.data;for(u=0;u<h;u++)g[4*u]=255-g[4*u],g[4*u+1]=
255-g[4*u+1],g[4*u+2]=255-g[4*u+2],g[4*u+3]=255;v.putImageData(f,c,d);f=a.getImageData(c+e,d,1,h);g=f.data;for(u=0;u<h;u++)g[4*u]=255-g[4*u],g[4*u+1]=255-g[4*u+1],g[4*u+2]=255-g[4*u+2],g[4*u+3]=255;v.putImageData(f,c+e,d)}void 0!==t&&0<t&&(a=v.globalAlpha,v.globalAlpha=t,v.fillStyle=n?n:b,v.fillRect(c+1,d+1,e-1,h-1),v.globalAlpha=a)};a.set_font=function(a,b){var c=a.canvas.getContext("2d"),d=a.wid_canvas.getContext("2d");if(a.font&&a.font.width===b)c.font=a.font.font,d.font=a.font.font;else{var e=
1;do{e+=1;c.font=e+"px "+a.font_family;d.font=e+"px "+a.font_family;var h=c.measureText("M");a.text_w=h.width;a.text_h=e}while(a.text_w<b);a.font={font:e+"px "+a.font_family,width:b}}};a.textline=function(a,b,c,d,e,h){var f=a.active_canvas.getContext("2d");h||(h={});h.color||(h.color=a.fg);h.width||(h.width=1);x(f,b,c,d,e,h,h.color,h.width)};a.tics=function(a,b,c,d){var e=1,h=a;if(b===a)return{dtic:1,dtic1:a};e=Math.abs(b-a)/c;c=Math.max(e,1E-36);c=Math.log(c)/Math.log(10);0>c?(c=Math.ceil(c),c-=
1):c=Math.floor(c);e*=Math.pow(10,-c);c=Math.pow(10,c);h=e*c;d&&5<=h&&5140800>=h?(d=17.5>h?5:37.5>h?15:270>h?60:1050>h?300:2250>h?900:7200>h?3600:16200>h?10800:32400>h?21600:129600>h?43200:518400>h?86400:604800,e=Math.round(h/d)*d):e=1.75>e?c:2.25>e?2*c:3.5>e?2.5*c:7>e?5*c:10*c;0===e&&(e=1);b>=a?(d=Math.floor(0<=a?a/e+0.995:a/e-0.005),h=d*e):(d=Math.floor(0<=a?a/e+0.005:a/e-0.995),h=d*e,e*=-1);h+e===h&&(e=b-a);return{dtic:e,dtic1:h}};a.drawaxis=function(b,c,d,e,f,h,t){var n=a.origin(c.origin,1,c.stk[c.level]),
v=b=0,k=0,g=0,u=0,q=0;f=void 0===f?30:f;h=void 0===h?30:h;t.exactbox?(b=Math.floor(n.x1),v=Math.floor(n.y1),k=Math.floor(n.x2),g=Math.floor(n.y2),u=k-b,q=g-v):(b=Math.max(Math.floor(n.x1)-2,0),v=Math.max(Math.floor(n.y1)-2,0),k=Math.min(Math.floor(n.x2)+2,c.width),g=Math.min(Math.floor(n.y2)+2,c.height),u=k-b-4,q=g-v-4);var s=c.active_canvas.getContext("2d");t.fillStyle?Array.isArray(t.fillStyle)?s.fillStyle=a.linear_gradient(c,0,0,0,g-v,t.fillStyle):s.fillStyle=t.fillStyle:s.fillStyle=c.bg;s.fillRect(b,
v,k-b,g-v);t.noaxisbox||(a.textline(c,b,v,k,v),a.textline(c,k,v,k,g),a.textline(c,k,g,b,g),a.textline(c,b,g,b,v));var r={dtic:0,dtic1:0},s={dtic:0,dtic1:0};0>d?(r.dtic1=n.xmin,r.dtic=(n.xmin-n.xmax)/d):r=a.tics(n.xmin,n.xmax,d,t.xtimecode);var m=1;t.xmult?m=t.xmult:t.xtimecode||(m=a.mult(n.xmin,n.xmax));0>e?(s.dtic1=n.ymin,s.dtic=(n.ymin-n.ymax)/e):s=a.tics(n.ymin,n.ymax,e,t.ytimecode);d=1;t.ymult?d=t.ymult:t.ytimecode||(d=a.mult(n.ymin,n.ymax));var H=!t.noxtlab;e=!t.noytlab;var w=Math.max(0,b-4*
c.text_w),x=0,x=t.ontop?Math.min(c.height,Math.floor(g+1.5*c.text_h)):Math.max(c.text_h,Math.floor(v-0.5*c.text_h)),G,V;0<x&&(t.noyplab||(V=t.ylabel instanceof Function?t.ylabel(h,d):void 0!==t.ylabel?t.ylabel:y.label(h,d)),t.noxplab||(G=t.xlabel instanceof Function?t.xlabel(f,m):void 0!==t.xlabel?t.xlabel:y.label(f,m)));G&&V?a.text(c,w,x,V+" vs "+G):G?a.text(c,w,x,G):V&&a.text(c,w,x,V);f=5.5*c.text_w;h=0;h=t.ontop?t.inside?v+1*c.text_h:v-0.2*c.text_h:t.inside?g-0.5*c.text_h:g+1*c.text_h+2;u=n.xmin!==
n.xmax?u/(n.xmax-n.xmin):u/1;m=0!==m?1/m:1;G=Math.min(12,Math.round(u*r.dtic)/c.text_w);V=1;var D="";if(H)if(t.xtimecode)D=y.sec2tod(r.dtic1),V=D.length*c.text_w<(k-b)/2;else for(var K,x=r.dtic1;x<=n.xmax;x+=r.dtic){D=a.format_f(x*m,G,G/2);if(D===K){V=0;break}K=D}0===r.dtic&&(r.dtic=n.xmax-r.dtic1+1);w=0;D="";for(x=r.dtic1;x<=n.xmax;x+=r.dtic)if(K=b+Math.round(u*(x-n.xmin))+2,!(K<b)&&(t.grid&&"y"!==t.grid?(t.gridStyle||(t.gridStyle=a.LEGACY_RENDER?{mode:"dashed",on:1,off:3}:{color:c.xwms,mode:"dashed",
on:1,off:3}),a.textline(c,K,g,K,v,t.gridStyle)):(a.textline(c,K,g-2,K,g+2),a.textline(c,K,v-2,K,v+2)),H))if(V){if(D=null,t.xtimecode?K>w&&(D=y.sec2tod(x,!0),w=K+c.text_w*(D.length+1)):(D=a.format_f(x*m,G,G/2),D=z(D,!0)),D){var E=Math.round(D.length/2)*c.text_w;t.inside&&(K=Math.max(b+E,K),K=Math.min(k-E,K));0<=K-E&&a.text(c,K-E,h,D)}}else x===r.dtic1&&(t.xtimecode?(D=y.sec2tod(x,!0),t.inside&&(K=Math.floor(Math.max(b+f,K))),a.text(c,K-f,h,D+" +\u0394 "+y.sec2tod(r.dtic))):(D=(r.dtic1*m).toString(),
t.inside&&(K=Math.floor(Math.max(b+f,K))),a.text(c,K-f,h,D+" +\u0394 "+r.dtic*m)));f=t.yonright?t.inside?Math.min(k-6*c.text_w,c.width-5*c.text_w):Math.min(k+c.text_w,c.width-5*c.text_w):t.inside?Math.max(0,b+c.text_w):Math.max(0,Math.floor(b-(c.l-0.5)*c.text_w));h=0.4*c.text_h;u=n.ymin!==n.ymax?-q/(n.ymax-n.ymin):-q/1;m=0!==d?1/d:1;q=n.ymax>=n.ymin?function(a){return a<=n.ymax}:function(a){return a>=n.ymax};for(d=s.dtic1;q(d);d+=s.dtic)K=g+Math.round(u*(d-n.ymin))-2,K>g||(t.grid&&"x"!==t.grid?(t.gridStyle||
(t.gridStyle={mode:"dashed",on:1,off:3}),a.textline(c,b,K,k,K,t.gridStyle)):(a.textline(c,b-2,K,b+2,K),a.textline(c,k-2,K,k+2,K)),!e||t.inside&&(K<v+c.text_h||K>g-2*c.text_h)||(t.ytimecode?(r=y.sec2tod(d),H=K+h-c.text_h,w=r.indexOf("::"),-1!==w&&(H>v&&H<g&&a.text(c,f,H,r.substring(0,w)),w+=1),a.text(c,f,Math.min(g,K+h),r.substring(w+1,w+6)),H=K+h+c.text_h,H>v&&H<g&&"00"!==r.substring(w+7,w+9)&&(r+=".00",a.text(c,f,H,r.substring(w+7,w+12)))):(r=a.format_f(d*m,12,6),r=z(r,t.inside),a.text(c,f,Math.min(g,
K+h),r))))};a.inrect=function(a,b,c,d,e,h){return a>=c&&a<=c+e&&b>=d&&b<=d+h};var M={GBorder:3,sidelab:0,toplab:1,n_show:0};a.menu=function(b,d){var e=1.5*b.text_h,p=Math.floor((b.canvas.height-70)/(1.5*b.text_h));M.n_show=p>=d.items.length?d.items.length:p;if(d){if(!b.widget){d.x=b.xpos;d.y=b.ypos;d.val=0;d.h=2*M.GBorder+e*M.n_show+M.toplab*(e+M.GBorder)-1;d.y=d.y-((M.toplab+Math.max(1,d.val)-0.5)*e+(1+M.toplab)*M.GBorder)+1;for(var p=d.title.length,k=0,h=0;h<d.items.length;h++){var t=d.items[h],
p=Math.max(p,t.text.length);"checkbox"===t.style&&(p+=2);"separator"===t.style&&(p+=2);t.checked&&"checkbox"!==t.style&&(k=e*h)}d.queue=[];for(e=0;e<M.n_show;e++)d.queue.push(e);d.y-=k;p=(p+2)*b.text_w;d.w=2*M.GBorder+Math.abs(M.sidelab)+p-1;d.x-=d.w/2;b.menu=d;b.widget={type:"MENU",callback:function(e){var h=d,p=h.queue[0],g=h.queue[M.n_show-1];if(void 0===e)c(b,h);else if("mousemove"===e.type){void 0!==h.drag_x&&void 0!==h.drag_y&&2<Math.abs(b.xpos-h.drag_x)&&2<Math.abs(b.ypos-h.drag_y)&&(h.x+=
b.xpos-h.drag_x,h.y+=b.ypos-h.drag_y,h.drag_x=b.xpos,h.drag_y=b.ypos);var u=h.x+M.GBorder+Math.max(0,M.sidelab),q=h.w-2*M.GBorder-Math.abs(M.sidelab),s=1.5*b.text_h,t=h.y+M.GBorder+M.toplab*(s+M.GBorder);for(e=p;e<=g;e++){var p=t+s*e,k=h.items[e];k.selected=!1;a.inrect(b.xpos,b.ypos,u,p,q,s)&&(k.selected=!0)}c(b,h)}else if("mouseup"===e.type)1===e.which?void 0!==h.drag_x&&void 0!==h.drag_y?(h.drag_x=void 0,h.drag_y=void 0):f(b,h):3===e.which&&r(b,h);else if("mousedown"===e.type)e.preventDefault(),
1===e.which?b.xpos>h.x&&b.xpos<h.x+h.w&&b.ypos>h.y&&b.ypos<h.y+1.5*b.text_h&&(h.drag_x=b.xpos,h.drag_y=b.ypos):2===e.which&&f(b,h);else if("keydown"===e.type&&b.menu)if(h=b.menu,e.preventDefault(),e=Z.getKeyCode(e),13===e)f(b,h);else if(38===e){for(e=p;e<g;e++)if(k=h.items[e],k.selected){k.selected=!1;void 0!==h.items[e-1]&&(h.items[e-1].selected=!0);break}else e===p&&0!==p?(h.queue.pop(),h.queue.unshift(p-1),c(b,h),h.items[g-1].selected=!0):0===p&&!0===h.items[p].selected&&(c(b,h),h.items[0].selected=
!0);c(b,h)}else if(40===e){for(e=p;e<g;e++)if(k=h.items[e],k.selected){k.selected=!1;void 0!==h.items[e+1]&&(h.items[e+1].selected=!0);break}else e===g-1&&(p=g+1,g+1===h.items.length&&(p=0),h.queue.shift(),h.queue.push(p),h.items[g].selected=!1,h.items[p].selected=!0,c(b,h));c(b,h)}else if(48<=e&&57>=e||65<=e&&90>=e){g=String.fromCharCode(e).toUpperCase();h.keypresses=void 0===h.keypresses?g:h.keypresses+g;for(e=g=0;e<h.items.length;e++)k=h.items[e],k.selected=!1,k.text&&0===k.text.toUpperCase().indexOf(h.keypresses)&&
(0===g&&(k.selected=!0),g++);0===g?(h.keypresses=void 0,c(b,h)):1===g?f(b,h):c(b,h)}}}}c(b,d)}};a.widgetbox=function(b,c,d,e,f,h,k,n,v,r){a.shadowbox(b,c,d,e,f,1,2,"",0.75);r&&(f=r.length,f=Math.min(f,e/b.text_w),f=Math.max(f,1),c+=(e-f*b.text_w)/2,d+=3,a.text(b,c,d+(k-d+0.7*b.text_h)/2,r,b.xwfg));0<n&&0<v&&(d=b.active_canvas.getContext("2d"),a.LEGACY_RENDER?(d.fillStyle=b.bg,d.fillRect(h,k,n,v)):(d.save(),d.globalAlpha=0.1,d.fillStyle=b.bg,d.fillRect(h,k,n,v),d.restore()))};a.text=function(a,b,c,
d,e){var h=a.active_canvas.getContext("2d");b=Math.max(0,b);c=Math.max(0,c);if(0>b||0>c)throw"On No!";h.textBaseline="bottom";h.textAlign="left";h.font=a.font.font;h.fillStyle=void 0===e?a.fg:e;h.fillText(d,b,c)};a.getcolor=function(a,b,c){for(a=0;6>a&&0===b[a+1].pos;a++);for(;c>b[a].pos&&6>a;)a++;if(0===a||c>=b[a].pos)return G(C(b[a].red),C(b[a].green),C(b[a].blue));c=C((c-b[a-1].pos)/(b[a].pos-b[a-1].pos)*100);var d=255-c;return G(b[a].red/100*c+b[a-1].red/100*d,b[a].green/100*c+b[a-1].green/100*
d,b[a].blue/100*c+b[a-1].blue/100*d)};a.redraw_warpbox=function(a){a.warpbox&&(a._animationFrameHandle&&cancelAnimFrame(a._animationFrameHandle),a._animationFrameHandle=requestAnimFrame(function(){H(a)}))};a.format_g=function(b,c,d,e){Math.min(c,d+7);c=Math.abs(b).toString();var f=c.indexOf(".");-1===f&&(c+=".",f=c.length);e=0;var h=c.indexOf("e");-1!==h&&(e=parseInt(c.slice(h+1,c.length),10),c=c.slice(0,h));for(var h=Math.min(d-(c.length-f)+1,d),k=0;k<h;k++)c+="0";if(0!==b)if(1>Math.abs(b))if("0."===
c.slice(0,2))for(k=2;k<c.length;k++)if("0"===c[k])e-=1;else{c="0."+c.slice(k,k+d);break}else c=c.slice(0,d+2);else f>d?(e=Math.max(0,f-1),c=c[0]+"."+c.slice(1,d+1)):c=c.slice(0,d+2);0===e?c+="    ":(d=a.pad(Math.abs(e).toString(),2,"0"),c=0>e?c+"E-"+d:c+"E+"+d);return 0>b?"-"+c:" "+c};a.format_f=function(b,c,d){d=Math.max(Math.min(d,20),0);b=b.toFixed(d).toString();return b=a.pad(b,c+d," ")};a.pad=function(a,b,c){for(;a.length<b;)a=c+a;return a};a.legacy_shadowbox=function(b,c,d,e,f,h,k,n){for(var v=
n.length,r=0,g=0,r=0,g=[],u=0;11>u;u++)g[u]={x:0,y:0};u=!(1===k||-1===k);0!==k&&0<a.GBorder&&(r=y.trunc(Math.min(e,f)/3),r=Math.max(1,Math.min(r,a.GBorder)));if(0<r){g[0].x=g[1].x=c;g[8].x=g[9].x=c+e;g[1].y=g[8].y=d;g[0].y=g[9].y=d+f;switch(h){case a.L_ArrowLeft:g[0].y=g[1].y=d+y.trunc(f/2);c+=2;--e;break;case a.L_ArrowRight:g[8].y=g[9].y=d+y.trunc(f/2);--c;--e;break;case a.L_ArrowUp:g[1].x=g[8].x=c+y.trunc(e/2);d+=2;--f;break;case a.L_ArrowDown:g[0].x=g[9].x=c+y.trunc(e/2),--d,--f}g[2]=g[8];g[10]=
g[0];c+=r;d+=r;e-=2*r;f-=2*r}g[4].x=g[5].x=c;g[3].x=g[6].x=c+e;g[3].y=g[4].y=d;g[5].y=g[6].y=d+f;switch(h){case a.L_ArrowLeft:g[4].y=g[5].y=d+y.trunc(f/2);break;case a.L_ArrowRight:g[3].y=g[6].y=d+y.trunc(f/2);break;case a.L_ArrowUp:g[3].x=g[4].x=c+y.trunc(e/2);break;case a.L_ArrowDown:g[5].x=g[6].x=c+y.trunc(e/2)}g[7]=g[3];h=b.active_canvas.getContext("2d");0<r&&(h.fillStyle=0<k?b.xwts:b.xwbs,w(h,g.slice(0,7)),h.fillStyle=0>k?b.xwts:b.xwbs,w(h,g.slice(5,11)));u&&(h.fillStyle=b.xwbg,w(h,g.slice(3,
8)));h.fillStyle=b.xwfg;h.textBaseline="alphabetic";u&&0<v&&(v=Math.min(v,y.trunc(e/b.text_w)),v=Math.max(v,1),r=c+y.trunc((e-v*b.text_w)/2),g=d+y.trunc((f+0.7*b.text_h)/2),h.fillText(n,r,g))};a.sigplot_shadowbox=function(b,c,d,e,f,h,k,n,r){var m=b.active_canvas.getContext("2d"),g=n.length,u=0>k?b.xwts:b.xwbs;r=r||1;for(var q=[],s=0;11>s;s++)q[s]={x:0,y:0};switch(h){case a.L_ArrowLeft:case a.L_ArrowRight:case a.L_ArrowUp:case a.L_ArrowDown:q=a.chevron(h,c,d,e,f);m.fillStyle=0<k?b.xwts:b.xwbs;w(m,
q.slice(0,6));break;default:a.draw_round_box(b,u,c,d,e,f,r,b.xwbg,5,b.xwbs)}m.fillStyle=b.xwfg;m.textBaseline="alphabetic";1!==k&&-1!==k&&0<g&&(g=Math.min(g,y.trunc(e/b.text_w)),g=Math.max(g,1),c+=y.trunc((e-g*b.text_w)/2),b=d+y.trunc((f+0.7*b.text_h)/2),m.fillText(n,c,b))};a.shadowbox=a.LEGACY_RENDER?a.legacy_shadowbox:a.sigplot_shadowbox;a.chevron=function(b,c,d,e,f,h){var k=Math.min(e,f);h||(h=0.25*k);for(var n=[],r=0;6>r;r++)n[r]={x:0,y:0};var r=y.trunc((e-k)/2+k/4-h/2.828),m=y.trunc((f-k)/2+
k/4-h/2.828);switch(b){case a.L_ArrowLeft:n[0].x=c+r;n[0].y=d+y.trunc(k/2);n[1].x=c+r+y.trunc(k/2);n[1].y=d;n[2].x=c+r+y.trunc(k/2+h/1.414);n[2].y=d+y.trunc(h/1.414);n[3].x=c+r+y.trunc(2*h/1.414);n[3].y=d+y.trunc(k/2);n[4].x=c+r+y.trunc(k/2+h/1.414);n[4].y=d+f-y.trunc(h/1.414);n[5].x=c+r+y.trunc(k/2);n[5].y=d+k;break;case a.L_ArrowRight:n[0].x=c+e-r;n[0].y=d+y.trunc(k/2);n[1].x=c+e-r-y.trunc(k/2);n[1].y=d;n[2].x=c+e-r-y.trunc(k/2+h/1.414);n[2].y=d+y.trunc(h/1.414);n[3].x=c+e-r-y.trunc(2*h/1.414);
n[3].y=d+y.trunc(k/2);n[4].x=c+e-r-y.trunc(k/2+h/1.414);n[4].y=d+f-y.trunc(h/1.414);n[5].x=c+e-r-y.trunc(k/2);n[5].y=d+k;break;case a.L_ArrowUp:n[0].x=c+y.trunc(k/2);n[0].y=d+m;n[1].x=c;n[1].y=d+m+y.trunc(k/2);n[2].x=c+y.trunc(h/1.414);n[2].y=d+m+y.trunc(k/2+h/1.414);n[3].x=c+y.trunc(k/2);n[3].y=d+m+y.trunc(2*h/1.414);n[4].x=c+e-y.trunc(h/1.414);n[4].y=d+m+y.trunc(k/2+h/1.414);n[5].x=c+k;n[5].y=d+m+y.trunc(k/2);break;case a.L_ArrowDown:n[0].x=c+y.trunc(k/2),n[0].y=d+f-m,n[1].x=c,n[1].y=d+f-m-y.trunc(k/
2),n[2].x=c+y.trunc(h/1.414),n[2].y=d+f-m-y.trunc(k/2+h/1.414),n[3].x=c+y.trunc(k/2),n[3].y=d+f-m-y.trunc(2*h/1.414),n[4].x=c+e-y.trunc(h/1.414),n[4].y=d+f-m-y.trunc(k/2+h/1.414),n[5].x=c+k,n[5].y=d+f-m-y.trunc(k/2)}return n};a.ifevent=function(a,b){a.button_press=0;a.button_release=0;a.state_mask=0;var c=b.target.getBoundingClientRect(),d=void 0===b.offsetX?b.pageX-c.left-window.scrollX:b.offsetX,c=void 0===b.offsetX?b.pageY-c.top-window.scrollY:b.offsetY;switch(b.type){case "mousedown":a.xpos=y.bound(d,
0,a.width);a.ypos=y.bound(c,0,a.height);switch(b.which){case 1:a.button_press=1;break;case 2:a.button_press=2;break;case 3:a.button_press=3;break;case 4:a.button_press=4;break;case 5:a.button_press=5}break;case "mouseup":switch(a.xpos=y.bound(d,0,a.width),a.ypos=y.bound(c,0,a.height),b.which){case 1:a.button_release=1;break;case 2:a.button_release=2;break;case 3:a.button_release=3;break;case 4:a.button_release=4;break;case 5:a.button_release=5}}};a.scroll_real2pix=function(a){if(0===a.range)return{s1:a.a1,
sw:a.a2-a.a1};var b,c;b=(a.a2-a.a1)/a.trange;c=a.a1+Math.floor(0.5+(a.smin-a.tmin)*b);b=c+Math.floor(0.5+a.srange*b);c=c>a.a2-a.swmin?a.a2-a.swmin:Math.max(c,a.a1);b=b<a.a1+a.swmin?a.a1+a.swmin:Math.min(b,a.a2);return{s1:c,sw:Math.max(b-c,a.swmin)}};a.redrawScrollbar=function(b,c,d){var e,f,h,k,n,r,m,g,u=c.active_canvas.getContext("2d");f=a.scroll_real2pix(b);m=f.s1;g=f.sw;r=m;f=b.x;h=b.y;k=b.w;n=b.h;b.origin&1?(e=h+n/2,b.origin&2&&(r=k-r-g),d===a.XW_DRAW&&(d=b.arrow,a.shadowbox(c,f,h,d,n-1,a.L_ArrowLeft,
2,"",0),a.shadowbox(c,f+k-d,h,d-1,n,a.L_ArrowRight,2,"",0)),a.LEGACY_RENDER?(a.draw_line(c,c.fg,f+b.a1,e,f+b.a2,e),a.shadowbox(c,f+r,h,g+1,n,1,2,"",0)):(d=u.createLinearGradient(f+b.a1,0,f+b.a2,0),d.addColorStop(0,c.xwbs),d.addColorStop(0.5,c.xwts),d.addColorStop(1,c.xwbs),a.draw_line(c,d,f+b.a1,e,f+b.a2,e,1),d=u.createLinearGradient(0,h,0,h+n),d.addColorStop(0.1,c.xwts),d.addColorStop(0.75,c.xwbs),a.draw_round_box(c,c.xwbg,f+r,h,g+1,n,1,d,8,c.xwbs))):(e=f+y.trunc(k/2),2>=b.origin&&(r=n-r-g),d===
a.XW_DRAW&&(d=b.arrow,a.shadowbox(c,f,h,k-1,d,a.L_ArrowUp,2,"",0),a.shadowbox(c,f,h+n-d,k-1,d,a.L_ArrowDown,2,"",0)),a.LEGACY_RENDER?(a.draw_line(c,c.fg,e,h+b.a1,e,h+b.a2),a.shadowbox(c,f,h+r,k,g+1,1,2,"",0)):(d=u.createLinearGradient(0,h+b.a1,0,h+b.a2),d.addColorStop(0,c.xwbs),d.addColorStop(0.5,c.xwts),d.addColorStop(1,c.xwbs),a.draw_line(c,d,e,h+b.a1,e,h+b.a2,1),d=u.createLinearGradient(f,0,f+k,0),d.addColorStop(0.1,c.xwts),d.addColorStop(0.75,c.xwbs),a.draw_round_box(c,c.xwbg,f-1,h+r,k,g+1,1,
d,8,c.xwbs)));b.s1=m;b.sw=g};a.real_to_pixel=function(b,c,d,e){b=a.origin(b.origin,4,b.stk[b.level]);if(0===b.xscl||0===b.yscl)return{x:0,y:0};var f=b.x1,h=b.y1,k=b.xmin,n=1/b.xscl,r=b.ymin,m=1/b.yscl,g=!1,u=!1;null!==c&&(g=c>b.xmax||c<b.xmin,e&&(c=Math.min(c,b.xmax),c=Math.max(c,b.xmin)),c=Math.round((c-k)*n)+f);null!==d&&(u=d>b.ymin||d<b.ymax,e&&(d=Math.min(d,b.ymin),d=Math.max(d,b.ymax)),d=Math.round((d-r)*m)+h);c=Math.round(c);d=Math.round(d);return{x:c,y:d,clipped_x:g,clipped_y:u,clipped:g||
u}};a.pixel_to_real=function(a,b,c){b=Math.min(a.r,Math.max(a.l,b));c=Math.min(a.b,Math.max(a.t,c));var d=a.level;return{x:2!==a.origin&&3!==a.origin?a.stk[d].xmin+(b-a.stk[d].x1)*a.stk[d].xscl:a.stk[d].xmin+(a.stk[d].x2-b)*a.stk[d].xscl,y:2<a.origin?a.stk[d].ymin+(c-a.stk[d].y1)*a.stk[d].yscl:a.stk[d].ymin+(a.stk[d].y2-c)*a.stk[d].yscl}};a.colormap=function(a,b,c){a.pixel=Array(c);for(var d=Array(c),e=100/(Math.max(2,c)-1),h=0;h<c;h++)d[h]=e*h+0.5;for(e=0;6>e&&0===b[e+1].pos;e++);for(h=0;h<c;h++){a.pixel[h]=
0;for(var f=d[h];6>e&&Math.floor(f)>b[e].pos;)e++;if(0===e||f>=b[e].pos)a.pixel[h]={red:C(b[e].red),green:C(b[e].green),blue:C(b[e].blue)};else{var f=C((f-b[e-1].pos)/(b[e].pos-b[e-1].pos)*100),k=255-f;a.pixel[h]={red:b[e].red/100*f+b[e-1].red/100*k,green:b[e].green/100*f+b[e-1].green/100*k,blue:b[e].blue/100*f+b[e-1].blue/100*k}}}};a.colorbar=function(b,c,d,e,f){for(var h=1;h<f;h++)a.draw_line(b,Math.floor(b.pixel.length*(h-1)/f),c,d+f-h,c+e,d+f-h);a.draw_box(b,b.fg,c+0.5,d,e,f)};a.legend_colorbar=
function(b,c,d,e,f){for(var h=1;h<e;h++)a.draw_line(b,Math.floor(b.pixel.length*(h-1)/e),c+e-h,d,c+e-h,d+f);a.draw_box(b,b.fg,c+0.5,d,e,f)};var W="undefined"===typeof Uint8ClampedArray?J:S;a.shift_image_rows=function(a,b,c){a=new Uint32Array(b);0<c?(c*=b.width,a.set(a.subarray(0,a.length-c),c)):0>c&&(c=Math.abs(c)*b.width,a.set(a.subarray(c)));return b};a.update_image_row=function(a,b,c,d,e,h,f){d=new Uint32Array(b,d*b.width*4,b.width);var k=1;h!==e&&(k=a.pixel.length/Math.abs(h-e));h=Math.max(1,
c.length/b.width);for(var r=0;r<b.width;r++){var m=Math.floor(r*h),g=c[m];if(1<h)if(1===f){for(var u=1;u<h;u++)g+=c[m+u];g/=h}else if(2===f)for(u=1;u<h;u++)g=Math.min(g,c[m+u]);else if(3===f)for(u=1;u<h;u++)g=Math.max(g,c[m+u]);else if(4===f)g=c[r];else if(5===f)for(u=1;u<h;u++)g=Math.max(Math.abs(g),Math.abs(c[m+u]));m=Math.floor((g-e)*k);m=Math.max(0,Math.min(a.pixel.length-1,m));(m=a.pixel[m])&&(d[r]=-16777216|m.blue<<16|m.green<<8|m.red)}return d};a.create_image=function(b,c,d,e,f,h,k,n){b.active_canvas.getContext("2d");
b.pixel&&0!==b.pixel.length||(y.log.warn("COLORMAP not initialized, defaulting to foreground"),a.colormap(b,y.Mc.colormap[1].colors,16));var r=1;k!==h&&(r=b.pixel.length/Math.abs(k-h));e=Math.ceil(e);f=Math.ceil(f);k=new ArrayBuffer(e*f*4);k.width=e;k.height=f;var m=Math.max(1,d/e),g=new Uint32Array(k);if(c)for(var u=0;u<g.length;u++){var q=(3===b.origin||4===b.origin?Math.floor(u/e):f-Math.floor(u/e)-1)*d+Math.floor((1===b.origin||4===b.origin?Math.floor(u%e):e-Math.floor(u%e)-1)*m),s=c[q];if(1<
m)if(1===n){for(var z=1;z<m;z++)s+=c[q+z];s/=m}else if(2===n)for(z=1;z<m;z++)s=Math.min(s,c[q+z]);else if(3===n)for(z=1;z<m;z++)s=Math.max(s,c[q+z]);else if(4===n)s=c[q];else if(5===n)for(z=1;z<m;z++)s=Math.max(Math.abs(s),Math.abs(c[q+z]));q=Math.floor((s-h)*r);q=Math.max(0,Math.min(b.pixel.length-1,q));(q=b.pixel[q])&&(g[u]=-16777216|q.blue<<16|q.green<<8|q.red)}return k};a.put_image=function(b,c,d,e,f,h,k,n,r,m,g){r=b.active_canvas.getContext("2d");b.pixel&&0!==b.pixel.length||(y.log.warn("COLORMAP not initialized, defaulting to foreground"),
a.colormap(b,y.Mc.colormap[1].colors,16));d=Math.floor(0<f?d*f:-f);e=Math.floor(e*h);h=new ArrayBuffer(d*e*4);h.width=d;h.height=e;f=new Uint32Array(h);for(var u=0;u<f.length;u++){var q=Math.max(0,c[u]),q=Math.min(b.pixel.length-1,q);(q=b.pixel[q])&&(f[u]=-16777216|q.blue<<16|q.green<<8|q.red)}W(b,r,h,m,g,k,n,d,e);return h};a.draw_image=function(b,c,d,e,f,h,k,n){var r=Math.max(d,b.stk[b.level].xmin),m=Math.min(f,b.stk[b.level].xmax),g=Math.max(e,b.stk[b.level].ymin),u=Math.min(h,b.stk[b.level].ymax);
if(!(1>=c.width||0===Math.abs(f-d)||1>=c.height||0===Math.abs(h-e))){f=c.width/(f-d);var q=c.height/(h-e),r=Math.floor(r*f)/f,m=Math.ceil(m*f)/f,g=Math.floor(g*q)/q,u=Math.ceil(u*q)/q,s,z,w,H,x,y;1===b.origin?(w=Math.max(0,Math.floor((h-u)*q)),y=Math.min(c.height-w,Math.floor((u-g)*q)),H=Math.max(0,Math.floor((r-d)*f)),x=Math.min(c.width-H,Math.floor((m-r)*f)),s=a.real_to_pixel(b,r,u),z=a.real_to_pixel(b,m,g)):2===b.origin?(w=Math.max(0,Math.floor((h-u)*q)),y=Math.min(c.height-w,Math.floor((u-g)*
q)),H=Math.max(0,Math.ceil((r-d)*f)),x=Math.min(c.width-H,Math.floor((m-r)*f)),s=a.real_to_pixel(b,m,u),z=a.real_to_pixel(b,r,g)):3===b.origin?(w=Math.max(0,Math.ceil((g-e)*q)),y=Math.min(c.height-w,Math.floor((u-g)*q)),H=Math.max(0,Math.ceil((r-d)*f)),x=Math.min(c.width-H,Math.floor((m-r)*f)),s=a.real_to_pixel(b,m,g),z=a.real_to_pixel(b,r,u)):4===b.origin&&(w=Math.max(0,Math.ceil((g-e)*q)),y=Math.min(c.height-w,Math.floor((u-g)*q)),H=Math.max(0,Math.floor((r-d)*f)),x=Math.min(c.width-H,Math.floor((m-
r)*f)),s=a.real_to_pixel(b,r,g),z=a.real_to_pixel(b,m,u));d=z.x-s.x;z=z.y-s.y;x=Math.max(1,x);y=Math.max(1,y);"number"===typeof n&&(n=(b.r-b.l)/x<=n);e=b.active_canvas.getContext("2d");e.save();e.beginPath();e.rect(b.l,b.t,b.r-b.l,b.b-b.t);e.clip();W(b,e,c,k,n,s.x,s.y,d,z,H,w,x,y);e.restore()}};Q.exports=a})()},{"./CanvasInput":1,"./common":3,"./m":4,tinycolor2:12}],7:[function(T,Q,$){(function(){function a(b,c){if(!(this instanceof a))return new a.Plot(b,c)}function k(){this.yptr=this.xptr=void 0;
this.xmax=this.xmin=this.panymax=this.panymin=this.panxmax=this.panxmin=this.xdelta=this.xstart=this.arety=this.aretx=this.ymrk=this.xmrk=this.rety=this.retx=0;this.xmult=void 0;this.ymax=this.ymin=0;this.zmax=this.zmin=this.ymult=void 0;this.pmt=this.pyscl=this.pxscl=this.dbmin=this.zoff=0;this.format=this.note="";this.modsource=this.modlayer=this.pthk=this.pyl=this.py2=this.py1=this.px2=this.px1=this.pb=this.pt=this.pr=this.pl=0;this.modified=!1;this.ydiv=this.xdiv=this.modmode=0;this.cross=this.expand=
this.all=!1;this.grid=!0;this.gridBackground=void 0;this.index=!1;this.legend=this.specs=this.pan=!0;this.xdata=!1;this.show_readout=this.show_y_axis=this.show_x_axis=!0;this.autohide_panbars=this.autohide_readout=this.hide_note=!1;this.panning=void 0;this.panmode=0;this.hold=!1;this.isec=this.nsec=this.iysec=this.sections=0;this.ylabel=this.ylab=this.xlabel=this.xlab=void 0;this.xcompression=0;this.default_rubberbox_action="zoom";this.default_rubberbox_mode="box";this.wheelscroll_mode_natural=!0;
this.scroll_time_interval=10;this.stillPanning=this.repeatPanning=void 0;this.autol=-1;this.wheelZoom=this.rasterSmoothing=this.lineSmoothing=!1;this.wheelZoomPercent=0.2;this.inContinuousZoom=!1;this.lyr=[];this.HCB=[];this.plugins=[];this.plotData=document.createElement("canvas");this.lg_colorbar=this.plotData.valid=!1;this.cbb_height=this.cbb_width=this.cbb_bot_y1=this.cbb_bot_x1=this.cbb_top_y1=this.cbb_top_x1=0;this.p_cuts=!1;this.y_box_w=this.y_box_h=this.y_box_y=this.y_box_x=this.x_box_w=this.x_box_h=
this.x_box_y=this.x_box_x=0;this.p_cuts_ypos=this.p_cuts_xpos=void 0;this.x_cut_data=[];this.y_cut_data=[];this.xcut_layer=this.xcut=void 0;this.xcut_now=this.x_cut_press_on=!1;this.ycut_layer=this.ycut=void 0;this.ycut_now=this.y_cut_press_on=!1;this.element2=this.element1=this.xlabel_stash=this.ylabel_stash=void 0;this.p_press=!1;this.xyKeys="automatic";this.enabled_streaming_pcut=this.y_pop_now=this.x_pop_now=!1;this.old_autol=this.old_drawmode=void 0}function m(a,b){var c=a._Gx,d=a._Mx;if(Array.isArray(b)){var X=
{name:"Custom",colors:b};"Custom"===q.Mc.colormap[q.Mc.colormap.length-1].name?q.Mc.colormap[q.Mc.colormap.length-1].colors=b:q.Mc.colormap.push(X);c.cmap=q.Mc.colormap.length-1}else if("string"===typeof b)for(c.cmap=-1,X=0;X<q.Mc.colormap.length;X++){if(q.Mc.colormap[X].name===b){c.cmap=X;break}}else c.cmap=b;0>c.ncolors&&(c.ncolors*=-1,c.cmap=Math.max(1,c.cmap));if(0>c.cmap||c.cmap>q.Mc.colormap.length)c.cmap=2===c.cmode?2:1;s.colormap(d,q.Mc.colormap[c.cmap].colors,c.ncolors)}function b(a){var b=
a._Gx;a=a._Mx;var c=b.aretx.toString();1===b.iabsc?s.message(a,"INDEX = "+c):2===b.iabsc?s.message(a,"1/X = "+c):s.message(a,"X = "+c)}function d(a){var b=a._Gx;a=a._Mx;var c=b.arety.toString();2===b.iabsc?s.message(a,"1/Y = "+c):s.message(a,"Y = "+c)}function c(a,b){var c=a._Mx;s.removeEventListener(c,"mousedown",a.onmousedown,!1);s.menu(c,{title:"SCROLLBAR",refresh:function(){a.refresh()},finalize:function(){s.addEventListener(c,"mousedown",a.onmousedown,!1);a.refresh()},items:[{text:"Expand Range",
handler:function(){t(a,s.SB_EXPAND,b)}},{text:"Shrink Range",handler:function(){t(a,s.SB_SHRINK,b)}},{text:"Expand Full",handler:function(){t(a,s.SB_FULL,b)}}]})}function f(a){var b=a._Gx,c=a._Mx;s.removeEventListener(c,"mousedown",a.onmousedown,!1);for(var d={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===b.cntrls,handler:function(){a.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===b.cntrls,handler:function(){a.change_settings({xcnt:-1})}},
{text:"Off",checked:0===b.cntrls,handler:function(){a.change_settings({xcnt:0})}},{text:"LM Click",checked:1===b.cntrls,handler:function(){a.change_settings({xcnt:1})}},{text:"Continuous",checked:2===b.cntrls,handler:function(){a.change_settings({xcnt:2})}}]}},X={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===b.cmode,handler:function(){a.change_settings({cmode:1})}},{text:"Phase",checked:2===b.cmode,handler:function(){a.change_settings({cmode:2})}},{text:"Real",
checked:3===b.cmode,handler:function(){a.change_settings({cmode:3})}},{text:"Imaginary",checked:4===b.cmode,handler:function(){a.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===b.cmode,handler:function(){a.change_settings({cmode:5})}},{text:"10*Log10",checked:6===b.cmode,handler:function(){a.change_settings({cmode:6})}},{text:"20*Log10",checked:7===b.cmode,handler:function(){a.change_settings({cmode:7})}}]}},e={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},
{text:"Parameters...",checked:0===b.autoy,handler:function(){b.autoy=0;y(a,"Y Axis Min:",s.floatValidator,function(b){parseFloat(b)!==c.stk[c.level].ymin?(""===b&&(b=0),n(a,parseFloat(b),c.stk[c.level].ymax,"Y")):a.refresh()},c.stk[c.level].ymin,void 0,void 0,function(){y(a,"Y Axis Max:",s.floatValidator,function(b){parseFloat(b)!==c.stk[c.level].ymax?(""===b&&(b=0),n(a,c.stk[c.level].ymin,parseFloat(b),"Y")):a.refresh()},c.stk[c.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===
b.autoy,handler:function(){b.autoy=1}},{text:"Max Auto",checked:2===b.autoy,handler:function(){b.autoy=2}},{text:"Full Auto",checked:3===b.autoy,handler:function(){b.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===b.autox,handler:function(){b.autox=0;y(a,"X Axis Min:",s.floatValidator,function(b){parseFloat(b)!==c.stk[c.level].xmin?(""===b&&(b=0),n(a,parseFloat(b),c.stk[c.level].xmax,"X")):a.refresh()},c.stk[c.level].xmin,void 0,void 0,function(){y(a,"X Axis Max:",s.floatValidator,
function(b){parseFloat(b)!==c.stk[c.level].xmax?(""===b&&(b=0),n(a,c.stk[c.level].xmin,parseFloat(b),"X")):a.refresh()},c.stk[c.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===b.autox,handler:function(){b.autox=1}},{text:"Max Auto",checked:2===b.autox,handler:function(){b.autox=2}},{text:"Full Auto",checked:3===b.autox,handler:function(){b.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",checked:0===b.autoz,handler:function(){b.autoz=0;y(a,"Z Axis Min:",s.floatValidator,
function(c){parseFloat(c)!==b.zmin&&(""===c&&(c=0),a.change_settings({zmin:c}))},b.zmin,void 0,void 0,function(){y(a,"Z Axis Max:",s.floatValidator,function(c){parseFloat(c)!==b.zmax&&(""===c&&(c=0),a.change_settings({zmax:c}))},b.zmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===b.autoz,handler:function(){a.change_settings({autoz:1})}},{text:"Max Auto",checked:2===b.autoz,handler:function(){a.change_settings({autoz:2})}},{text:"Full Auto",checked:3===b.autoz,handler:function(){a.change_settings({autoz:3})}}]}},
A={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:b.all,style:"checkbox",handler:function(){a.change_settings({all:!b.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===b.cntrls,handler:function(){a.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===b.cntrls,handler:function(){a.change_settings({xcnt:-1})}},{text:"Off",checked:0===b.cntrls,handler:function(){a.change_settings({xcnt:0})}},{text:"LM Click",
checked:1===b.cntrls,handler:function(){a.change_settings({xcnt:1})}},{text:"Continuous",checked:2===b.cntrls,handler:function(){a.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===b.default_rubberbox_action,handler:function(){b.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===b.default_rubberbox_action,handler:function(){b.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:null===
b.default_rubberbox_action,handler:function(){b.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:"zoom"===b.default_rightclick_rubberbox_action,handler:function(){b.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:"select"===b.default_rightclick_rubberbox_action,handler:function(){b.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:null===b.default_rightclick_rubberbox_action,handler:function(){b.default_rightclick_rubberbox_action=
null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===b.default_rubberbox_mode,handler:function(){b.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===b.default_rubberbox_mode,handler:function(){b.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===b.default_rubberbox_mode,handler:function(){b.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!b.cross,handler:function(){b.cross=
!1}},{text:"On",checked:!0===b.cross,handler:function(){b.cross=!0}},{text:"Horizontal",checked:"horizontal"===b.cross,handler:function(){b.cross="horizontal"}},{text:"Vertical",checked:"vertical"===b.cross,handler:function(){b.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:b.wheelscroll_mode_natural,style:"checkbox",handler:function(){a.change_settings({wheelscroll_mode_natural:!b.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:b.cross,style:"checkbox",handler:function(){a.change_settings({cross:!b.cross})}},
{text:"GRID",checked:b.grid,style:"checkbox",handler:function(){a.change_settings({grid:!b.grid})}},{text:"INDEX Mode",checked:b.index,style:"checkbox",handler:function(){a.change_settings({index:!b.index})}},{text:"LEGEND",checked:b.legend,style:"checkbox",handler:function(){a.change_settings({legend:!b.legend})}},{text:"PAN Scrollbars",checked:b.pan,style:"checkbox",handler:function(){a.change_settings({pan:!b.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===
b.plab,handler:function(){a.change_settings({phunits:"R"})}},{text:"Degrees",checked:24===b.plab,handler:function(){a.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===b.plab,handler:function(){a.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:b.specs,style:"checkbox",handler:function(){a.change_settings({specs:!b.specs})}},{text:"P-Cuts",checked:b.p_cuts,style:"checkbox",handler:function(){1!==b.lyr[0].hcb["class"]&&(a.change_settings({p_cuts:!b.p_cuts}),!1===b.p_cuts&&(H(a),
b.element1.parentNode.removeChild(b.element1),b.element2.parentNode.removeChild(b.element2),b.ycut=void 0,b.xcut=void 0),b.parent.setAttribute("style","position:relative"))}},{text:"Large Colorbar",checked:b.lg_colorbar,style:"checkbox",handler:function(){a.change_settings({lg_colorbar:!b.lg_colorbar})}},{text:"XDIVisions...",handler:function(){y(a,"X Divisions:",function(a){var b=s.intValidator(a),D=q.trunc(c.width/2);return b.valid&&a>D?{valid:!1,reason:"Exceeds maximum number of divisions ("+D+
")."}:b},function(c){parseFloat(c)!==b.xdiv&&(""===c&&(c=1),b.xdiv=parseFloat(c));a.refresh()},b.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){y(a,"X Units:",function(a){console.log("The value is "+a);return s.intValidator(a)},function(c){parseFloat(c)!==b.xlab&&(0>c&&(c=0),b.xlab=parseFloat(c));a.refresh()},b.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){y(a,"Y Divisions:",function(a){var b=s.intValidator(a),D=q.trunc(c.height/2);return b.valid&&a>D?{valid:!1,
reason:"Exceeds maximum number of divisions ("+D+")."}:b},function(c){parseFloat(c)!==b.ydiv&&(""===c&&(c=1),b.ydiv=parseFloat(c));a.refresh()},b.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===c.origin,style:"checkbox",handler:function(){a.change_settings({yinv:4!==c.origin})}},{text:"YLABel...",handler:function(){y(a,"Y Units:",function(a){return s.intValidator(a)},function(c){parseFloat(c)!==b.ylab&&(0>c&&(c=0),b.ylab=parseFloat(c));a.refresh()},b.ylab,void 0,void 0,void 0)}},{text:"X-axis",
checked:b.show_x_axis,style:"checkbox",handler:function(){a.change_settings({show_x_axis:!b.show_x_axis})}},{text:"Y-axis",checked:b.show_y_axis,style:"checkbox",handler:function(){a.change_settings({show_y_axis:!b.show_y_axis})}},{text:"Readout",checked:b.show_readout,style:"checkbox",handler:function(){a.change_settings({show_readout:!b.show_readout})}},{text:"Invert Colors",checked:c.xi,style:"checkbox",handler:function(){s.invertbgfg(c)}}]}},h={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},
g=function(a){},f=0;f<q.Mc.colormap.length;f++)h.menu.items.push({text:q.Mc.colormap[f].name,cmap:f,checked:b.cmap===f,handler:g});var k=function(c){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var d=1;if(void 0!==c)d=Math.abs(a._Gx.lyr[c].thick);else{if(0===b.lyr.length)return;for(var d=Math.abs(a._Gx.lyr[0].thick),E=0;E<b.lyr.length;E++)if(d!==Math.abs(a._Gx.lyr[E].thick)){d=1;break}}y(a,"Line thickness:",s.intValidator,function(c){if(void 0!==d)a._Gx.lyr[d].line=3,a._Gx.lyr[d].thick=
-1*c,a._Gx.lyr[d].symbol=0;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].line=3,a._Gx.lyr[d].thick=-1*c,a._Gx.lyr[d].symbol=0},d)}},{text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==c?"red"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="red";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="red"}},{text:"Pink",checked:void 0!==c?"pink"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color=
"pink";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="pink"}},{text:"Hot Pink",checked:void 0!==c?"#ff009e"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="#ff009e";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="#ff009e"}},{text:"Orange",checked:void 0!==c?"orange"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="orange";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="orange"}},{text:"Yellow",checked:void 0!==
c?"yellow"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="yellow";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="yellow"}},{text:"Lime Green",checked:void 0!==c?"#80f741"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="#80f741";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="#80f741"}},{text:"Green",checked:void 0!==c?"green"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="green";else for(var d=
0;d<b.lyr.length;d++)a._Gx.lyr[d].color="green"}},{text:"Blue",checked:void 0!==c?"blue"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="blue";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="blue"}},{text:"Purple",checked:void 0!==c?"purple"===a._Gx.lyr[c].color:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].color="purple";else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color="purple"}},{text:"Custom Hexcode",handler:function(){y(a,"Color code (requires #):",
s.hexValidator,function(c){if(void 0!==d)a._Gx.lyr[d].color=c;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].color=c},void 0,void 0,void 0,void 0)}}]}},{text:"Dots...",handler:function(){var d=3;if(void 0!==c)d=Math.abs(a._Gx.lyr[c].radius);else{if(0===b.lyr.length)return;var E;for(E=0;E<b.lyr.length;E++)if(d!==Math.abs(a._Gx.lyr[E].radius)){d=3;break}}y(a,"Radius/Shape:",s.intValidator,function(d){var E;0>d?(E=3,d=Math.abs(d)):0<d?E=2:(E=1,d=0);if(void 0!==c)a._Gx.lyr[c].line=0,a._Gx.lyr[c].radius=
d,a._Gx.lyr[c].symbol=E;else{var X;for(X=0;X<b.lyr.length;X++)a._Gx.lyr[X].line=0,a._Gx.lyr[X].radius=d,a._Gx.lyr[X].symbol=E}},d)}},{text:"Radius...",handler:function(){var d=3;if(void 0!==c)d=Math.abs(a._Gx.lyr[c].radius);else{if(0===b.lyr.length)return;for(var E=0;E<b.lyr.length;E++)if(d!==Math.abs(a._Gx.lyr[E].radius)){d=3;break}}y(a,"Radius:",s.intValidator,function(d){d=0>d?Math.abs(d):0<d?d:0;if(void 0!==c)a._Gx.lyr[c].line=0,a._Gx.lyr[c].radius=d;else for(var E=0;E<b.lyr.length;E++)a._Gx.lyr[E].line=
0,a._Gx.lyr[E].radius=d},d)}},{text:"Solid...",handler:function(){var d=1;if(void 0!==c)d=Math.abs(a._Gx.lyr[c].thick);else{if(0===b.lyr.length)return;var d=Math.abs(a._Gx.lyr[0].thick),E;for(E=0;E<b.lyr.length;E++)if(d!==Math.abs(a._Gx.lyr[E].thick)){d=1;break}}y(a,"Line thickness:",s.intValidator,function(d){if(void 0!==c)a._Gx.lyr[c].line=3,a._Gx.lyr[c].thick=d,a._Gx.lyr[c].symbol=0;else{var E;for(E=0;E<b.lyr.length;E++)a._Gx.lyr[E].line=3,a._Gx.lyr[E].thick=d,a._Gx.lyr[E].symbol=0}},d)}},{text:"Toggle",
style:void 0!==c?"checkbox":void 0,checked:void 0!==c?a._Gx.lyr[c].display:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].display=!a._Gx.lyr[c].display;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].display=!a._Gx.lyr[d].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=0,a._Gx.lyr[c].symbol=0;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=
0,a._Gx.lyr[d].symbol=0}},{text:"Pixels",checked:void 0!==c?1===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=1,a._Gx.lyr[c].symbol=1;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=1,a._Gx.lyr[d].symbol=1}},{text:"Circles",checked:void 0!==c?2===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=2;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=2}},{text:"Squares",checked:void 0!==
c?3===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=3;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=3}},{text:"Plusses",checked:void 0!==c?4===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=4;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=4}},{text:"X's",checked:void 0!==c?5===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==
c)a._Gx.lyr[c].radius=4,a._Gx.lyr[c].symbol=5;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=5}},{text:"Triangles",checked:void 0!==c?6===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=6,a._Gx.lyr[c].symbol=6;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=6,a._Gx.lyr[d].symbol=6}},{text:"Downward Triangles",checked:void 0!==c?7===a._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].radius=6,a._Gx.lyr[c].symbol=
7;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].radius=6,a._Gx.lyr[d].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===a._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].line=0;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].line=0}},{text:"Verticals",checked:void 0!==c?1===a._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].line=1;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].line=
1}},{text:"Horizontals",checked:void 0!==c?2===a._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].line=2;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].line=2}},{text:"Connecting",checked:void 0!==c?3===a._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)a._Gx.lyr[c].line=3;else for(var d=0;d<b.lyr.length;d++)a._Gx.lyr[d].line=3}}]}},{text:"Thickness...",handler:function(){var d=1;void 0!==c&&(d=a._Gx.lyr[c].thick);y(a,"Thickness",s.intValidator,function(d){""===d&&(d=
1);d=Math.max(0,d);if(void 0!==c)a._Gx.lyr[c].thick=d;else for(var E=0;E<b.lyr.length;E++)a._Gx.lyr[E].thick=d},d,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var d=1;void 0!==c&&(d=a._Gx.lyr[c].opacity);y(a,"Opacity:",s.floatValidator,function(d){""===d&&(d=1);d=Math.max(0,d);d=Math.min(1,d);if(void 0!==c)a._Gx.lyr[c].opacity=d;else for(var E=0;E<b.lyr.length;E++)a._Gx.lyr[E].opacity=d},d,void 0,void 0,void 0)}}]}},g={text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var a=
[],c=0;c<b.plugins.length;c++){var d=b.plugins[c];d.impl.menu&&("function"===typeof d.impl.menu?a.push(d.impl.menu()):a.push(d.impl.menu))}return a}()}};s.menu(c,{title:"SIG-PLOT",finalize:function(){c.prompt||s.addEventListener(c,"mousedown",a.onmousedown,!1);a.refresh()},items:[{text:"Refresh"},d,X,e,{text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){a.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){t(a,s.SB_EXPAND,"YPAN")}},{text:"Shrink Range",
handler:function(){t(a,s.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){t(a,s.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){t(a,s.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){t(a,s.SB_SHRINK,"XPAN")}},{text:"Expand Full",handler:function(){t(a,s.SB_FULL,"XPAN")}}]}},{text:"Grid",handler:function(){a.change_settings({grid:!b.grid})}},A,h,{text:"Traces...",menu:function(){var b=a._Gx,c={title:"TRACE",items:[]};c.items.push({text:"All",
menu:k()});for(var d=0;d<b.lyr.length;d++)c.items.push({text:b.lyr[d].name,menu:k(d)});return c}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var b=a._Gx,c={title:"DEOVERLAY",items:[]};c.items.push({text:"Deoverlay All",handler:function(){a.deoverlay()}});for(var d=0;d<b.lyr.length;d++){var D=function(b){return function(){a.deoverlay(b)}}(d);c.items.push({text:b.lyr[d].name,handler:D})}return c}}]}},g,{text:"Keypress Info",handler:function(){s.message(c,
ia)}},{text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var b=a._Mx.active_canvas.toDataURL("image/png"),c=document.createElement("a");c.href=b;c.download="SigPlot."+(new Date).getTime()+".png";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}},{text:"JPG",handler:function(){var b=a._Mx.active_canvas.toDataURL("image/jpg"),c=document.createElement("a");c.href=b;c.download="SigPlot."+(new Date).getTime()+".jpg";c.display="none";document.body.appendChild(c);
c.click();document.body.removeChild(c)}},{text:"SVG",handler:function(){var b=a._Mx.active_canvas.toDataURL("image/svg"),c=document.createElement("a");c.href=b;c.download="SigPlot."+(new Date).getTime()+".svg";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}}]}},{text:"Exit",handler:function(){var a=document.createEvent("Event");a.initEvent("sigplotexit",!0,!0);s.dispatchEvent(c,a)}}]})}function r(a,b){var c=a._Gx,d=a._Mx;s.removeEventListener(d,"mousedown",a.onmousedown,
!1);s.menu(d,{title:c.lyr[b].name,finalize:function(){d.prompt||s.addEventListener(d,"mousedown",a.onmousedown,!1);a.refresh()},items:[{text:"Dashed...",handler:function(){var d=1;if(void 0!==b)d=Math.abs(a._Gx.lyr[b].thick);else{if(0===c.lyr.length)return;for(var d=Math.abs(a._Gx.lyr[0].thick),E=0;E<c.lyr.length;E++)if(d!==Math.abs(a._Gx.lyr[E].thick)){d=1;break}}y(a,"Line thickness:",s.intValidator,function(b){if(void 0!==d)a._Gx.lyr[d].line=3,a._Gx.lyr[d].thick=-1*b,a._Gx.lyr[d].symbol=0;else for(var d=
0;d<c.lyr.length;d++)a._Gx.lyr[d].line=3,a._Gx.lyr[d].thick=-1*b,a._Gx.lyr[d].symbol=0},d)}},{text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==b?"red"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="red";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="red"}},{text:"Pink",checked:void 0!==b?"pink"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="pink";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color=
"pink"}},{text:"Hot Pink",checked:void 0!==b?"#ff009e"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="#ff009e";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="#ff009e"}},{text:"Orange",checked:void 0!==b?"orange"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="orange";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="orange"}},{text:"Yellow",checked:void 0!==b?"yellow"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==
b)a._Gx.lyr[b].color="yellow";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="yellow"}},{text:"Lime Green",checked:void 0!==b?"#80f741"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="#80f741";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="#80f741"}},{text:"Green",checked:void 0!==b?"green"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="green";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="green"}},{text:"Blue",
checked:void 0!==b?"blue"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="blue";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="blue"}},{text:"Purple",checked:void 0!==b?"purple"===a._Gx.lyr[b].color:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].color="purple";else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color="purple"}},{text:"Custom Hexcode",handler:function(){y(a,"Color code (requires #):",s.hexValidator,function(b){if(void 0!==d)a._Gx.lyr[d].color=
b;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].color=b},void 0,void 0,void 0,void 0)}}]}},{text:"Solid...",handler:function(){var d=1;if(void 0!==b)d=Math.abs(a._Gx.lyr[b].thick);else{if(0===c.lyr.length)return;var d=Math.abs(a._Gx.lyr[0].thick),E;for(E=0;E<c.lyr.length;E++)if(d!==Math.abs(a._Gx.lyr[E].thick)){d=1;break}}y(a,"Line thickness:",s.intValidator,function(d){if(void 0!==b)a._Gx.lyr[b].line=3,a._Gx.lyr[b].thick=d,a._Gx.lyr[b].symbol=0;else{var E;for(E=0;E<c.lyr.length;E++)a._Gx.lyr[E].line=
3,a._Gx.lyr[E].thick=d,a._Gx.lyr[E].symbol=0}},d)}},{text:"Toggle",style:void 0!==b?"checkbox":void 0,checked:void 0!==b?a._Gx.lyr[b].display:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].display=!a._Gx.lyr[b].display;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].display=!a._Gx.lyr[d].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==b?0===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].radius=0,a._Gx.lyr[b].symbol=
0;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=0,a._Gx.lyr[d].symbol=0}},{text:"Pixels",checked:void 0!==b?1===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].radius=1,a._Gx.lyr[b].symbol=1;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=1,a._Gx.lyr[d].symbol=1}},{text:"Circles",checked:void 0!==b?2===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].radius=4,a._Gx.lyr[b].symbol=2;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=
4,a._Gx.lyr[d].symbol=2}},{text:"Squares",checked:void 0!==b?3===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].radius=4,a._Gx.lyr[b].symbol=3;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=3}},{text:"Plusses",checked:void 0!==b?4===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].radius=4,a._Gx.lyr[b].symbol=4;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=4}},{text:"X's",checked:void 0!==
b?5===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].radius=4,a._Gx.lyr[b].symbol=5;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=4,a._Gx.lyr[d].symbol=5}},{text:"Triangles",checked:void 0!==b?6===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].radius=6,a._Gx.lyr[b].symbol=6;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=6,a._Gx.lyr[d].symbol=6}},{text:"Downward Triangles",checked:void 0!==b?7===a._Gx.lyr[b].symbol:void 0,handler:function(){if(void 0!==
b)a._Gx.lyr[b].radius=6,a._Gx.lyr[b].symbol=7;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].radius=6,a._Gx.lyr[d].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==b?0===a._Gx.lyr[b].line:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].line=0;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].line=0}},{text:"Verticals",checked:void 0!==b?1===a._Gx.lyr[b].line:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].line=1;else for(var d=
0;d<c.lyr.length;d++)a._Gx.lyr[d].line=1}},{text:"Horizontals",checked:void 0!==b?2===a._Gx.lyr[b].line:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].line=2;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].line=2}},{text:"Connecting",checked:void 0!==b?3===a._Gx.lyr[b].line:void 0,handler:function(){if(void 0!==b)a._Gx.lyr[b].line=3;else for(var d=0;d<c.lyr.length;d++)a._Gx.lyr[d].line=3}}]}},{text:"Thickness...",handler:function(){var d=1;void 0!==b&&(d=a._Gx.lyr[b].thick);y(a,"Thickness",
s.intValidator,function(d){""===d&&(d=1);d=Math.max(0,d);if(void 0!==b)a._Gx.lyr[b].thick=d;else for(var E=0;E<c.lyr.length;E++)a._Gx.lyr[E].thick=d},d,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var d=1;void 0!==b&&(d=a._Gx.lyr[b].opacity);y(a,"Opacity:",s.floatValidator,function(d){""===d&&(d=1);d=Math.max(0,d);d=Math.min(1,d);if(void 0!==b)a._Gx.lyr[b].opacity=d;else for(var E=0;E<c.lyr.length;E++)a._Gx.lyr[E].opacity=d},d,void 0,void 0,void 0)}}]})}function e(a,b){return function(c,
d,e,g,A,h,q){var f=a._Mx,k=Math.min(d,g),u=Math.min(e,A),r=Math.abs(g-d),n=Math.abs(A-e),p=!1;c.which===b&&(p="horizontal"===q?2<r:"vertical"===q?2<n:2<r&&2<n);p?void 0===h||"zoom"===h?(a.pixel_zoom(d,e,g,A),a.refresh()):"select"===h&&(d=document.createEvent("Event"),d.initEvent("mtag",!0,!0),e=l(a,k,u),g=l(a,k+r,u+n),d.x=e.x,d.y=e.y,d.xpos=k,d.ypos=u,d.w=Math.abs(g.x-e.x),d.h=Math.abs(g.y-e.y),d.wpxl=r,d.hpxl=n,d.shift=c.shiftKey,s.dispatchEvent(f,d)):a.mouseup(c)}}function x(a,b){var c=a._Mx,d=
a._Gx;b.xlab||(b.xlab=0);b.ylab||(b.ylab=0);b.xlab=q.unit_lookup(b.xlab);b.ylab=q.unit_lookup(b.ylab);d.xmin=void 0===b.xmin?0:b.xmin;d.xmax=void 0===b.xmax?0:b.xmax;var e=void 0!==b.xmin,g=void 0!==b.xmax,A=void 0===b.cmode?"":b.cmode.toUpperCase();d.ylab=b.ylab;d.ylabel=b.ylabel;d.ymin=void 0===b.ymin?0:b.ymin;d.ymax=void 0===b.ymax?0:b.ymax;var h=void 0!==b.ymin,f=void 0!==b.ymax;d.zmin=b.zmin;d.zmax=b.zmax;var k=void 0!==b.zmin,l=void 0!==b.zmax;void 0!==b.colors&&s.setbgfg(c,b.colors.bg,b.colors.fg,
c.xi);void 0!==b.xi&&s.invertbgfg(c);d.forcelab=void 0===b.forcelab?!0:b.forcelab;d.all=void 0===b.all?!1:b.all;d.expand=void 0===b.expand?!1:b.expand;d.xlab=b.xlab;d.xlabel=b.xlabel;d.segment=void 0===b.segment?!1:b.segment;d.plab=24;var u=void 0===b.phunits?"D":b.phunits;"R"===u[0]?d.plab=23:"C"===u[0]&&(d.plab=25);d.xdiv=void 0===b.xdiv?5:b.xdiv;d.ydiv=void 0===b.ydiv?5:b.ydiv;d.xcompression=b.xcmp||0;d.rasterSmoothing=b.smoothing||!1;c.origin=1;b.yinv&&(c.origin=4);d.pmt=void 0===b.pmt?1:b.pmt;
d.bufmax=void 0===b.bufmax?32768:b.bufmax;d.sections=void 0===b.nsec?0:b.nsec;d.anno_type=void 0===b.anno_type?0:b.anno_type;d.xfmt=void 0===b.xfmt?"":b.xfmt;d.yfmt=void 0===b.yfmt?"":b.yfmt;d.index=void 0===b.index?!1:b.index;if(u=d.index||"IN"===A.slice(0,2))e&&1===d.xmin&&(e=!1),g&&1===d.xmin&&(g=!1);d.xdata=!1;d.note="";d.hold=0;d.always_show_marker=b.always_show_marker||!1;q.vstype("D");b.inputs||w(a,!1);d.cmode=0<d.lyr.length&&d.lyr[0].cx?1:3;if("MA"===A||"INMA"===A||"ABMA"===A||"__MA"===A||
"MAGNITUDE"===A)d.cmode=1;if("PH"===A||"INPH"===A||"ABPH"===A||"__PH"===A||"PHASE"===A)d.cmode=2;if("RE"===A||"INRE"===A||"ABRE"===A||"__RE"===A||"REAL"===A)d.cmode=3;if("IM"===A||"INIM"===A||"ABIM"===A||"__IM"===A||"IMAGINARY"===A)d.cmode=4;if("LO"===A||"D1"===A||"INLO"===A||"IND1"===A||"ABIM"===A||"ABD1"===A||"__LO"===A||"__D1"===A||"10*LOG10"===A)d.cmode=6;if("L2"===A||"D2"===A||"INL2"===A||"IND2"===A||"ABLO"===A||"ABD2"===A||"__L2"===A||"__D2"===A||"20*LOG10"===A)d.cmode=7;if("RI"===A||"IR"===
A||"INRI"===A||"INIR"===A||"ABRI"===A||"ABIR"===A||"__RI"===A||"__IR"===A||"IMAG/REAL"===A||"REAL/IMAG"===A)d.index?alert("Imag/Real mode not permitted in INDEX mode"):d.cmode=5;d.basemode=d.cmode;a.change_settings({cmode:d.cmode});d.dbmin=1E-20;if(6<=d.cmode){var r=10;7===d.cmode&&(r=20);"L"===A[0]||"1"===A[0]||"2"===A[0]?(0<d.lyr.length&&d.lyr[0].cx?(d.ymin=Math.max(d.ymin,1E-10),d.ymax=Math.max(d.ymax,1E-10)):(d.ymin=Math.max(d.ymin,1E-20),d.ymax=Math.max(d.ymax,1E-20)),d.ymin=q.log10(d.ymin)*
r,d.ymax=q.log10(d.ymax)*r):0<d.lyr.length&&d.lyr[0].cx?(d.ymin=Math.max(-18*r,d.ymin),d.ymax=Math.max(-18*r,d.ymax),d.dbmin=1E-37):Math.min(d.ymin,d.ymax)<-20*r&&(d.ymin=Math.max(-37*r,d.ymin),d.ymax=Math.max(-37*r,d.ymax),d.dbmin=Math.pow(10,Math.min(d.ymin,d.ymax)/r))}c.level=0;u&&!d.index&&(e&&(d.xmin=d.xstart+d.xdelta*(d.xmin-1)),e&&(d.xmax=d.xstart+d.xdelta*(d.xmax-1)));d.xmult=b.xmult;d.ymult=b.xmult;switch(b.autox){case "none":b.autox=-1;break;case "min":b.autox=1;break;case "max":b.autox=
2;break;case "full":b.autox=3}d.autox=void 0===b.autox?-1:b.autox;0>d.autox&&(d.autox=0,e||(d.autox+=1),g||(d.autox+=2));switch(b.autoy){case "none":b.autoy=-1;break;case "min":b.autoy=1;break;case "max":b.autoy=2;break;case "full":b.autoy=3}d.autoy=void 0===b.autoy?-1:b.autoy;0>d.autoy&&(d.autoy=0,h||(d.autoy+=1),f||(d.autoy+=2));switch(b.autoz){case "none":b.autoz=-1;break;case "min":b.autoz=1;break;case "max":b.autoz=2;break;case "full":b.autoz=3}d.autoz=void 0===b.autoz?-1:b.autoz;0>d.autoz&&
(d.autoz=0,k||(d.autoz+=1),l||(d.autoz+=2));d.autol=void 0===b.autol?-1:b.autol;e||(d.xmin=void 0);g||(d.xmax=void 0);W(a,{get_data:!0},d.xmin,d.xmax,d.xlab,d.ylab);e||(d.xmin=c.stk[0].xmin);g||(d.xmax=c.stk[0].xmax);h||(d.ymin=c.stk[0].ymin);f||(d.ymax=c.stk[0].ymax);d.xmin>d.xmax&&(c.stk[0].xmin=d.xmax,d.xmax=d.xmin,d.xmin=c.stk[0].xmin);d.ymin>d.ymax&&(c.stk[0].ymin=d.ymax,d.ymax=d.ymin,d.ymin=c.stk[0].ymin);c.stk[0].xmin=d.xmin;c.stk[0].xmax=d.xmax;c.stk[0].ymin=d.ymin;c.stk[0].ymax=d.ymax;d.panxmin=
Math.min(d.panxmin,d.xmin);d.panxmax=Math.max(d.panxmax,d.xmax);d.panymin=Math.min(d.panymin,d.ymin);d.panymax=Math.max(d.panymax,d.ymax);d.xmin=c.stk[0].xmin;d.ymin=c.stk[0].ymin;b.font_family&&(c.font_family=b.font_family);s.set_font(c,Math.min(7,c.width/64));d.ncolors=void 0===b.ncolors?16:b.ncolors;d.cmap=null;d.cmap=b.cmap?b.cmap:void 0===b.xc?-1:b.xc;m(a,d.cmap);d.cntrls="leftmouse"===b.xcnt?1:"continuous"===b.xcnt?2:void 0===b.xcnt?1:b.xcnt;d.default_rubberbox_mode=void 0===b.rubberbox_mode?
"box":b.rubberbox_mode;d.default_rubberbox_action=void 0===b.rubberbox_action?"zoom":b.rubberbox_action;d.default_rightclick_rubberbox_mode=void 0===b.rightclick_rubberbox_mode?"box":b.rightclick_rubberbox_mode;d.default_rightclick_rubberbox_action=void 0===b.rightclick_rubberbox_action?null:b.rightclick_rubberbox_action;d.cross=void 0===b.cross?!1:b.cross;d.grid=void 0===b.nogrid?!0:!b.nogrid;d.fillStyle=b.fillStyle;d.gridBackground=b.gridBackground;d.gridStyle=b.gridStyle;d.wheelZoom=b.wheelZoom;
d.wheelZoomPercent=b.wheelZoomPercent;d.legend=void 0===b.legend?!1:b.legend;d.no_legend_button=void 0===b.no_legend_button?!1:b.no_legend_button;d.legendBtnLocation=null;d.pan=void 0===b.nopan?!0:!b.nopan;d.nomenu=void 0===b.nomenu?!1:b.nomenu;d.modmode=0;d.modlayer=-1;d.modsource=0;d.modified=b.mod&&0<d.lyr.length;d.nmark=0;d.iabsc=0;d.index&&(d.iabsc=1);d.specs=!b.nospecs;d.scroll_time_interval=void 0===b.scroll_time_interval?d.scroll_time_interval:b.scroll_time_interval;d.autohide_readout=b.autohide_readout;
d.autohide_panbars=b.autohide_panbars;d.x_scrollbar_location=b.x_scrollbar_location;d.specs?(d.show_x_axis=!b.noxaxis,d.show_y_axis=!b.noyaxis,d.show_readout=!b.noreadout,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout?!0:!1):(d.show_x_axis=!1,d.show_y_axis=!1,d.show_readout=!1);d.hide_note=b.hide_note||!1;d.xmrk=0;d.ymrk=0;b.nodragdrop||(s.addEventListener(c,"dragover",function(b){b.preventDefault()},!1),s.addEventListener(c,"drop",function(b){return function(a){var c=a.dataTransfer.files;0<
c.length&&(a.preventDefault(),b.load_files(c))}}(a),!1))}function w(b,a){var c=b._Gx,d=b._Mx;if(a){var e=c.HCB[0];c.xstart=e.xstart;c.xdelta=e.xdelta}else c.xstart=0,c.xdelta=1,c.autol=-1;d.origin=1}function I(b){for(var a=b._Gx,c=b._Mx.canvas.getContext("2d"),d,e=0;e<a.plugins.length;)a.plugins[e].impl.refresh&&(d=a.plugins[e].canvas,d.width!==b._Mx.canvas.width&&(d.width=b._Mx.canvas.width),d.height!==b._Mx.canvas.height&&(d.height=b._Mx.canvas.height),0!==d.height&&0!==d.width&&(d.width!==b._Mx.canvas.width&&
(d.width=b._Mx.canvas.width),d.height!==b._Mx.canvas.height&&(d.height=b._Mx.canvas.height),d.getContext("2d").clearRect(0,0,d.width,d.height),a.plugins[e].impl.refresh(d),c.drawImage(d,0,0))),e+=1}function C(b){b=b._Gx;if(0===b.HCB.length)b.note="";else if(void 0===b.HCB[0].plotnote){for(var a=[],c=0;c<b.HCB.length;c++)b.HCB[c].file_name&&a.push(b.HCB[c].file_name);b.note=a.join("|").toUpperCase()}}function G(b,a){var c=b._Mx,d=b._Gx;if(!(a>=d.lyr.length)&&d.lyr[a].display&&0===d.hold){d.lyr[a].draw();
var e=document.createEvent("Event");e.initEvent("lyrdraw",!0,!0);e.index=a;e.name=d.lyr[a].name;e.layer=d.lyr[a];s.dispatchEvent(c,e)}}function z(b,a){var c=b._Gx,d=b._Mx,e=document.createEvent("Event");e.initEvent("lyrdel",!0,!0);e.index=a;e.name=c.lyr[a].name;e.layer=c.lyr[a];if(s.dispatchEvent(d,e)){c.lyr[a].ybufn=0;c.lyr[a].ybuf=null;if(a<c.lyr.length-1)for(d=a;d<c.lyr.length-1;d++)c.lyr[d]=c.lyr[d+1];c.lyr.length-=1;0<c.HCB.length&&(c.panxmin=1,c.panxmax=-1,c.panymin=1,c.panymax=-1)}}function H(b){var c=
b._Gx,d=b._Mx;if(2===c.lyr[0].hcb["class"]){var E=document.createEvent("Event");E.initEvent("x-cut",!1,!1);b.addListener("x-cut",function(){if(void 0===b._Gx.xcut){b._Gx.element1=document.createElement("div");document.getElementById(b._Gx.parent.id).appendChild(b._Gx.element1);b._Gx.xcut=new a.Plot(b._Gx.element1,{});var d=b._Gx.xcut.overlay_array(b._Gx.x_cut_data,null,{name:"x_cut_data",line:3});b._Gx.xcut.change_settings({specs:!c.specs});b._Gx.xcut.change_settings({grid:!c.grid});b._Gx.xcut.change_settings({pan:!c.pan});
b._Gx.xcut._Gx.x_box_x=b._Gx.x_box_x;b._Gx.xcut._Gx.x_box_y=b._Gx.x_box_y;b._Gx.xcut._Gx.x_box_h=b._Gx.x_box_h;b._Gx.xcut._Gx.x_box_w=b._Gx.x_box_w;b._Gx.xcut.change_settings({xcut_now:!c.xcut_now});b._Gx.xcut.get_layer(d).color=b._Mx.fg;b._Gx.element1.setAttribute("style","width:"+b._Gx.x_box_w+"px;height:"+b._Gx.x_box_h+"px;position:absolute;left:"+b._Gx.x_box_x+"px;top:"+b._Gx.x_box_y+"px")}else b._Gx.xcut.reload(0,b._Gx.x_cut_data)});var e=document.createEvent("Event");e.initEvent("y-cut",!1,
!1);b.addListener("y-cut",function(){if(void 0===b._Gx.ycut){b._Gx.element2=document.createElement("div");document.getElementById(b._Gx.parent.id).appendChild(b._Gx.element2);b._Gx.ycut=new a.Plot(b._Gx.element2,{});var d=b._Gx.ycut.overlay_array(b._Gx.y_cut_data,null,{name:"y_cut_data",line:3});b._Gx.ycut.change_settings({specs:!c.specs});b._Gx.ycut.change_settings({grid:!c.grid});b._Gx.ycut.change_settings({pan:!c.pan});b._Gx.ycut._Gx.y_box_x=b._Gx.y_box_x;b._Gx.ycut._Gx.y_box_y=b._Gx.y_box_y;b._Gx.ycut._Gx.y_box_h=
b._Gx.y_box_h;b._Gx.ycut._Gx.y_box_w=b._Gx.y_box_w;b._Gx.ycut.change_settings({ycut_now:!c.ycut_now});b._Gx.ycut.get_layer(d).color=b._Mx.fg;b._Gx.element2.setAttribute("style","width:"+b._Gx.y_box_h+"px;height:"+b._Gx.y_box_w+"px;position:absolute;left:"+(b._Gx.y_box_x+0.5*b._Gx.y_box_w-0.5*b._Gx.y_box_h)+"px;top:"+(b._Gx.y_box_y+0.5*b._Gx.y_box_h-0.5*b._Gx.y_box_w)+"px");b._Gx.element2.style.transform="rotate(90deg)"}else b._Gx.ycut.reload(0,b._Gx.y_cut_data)});var g=d.b-d.t,A=d.r-d.l,h=c.lyr[0].yframe,
q=c.lyr[0].xframe;if(c.p_cuts){if(d.xpos>=d.l&&d.xpos<=d.r&&c.p_cuts_xpos!==d.xpos||c.p_press){var f=0,f=0;if(void 0!==c.p_cuts_xpos){c.y_cut_data=[];for(f=Math.floor(q*(c.p_cuts_xpos-d.l)/A);f<q*h;f+=q)c.y_cut_data.push(c.lyr[0].zbuf[f]);s.dispatchEvent(d,e)}c.y_cut_data=[];for(f=Math.floor(q*(d.xpos-d.l)/A);f<q*h;f+=q)c.y_cut_data.push(c.lyr[0].zbuf[f]);s.dispatchEvent(d,e);c.p_cuts_xpos=d.xpos}if(d.ypos>=d.t&&d.ypos<=d.b&&c.p_cuts_ypos!==d.ypos||c.p_press)f=f=f=0,void 0!==c.p_cuts_ypos&&(f=Math.floor(h*
(c.p_cuts_ypos-d.t)/g),f*=q,c.x_cut_data=c.lyr[0].zbuf.slice(f,f+q),s.dispatchEvent(d,E)),f=Math.floor(h*(d.ypos-d.t)/g),f*=q,c.x_cut_data=c.lyr[0].zbuf.slice(f,f+q),s.dispatchEvent(d,E),c.p_cuts_ypos=d.ypos;c.p_press=!1}if(c.enabled_streaming_pcut){f=f=0;h=c.lyr[0].lps;c.y_cut_data=[];for(f=Math.floor(q*(d.xpos-d.l)/A);f<q*h;f+=q)c.y_cut_data.push(c.lyr[0].zbuf[f]);s.dispatchEvent(d,e);f=f=0;c.x_cut_data=[];f=Math.floor(h*(d.ypos-d.t)/g);f*=q;c.x_cut_data=c.lyr[0].zbuf.slice(f,f+q);s.dispatchEvent(d,
E)}}}function J(b){var a=b._Gx;b=b._Mx;a.cross&&(("vertical"===a.cross||!0===a.cross)&&b.xpos>=b.l&&b.xpos<=b.r&&a.cross_xpos!==b.xpos&&(void 0!==a.cross_xpos&&s.rubberline(b,a.cross_xpos,b.t,a.cross_xpos,b.b),s.rubberline(b,b.xpos,b.t,b.xpos,b.b),a.cross_xpos=b.xpos),("horizontal"===a.cross||!0===a.cross)&&b.ypos>=b.t&&b.ypos<=b.b&&a.cross_ypos!==b.ypos&&(void 0!==a.cross_ypos&&s.rubberline(b,b.l,a.cross_ypos,b.r,a.cross_ypos),s.rubberline(b,b.l,b.ypos,b.r,b.ypos),a.cross_ypos=b.ypos))}function S(b){var a=
b._Gx;b=b._Mx;if(null!==a.xmrk&&null!==a.ymrk){var c=s.real_to_pixel(b,a.xmrk,a.ymrk);if(1===a.lyr[0].hcb["class"]){if(c.clipped)return}else if(2===a.lyr[0].hcb["class"]&&(c.clipped_x||!c.clipped_y))return;var d=b.active_canvas.getContext("2d");d.beginPath();d.strokeStyle=b.xwfg;d.fillStyle=b.xwfg;d.arc(c.x,c.y,2,0,360);d.stroke();d.textBaseline="alphabetic";d.textAlign="left";d.fillStyle=b.fg;d.font=b.font.font;var e="x:"+s.format_g(a.xmrk,6,3,!0);d.fillText(e,c.x+5,c.y-5);e="y:"+s.format_g(a.ymrk,
6,3,!0);d.fillText(e,c.x+5,c.y-5+b.text_h)}}function da(b,a){var c=b._Mx,d=b._Gx;d.xdata=!1;for(var e=0;e<d.lyr.length;e++)d.lyr[e].xdata=5===a?!0:!1,d.lyr[e].xdata&&(d.xdata=!0);if(a!==d.cmode)if(5===a&&d.index)alert("Imag/Real mode not permitted in INDEX mode");else if(0>=d.lyr.length)d.cmode=a,M(b);else if(0<a){e=d.cmode;d.cmode=a;var f=d.autox,A=d.autoy;d.autox=3;d.autoy=3;if(5===a||5===e)d.panxmin=1,d.panxmax=-1,d.panymin=1,d.panymax=-1,c.level=0,a===d.basemode?(c.stk[0].xmin=d.xmin,c.stk[0].xmax=
d.xmax,c.stk[0].ymin=d.ymin,c.stk[0].ymax=d.ymax):5===a||5===d.basemode?W(b,{get_data:!0}):(c.stk[0].xmin=d.xmin,c.stk[0].xmax=d.xmax,W(b,{get_data:!0},d.xmin,d.xmax));else for(a===d.basemode?(d.panymin=1,d.panymax=-1,c.stk[0].ymin=d.ymin,c.stk[0].ymax=d.ymax):W(b,{},c.stk[c.level].xmin,c.stk[c.level].xmax),e=1;e<=c.level;e++)c.stk[e].ymin=c.stk[0].ymin,c.stk[e].ymax=c.stk[0].ymax;d.autox=f;d.autoy=A;b.refresh()}}function aa(b){var a,c=b._Mx,d=b._Gx;if(d.pan&&!c.widget){a=c.level;var e={ps:c.stk[a].ymin,
pe:c.stk[a].ymax},f=e.ps!==d.panymin||e.pe!==d.panymax,f=f&&0<c.level;!d.autohide_panbars||f&&b.mouseOnCanvas||d.panning?(s.scrollbar(c,0,d.pyl,d.pyl+d.pthk,c.t,c.b,e,d.panymin,d.panymax,void 0,c.scrollbar_y),c.stk[a].ymin=e.ps,c.stk[a].ymax=e.pe):(e=c.canvas.getContext("2d"),e.fillStyle=c.bg,e.fillRect(d.pyl,c.t,d.pyl+d.pthk,c.b-c.t));d.pl<c.width&&(e={ps:c.stk[a].xmin,pe:c.stk[a].xmax},f=(f=e.ps!==d.panxmin||e.pe!==d.panxmax)&&(!d.all||0<c.level),!d.autohide_panbars||f&&b.mouseOnCanvas||d.panning?
(s.scrollbar(c,0,d.pl,d.pr,d.pt,d.pt+d.pthk,e,d.panxmin,d.panxmax,void 0,c.scrollbar_x),c.stk[a].xmin=e.ps,c.stk[a].xmax=e.pe):(e=c.canvas.getContext("2d"),e.fillStyle=c.bg,e.fillRect(d.pl,d.pt-1,d.pr-d.pl,d.pthk+4)))}}function Z(b,a,c,d){var e=b._Mx,f=b._Gx,A,g,h,q;q=new s.SCROLLBAR;g=new s.SCROLLBAR;var k=!1;A=e.level;0<f.panmode?(q.flag=11,g.flag=11):(q.flag=-12,g.flag=-12);0===c&&(q.action=0,g.action=0);if("Y"===a.substring(0,1)){if(q=e.stk[A].ymin,c=e.stk[A].ymax,h=c-q,"YPAN"===a?(a=e.scrollbar_y,
c={ps:q,pe:c},s.scrollbar(e,g,f.pyl,f.pyl+f.pthk,e.t,e.b,c,f.panymin,f.panymax,d,a),q=c.ps,c=c.pe,0!==g.action&&s.scroll(e,g,s.XW_UPDATE,void 0,a)):"YCENTER"===a&&(q-=h*(e.ypos-(e.t+e.b)/2)/(e.b-e.t),c=q+h),q!==e.stk[A].ymin||c!==e.stk[A].ymax)e.stk[A].ymin=q,e.stk[A].ymax=c,f.cmode===f.basemode&&1===e.level&&(f.ymin=Math.min(f.ymin,q),f.ymax=Math.max(f.ymax,c)),this.inPan=!0,d=document.createEvent("Event"),d.initEvent("ypan",!0,!0),d.level=e.level,d.xmin=e.stk[e.level].xmin,d.ymin=e.stk[e.level].ymin,
d.xmax=e.stk[e.level].xmax,d.ymax=e.stk[e.level].ymax,s.dispatchEvent(e,d),this.inPan=!1,b.refresh(),k=!0}else if(g=e.stk[A].xmin,c=e.stk[A].xmax,h=c-g,"XPAN"===a?(a=e.scrollbar_x,c={ps:g,pe:c},s.scrollbar(e,q,f.pl,f.pr,f.pt,f.pt+f.pthk,c,f.panxmin,f.panxmax,d,a),g=c.ps,c=c.pe,0!==q.action&&s.scroll(e,q,s.XW_UPDATE,void 0,a)):"XCENTER"===a&&(g+=h*(e.xpos-(e.l+e.r)/2)/(e.r-e.l),g!==e.stk[A].xmin&&(c=g+h)),e.stk[A].xmin!==g||e.stk[A].xmax!==c)e.stk[A].xmin=g,e.stk[A].xmax=c,f.xdata||1!==e.level||(f.xmin=
e.stk[1].xmin,f.xmax=e.stk[1].xmax),this.inPan=!0,d=document.createEvent("Event"),d.initEvent("xpan",!0,!0),d.level=e.level,d.xmin=e.stk[e.level].xmin,d.ymin=e.stk[e.level].ymin,d.xmax=e.stk[e.level].xmax,d.ymax=e.stk[e.level].ymax,s.dispatchEvent(e,d),this.inPan=!1,b.refresh(),k=!0;return k}function U(b,a,c){var d=b._Mx,e=b._Gx,f,g,q;if("XPAN"===a)q=b._Mx.scrollbar_x;else if("YPAN"===a)q=b._Mx.scrollbar_y;else throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";q.flag=-12;g=
d.level;"XPAN"===a?(f=d.stk[g].xmin,g=d.stk[g].xmax):"YPAN"===a?(f=d.stk[g].ymin,g=d.stk[g].ymax):g=f=void 0;var h=q;h.action=s.SB_DRAG;if("YPAN"===a){var k=d.scrollbar_y.trange/d.scrollbar_y.h;4===h.origin&&(k*=-1);c=c.screenY-e.panning.ypos;c*=k;e.panning.ymin-c<e.panymin?(g=e.panymin+(g-f),f=e.panymin):e.panning.ymax-c>e.panymax?(f=e.panymax-(g-f),g=e.panymax):(f=e.panning.ymin-c,g=e.panning.ymax-c)}else"XPAN"===a&&(k=d.scrollbar_x.trange/d.scrollbar_x.w,3===h.origin&&(k*=-1),c=c.screenX-e.panning.xpos,
c*=k,e.panning.xmin+c<e.panxmin?(g=e.panxmin+(g-f),f=e.panxmin):e.panning.xmax+c>e.panxmax?(f=e.panxmax-(g-f),g=e.panxmax):(f=e.panning.xmin+c,g=e.panning.xmax+c));q.smin=f;q.srange=g-f;s.redrawScrollbar(q,d,void 0);n(b,q.smin,q.smin+q.srange,a.slice(0,1));this.inPan=!0;e=document.createEvent("Event");"XPAN"===a?e.initEvent("xpan",!0,!0):"YPAN"===a&&e.initEvent("ypan",!0,!0);e.level=d.level;e.xmin=d.stk[d.level].xmin;e.ymin=d.stk[d.level].ymin;e.xmax=d.stk[d.level].xmax;e.ymax=d.stk[d.level].ymax;
s.dispatchEvent(d,e);this.inPan=!1;q.action=0;b.refresh()}function y(b,a,c,d,e,f,g,q){var h=b._Mx;if(h.prompt)throw"Prompt already exists! Can only have one prompt at a time!";s.disableListeners(h);b.disable_listeners();var k=function(b,a){return function(c){a(c);s.enableListeners(h);b.enable_listeners();b.refresh();void 0!==q&&q()}},l=function(){b.refresh()};try{s.prompt(h,a,c,k(b,d),l,e,f,g,5E3)}catch(u){console.log("ERROR: Failed to set up prompt due to: "+u)}}function M(b){var a=b._Mx,c=b._Gx,
d=a.canvas.getContext("2d");0===c.sections&&(c.isec=0);if(a.warpbox){var e=l(b,a.warpbox.xo,a.warpbox.yo),f=l(b,a.warpbox.xl,a.warpbox.yl);c.aretx=e.x;c.arety=e.y;c.dretx=f.x-e.x;c.drety=f.y-e.y}else c.aretx=c.retx,c.arety=c.rety,c.dretx=c.retx-c.xmrk,c.drety=c.rety-c.ymrk;5===c.cmode&&1===c.iabsc&&(c.iabsc=2);1===c.iabsc?(c.aretx=Math.round((c.aretx-c.xstart)/c.xdelta),c.index||(c.aretx+=1),c.dretx=Math.round(c.dretx/c.xdelta)):2===c.iabsc&&(0!==c.aretx&&(c.aretx=1/c.aretx),0!==c.arety&&(c.arety=
1/c.arety),0!==c.dretx&&(c.dretx=1/c.dretx),0!==c.drety&&(c.drety=1/c.drety));if(c.show_readout&&!a.widget&&(d.fillStyle=a.bg,f=Math.floor(a.height-2.5*a.text_h),d.fillRect(a.text_w,f-1,49*a.text_w,f+1.5*a.text_h),f=Math.floor(a.height-0.5*a.text_h),e=Math.max(c.pr+a.text_w,a.width-2*a.text_w),d.fillStyle=a.bg,d.fillRect(e,f-a.text_h,a.text_w,a.text_h),!c.autohide_readout||b.mouseOnCanvas||c.panning)){var g;0===c.iabsc&&4===c.ylab?(f=(q.sec2tspec(c.arety)+"                ").substring(0,16),g=(q.sec2tspec(c.drety,
"delta")+"                ").substring(0,16)):(f=s.format_g(c.arety,16,9,!0),g=s.format_g(c.drety,16,9));0===c.iabsc&&4===c.xlab?(d=(q.sec2tspec(c.aretx)+"                ").substring(0,16),b=(q.sec2tspec(c.dretx,"delta")+"                ").substring(0,16)):(d=s.format_g(c.aretx,16,9,!0),b=s.format_g(c.dretx,16,9));g="y: "+f+" dy: "+g+" L="+a.level+" "+ja[c.cmode-1];d="x: "+d+" dx: "+b+" "+ka[c.iabsc];3===c.iabsc&&(g=0===c.dretx?g.substr(0,20)+"sl: Inf             "+g.substr(40,g.length):g.substr(0,
20)+"sl: "+s.format_g(c.drety/c.dretx,16,9)+g.substr(40,g.length));f=Math.floor(a.height-1.5*a.text_h);s.text(a,a.text_w,f,g);f=Math.floor(a.height-0.5*a.text_h);s.text(a,a.text_w,f,d);s.LEGACY_RENDER&&e<a.width&&(0<c.cntrls?s.text(a,e,f,"C"):s.text(a,e,f," "));g=f=b=e=0;if(c.lg_colorbar&&2===c.lyr[0].hcb["class"]){d=a.b-a.t;e=a.r+35;b=a.t+0.125*d;f=5*a.text_w;g=0.75*d;d=a.active_canvas.getContext("2d");d.strokeStyle="rgba(124, 123, 121, 0.8)";d.fillStyle=" rgba(124, 123, 121, 0.8)";var h=f,k=g,u=
h-2,r=u/2,h=e+(h-u)/2,n=b-10;d.beginPath();d.moveTo(h,n);d.lineTo(h+u,n);d.lineTo(h+0.5*u,n-r);d.lineTo(h,n);d.stroke();d.fill();k=n+k+20;d.beginPath();d.moveTo(h,k);d.lineTo(h+u,k);d.lineTo(h+0.5*u,k+r);d.lineTo(h,k);d.stroke();d.fill();c.cbb_top_x1=h;c.cbb_top_y1=n;c.cbb_bot_x1=h;c.cbb_bot_y1=k;c.cbb_width=u;c.cbb_height=r}else e=49*a.text_w-3,b=a.height-2.5*a.text_h,f=a.text_w,g=2*a.text_h;s.colorbar(a,e,b,f,g);(c.p_cuts||c.enabled_streaming_pcut)&&2===c.lyr[0].hcb["class"]&&(d=a.b-a.t,e=a.r-a.l,
c.y_box_x=a.r+25,c.y_box_y=a.t,c.y_box_w=5*a.text_w+20,c.y_box_h=d,c.lg_colorbar&&(c.y_box_x+=100),s.draw_box(a,a.fg,c.y_box_x+0.5,c.y_box_y,c.y_box_w,c.y_box_h),c.x_box_x=a.l,c.x_box_y=a.b+25,c.x_box_w=e,c.x_box_h=5*a.text_h+20,s.draw_box(a,a.fg,c.x_box_x+0.5,c.x_box_y,c.x_box_w,c.x_box_h))}}function W(b,a,c,d,e,f){var g=b._Mx;b=b._Gx;a=!0===a.get_data;b.panxmin=1;b.panxmax=-1;b.panymin=1;b.panymax=-1;var h=void 0===c,q=void 0===d;if(0===b.lyr.length)b.panxmin=-1,b.panxmax=1,b.panymin=-1,b.panymax=
1;else for(void 0===e&&(b.xlab=b.lyr[0].xlab),void 0===f&&(b.ylab=b.lyr[0].ylab),e=0;e<b.lyr.length;e++)if(h&&(c=b.lyr[e].xmin),q&&(d=b.lyr[e].xmax),b.xlab!==b.lyr[e].xlab&&(b.xlab=0),b.ylab!==b.lyr[e].ylab&&(b.ylab=0),a&&b.lyr[e].get_data(c,d),0<b.autox||0<b.autoy)for(;c<d;)b.lyr[e].get_data(c,d),f=b.lyr[e].prep(c,d),b.all&&b.expand?0===b.lyr[e].size?c=d:b.index?c+=f:0<=b.lyr[e].xdelta?c+=b.lyr[e].size*b.lyr[e].xdelta:d+=b.lyr[e].size*b.lyr[e].xdelta:c=d;else b.lyr[e].prep(1,-1);e=b.panxmax-b.panxmin;
0>e&&(b.panxmax=b.panxmin,b.panxmin=b.panxmax+e,e=-e);1E-20>=e&&(b.panxmin-=1,b.panxmax+=1);0!==(b.autox&1)&&h&&(g.stk[0].xmin=b.panxmin);if(0!==(b.autox&2)&&q&&(g.stk[0].xmax=b.panxmax,!b.all&&!b.xdata))for(e=0;e<b.lyr.length;e++)d=Math.min(b.lyr[e].xmax,g.stk[0].xmax),f=Math.abs((d-b.lyr[e].xmin)/b.lyr[e].xdelta)-b.bufmax+1,0<f&&(g.stk[0].xmax=d-f*Math.abs(b.lyr[e].xdelta));0!==(b.autoy&1)&&(g.stk[0].ymin=b.panymin);0!==(b.autoy&2)&&(g.stk[0].ymax=b.panymax)}function l(b,a,c){var d=b._Gx;b=s.pixel_to_real(b._Mx,
a,c);d.index&&(b.x*=d.xdelta);return b}function B(b,a,c,d,e,f){return b>=c&&b<=c+e&&a>=d&&a<=d+f}function N(b,a,c,d,e,f,g,h){g=[g-c,h-d];e=[e-c,f-d];d=[b-c,a-d];b=g[0]*g[0]+g[1]*g[1];a=g[0]*e[0]+g[1]*e[1];g=g[0]*d[0]+g[1]*d[1];c=e[0]*e[0]+e[1]*e[1];e=e[0]*d[0]+e[1]*d[1];d=1/(b*c-a*a);c=(c*g-a*e)*d;g=(b*e-a*g)*d;return 0<=c&&0<=g&&1>c+g}function p(b,a){var c=!1,d=b._Gx,e=b._Mx,f=0,g=0;if(void 0===a){if(f=e.xpos,g=e.ypos,!b.mouseOnCanvas)return!1}else f=a.x,g=a.y;var h=" ";if(!d.pan)return!1;var k=
g<=d.pt+d.pthk+2,l=g>d.pt-2,g=g>=e.t&&g<=e.b,s=f>=d.pl&&f<=d.pr,u=d.show_readout||"bottom"===d.x_scrollbar_location;f>e.r&&g?(h="YPAN",d.lg_colorbar&&2===d.lyr[0].hcb["class"]?c=f>e.r+100?!0:!1:(e.xpos=d.pyl+q.trunc(d.pthk/2),c=!0)):u&&s&&l?(h="XPAN",e.ypos=d.pt+q.trunc(d.pthk/2),c=!0):!u&&s&&k&&(h="XPAN",e.ypos=d.pt+q.trunc(d.pthk/2),c=!0);return{inPanRegion:c,command:h}}function F(b){var a=!1;b=b._Mx;var c=b.xpos,d=b.ypos,e=b.text_h,f=b.text_w,g=" ";c<b.l-f&&d<=b.b&&d>=b.t?(g="YCENTER",a=!0):d>
b.b+q.trunc(0.5*f)&&d<=b.b+q.trunc(q.trunc(3*e)/2)&&c>=b.l&&c<=b.r&&(g="XCENTER",a=!0);return{inCenterRegion:a,command:g}}function h(b,a){var c,d,e;a.origin&1?(e=b.x-a.x,a.origin&2&&(e=a.w-e)):(e=b.y-a.y,2>=a.origin&&(e=a.h-e));d=s.scroll_real2pix(a);c=d.s1;d=d.sw;return e>=c&&e<=c+d?!0:!1}function t(b,a,c){var d=b._Mx,e;"XPAN"===c?e=d.scrollbar_x:"YPAN"===c&&(e=d.scrollbar_y);e.action=a;e.step=0.1*e.srange;e.page=9*e.step;e.scale=2;s.scroll(d,e,s.XW_COMMAND,void 0,e);n(b,e.smin,e.smin+e.srange,c.slice(0,
1));this.inPan=!0;b=document.createEvent("Event");"XPAN"===c?b.initEvent("xpan",!0,!0):"YPAN"===c&&b.initEvent("ypan",!0,!0);b.level=d.level;b.xmin=d.stk[d.level].xmin;b.ymin=d.stk[d.level].ymin;b.xmax=d.stk[d.level].xmax;b.ymax=d.stk[d.level].ymax;s.dispatchEvent(d,b);this.inPan=!1}function n(b,a,c,d){var e=b._Mx,f=b._Gx,g=e.level;if("X"===d){if(e.stk[g].xmin!==a||e.stk[g].xmax!==c)e.stk[g].xmin=a,e.stk[g].xmax=c,f.xdata||1!==e.level||(f.xmin=e.stk[1].xmin,f.xmax=e.stk[1].xmax),b.refresh()}else"Y"!==
d||a===e.stk[g].ymin&&c===e.stk[g].ymax||(e.stk[g].ymin=a,e.stk[g].ymax=c,f.cmode===f.basemode&&1===e.level&&(f.ymin=Math.min(f.ymin,a),f.ymax=Math.max(f.ymax,c)),b.refresh())}var v=T("spin"),$=T("./common"),g=T("./bluefile"),u=T("./matfile"),q=T("./m"),s=T("./mx"),fa=T("./sigplot.layer1d"),ga=T("./sigplot.layer2d");a.bluefile=g;a.matfile=u;a.m=q;a.mx=s;a.Layer1D=fa;a.Layer2D=ga;a.version="2.0.0rc";var ia="Keypress Table:\n--------------\n?       - Main help box.\nA       - Toggle display x,y readouts:\n          (absc) -> (index) -> (1/absc) -> (time).\nB       - Toggle LM Drag Mode:\n          (box) -> (horizontal) -> (vertical).\nC       - Toggle controls.\nK       - Show Marker.\nL       - Toggle legend.\nM       - Pops up main menu\nR       - Toggle display specs (x/y readout)\nS       - Toggle display specs and axes.\nT       - Popup box with timecode value at mouse.\nX       - In 1D mode, popup box with X value at mouse.\n        - In 2D mode, toggle x-cut display.\nY       - In 1D mode, popup box with Y value at mouse.\n        - In 2D mode, toggle y-cut display.\nP       - In 2D mode, displays p-cuts along side and bottom.\nF       - Toggle fullscreen.\nCntrl+I - Invert colors.";
a.browserIsCompatible=function(){var b=document.createElement("canvas").getContext?!0:!1,a="ArrayBuffer"in window;return b&&a};a.Plot=function(g,D){if(!a.browserIsCompatible())throw"Browser is not compatible";var u=this._Mx=s.open(g);this._Gx=new k;this._Gx.parent=g;this.mouseOnCanvas=!1;D||(D={});x(this,D);this._refresh();this.onmousemove=function(b){return function(a){var c=b._Mx,d=b._Gx,e=a.target.getBoundingClientRect(),f=void 0===a.offsetX?a.pageX-e.left-window.scrollX:a.offsetX;a=void 0===a.offsetX?
a.pageY-e.top-window.scrollY:a.offsetY;e=l(b,f,a);d.retx=e.x;d.rety=e.y;c.widget||(M(b),e=document.createEvent("Event"),e.initEvent("mmove",!0,!0),e.xpos=f,e.ypos=a,e.x=d.retx,e.y=d.rety,s.dispatchEvent(c,e)&&(d.cross&&(c.warpbox?(void 0!==d.cross_xpos&&s.rubberline(c,d.cross_xpos,c.t,d.cross_xpos,c.b),void 0!==d.cross_ypos&&s.rubberline(c,c.l,d.cross_ypos,c.r,d.cross_ypos),d.cross_xpos=void 0,d.cross_ypos=void 0):b.mouseOnCanvas&&(J(b),d.p_cuts&&2===d.lyr[0].hcb["class"]&&(d.y_cut_press_on||d.x_cut_press_on||
H(b)))),2===d.cntrls&&(e=document.createEvent("Event"),e.initEvent("mtag",!0,!0),e.x=d.retx,e.y=d.rety,e.xpos=f,e.ypos=a,s.dispatchEvent(c,e))))}}(this);this.throttledOnMouseMove=q.throttle(this._Gx.scroll_time_interval,this.onmousemove);s.addEventListener(u,"mousemove",this.throttledOnMouseMove,!1);this.onmouseout=function(b){return function(a){a=b._Gx;var c=b._Mx;b.mouseOnCanvas&&(b.mouseOnCanvas=!1,a.autohide_readout&&M(b),a.autohide_panbars&&aa(b),c.prompt&&c.prompt.input.enableBlur())}}(this);
s.addEventListener(u,"mouseout",this.onmouseout,!1);this.onmouseover=function(b){return function(a){a=b._Gx;var c=b._Mx;b.mouseOnCanvas=!0;a.autohide_panbars&&aa(b);c.prompt&&c.prompt.input.disableBlur()}}(this);s.addEventListener(u,"mouseover",this.onmouseover,!1);this.onmousedown=function(b){return function(a){a.preventDefault();var d=b._Mx,g=b._Gx;d.widget&&"ONESHOT"===d.widget.type&&(d.widget=null,b.refresh());s.ifevent(d,a);var D=document.createEvent("Event");D.initEvent("mdown",!0,!0);D.xpos=
d.xpos;D.ypos=d.ypos;D.x=g.retx;D.y=g.rety;D.which=a.which;if(!s.dispatchEvent(d,D))return!1;var V=p(b);if(V.inPanRegion){if(a.preventDefault()," "!==V.command){var k=null,D=null;"XPAN"===V.command?k=d.scrollbar_x:"YPAN"===V.command&&(k=d.scrollbar_y);if(2===a.which)D={x:d.xpos,y:d.ypos},void 0!==k&&h(D,k)&&c(b,V.command);else if(" "!==V.command&&(D={x:d.xpos,y:d.ypos},!h(D,k)&&1===a.which)){Z(b,V.command,0,a);var l=function(){h({x:d.xpos,y:d.ypos},k)?g.stillPanning&&(window.clearInterval(g.stillPanning),
g.repeatPanning=void 0):Z(b,V.command,0,a)};g.stillPanning=window.setTimeout(function(){g.repeatPanning=window.setInterval(l,50)},250)}}}else if(1===a.which||3===a.which){D=!1;g.legendBtnLocation&&(D=B(d.xpos,d.ypos,g.legendBtnLocation.x,g.legendBtnLocation.y,g.legendBtnLocation.width,g.legendBtnLocation.height));if(g.lg_colorbar&&2===g.lyr[0].hcb["class"]&&(1===a.which||3===a.which)){var u=d.xpos,r=d.ypos,n=g.cbb_top_x1,m=g.cbb_top_y1;if(N(u,r,n,m,n+g.cbb_width,m,n+0.5*g.cbb_width,m-g.cbb_height)){n=
g.cmap;b.get_layer(0).img=void 0;console.log(q.Mc.colormap[n]);n=q.Mc.colormap[n];for(m=0;m<n.colors.length;m++)n.colors[m].pos+=5;s.colormap(d,n.colors,16);b.refresh()}n=g.cbb_bot_x1;m=g.cbb_bot_y1;if(N(u,r,n,m,n+g.cbb_width,m,n+0.5*g.cbb_width,m+g.cbb_height)){n=g.cmap;n=q.Mc.colormap[n];b.get_layer(0).img=void 0;for(m=0;m<n.colors.length;m++)n.colors[m].pos-=5;s.colormap(d,n.colors,16);b.refresh()}}D?b.change_settings({legend:!g.legend}):(M(b),D={opacity:0,return_value:"zoom"},u={opacity:0.4,fill_color:d.hi,
return_value:"select"},1===a.which?"zoom"===g.default_rubberbox_action?s.rubberbox(d,e(b,a.which),g.default_rubberbox_mode,D,u):"select"===g.default_rubberbox_action&&s.rubberbox(d,e(b,a.which),g.default_rubberbox_mode,u,D):3===a.which&&("zoom"===g.default_rightclick_rubberbox_action?s.rubberbox(d,e(b,a.which),g.default_rightclick_rubberbox_mode,D,u):"select"===g.default_rightclick_rubberbox_action&&s.rubberbox(d,e(b,a.which),g.default_rightclick_rubberbox_mode,u,D)))}else 2===a.which&&(g.nomenu||
f(b));return!1}}(this);s.addEventListener(u,"mousedown",this.onmousedown,!1);this.ontouchstart=function(b){return function(a){a.preventDefault();if(1===a.targetTouches.length)if(u.touchClear&&u.touches)window.clearTimeout(u.touchClear),b.unzoom(),t(b,s.SB_FULL,"XPAN"),t(b,s.SB_FULL,"YPAN");else{var c=a.targetTouches[0],d=c.target.getBoundingClientRect(),c={x:c.pageX-d.left-window.scrollX,y:c.pageY-d.top-window.scrollY};u.xpos=q.bound(c.x,0,u.width);u.ypos=q.bound(c.y,0,u.height);p(b,c).inPanRegion||
(u.touches=a.targetTouches)}else 2===a.targetTouches.length&&(u.touch_distance=q.touch_distance(a.targetTouches[0],a.targetTouches[1]))}}(this);s.addEventListener(u,"touchstart",this.ontouchstart,!1);this.ontouchmove=function(b){return function(a){var c=b._Mx,d=b._Gx,e=c.level;a.preventDefault();if(1===a.targetTouches.length){var g=c.touches[0].target.getBoundingClientRect();a=a.targetTouches[0];g=a.target.getBoundingClientRect();a={x:a.pageX-g.left-window.scrollX,y:a.pageY-g.top-window.scrollY};
var f=q.bound(a.x,0,c.width),h=q.bound(a.y,0,c.height),D=f-c.xpos,g=h-c.ypos;c.xpos=f;c.ypos=h;p(b,a).inPanRegion||(a=c.stk[e].xscl*D,h=c.stk[e].yscl*g,1===c.origin?a*=-1:2===c.origin?h*=-1:3===c.origin?h*=-1:4===c.origin&&(a*=-1,h*=-1),g=c.stk[e].xmin+a,a=c.stk[e].xmax+a,f=c.stk[e].ymin+h,h=c.stk[e].ymax+h,g>=d.xmin&&a<=d.xmax&&(c.stk[e].xmin=g,c.stk[e].xmax=a),f>=d.ymin&&h<=d.ymax&&(c.stk[e].ymin=f,c.stk[e].ymax=h),d.cmode===d.basemode&&1===c.level&&(d.xmin=Math.min(d.xmin,g),d.xmax=Math.max(d.xmax,
a),d.ymin=Math.min(d.ymin,f),d.ymax=Math.max(d.ymax,h)),b.refresh())}else 2===a.targetTouches.length&&(g=q.touch_distance(a.targetTouches[0],a.targetTouches[1]),h=0.05*(1-c.touch_distance/g),a=c.stk[e].xmax-c.stk[e].xmin,D=c.stk[e].ymax-c.stk[e].ymin,g=c.stk[e].xmin+h*a,a=c.stk[e].xmax-h*a,f=c.stk[e].ymin+h*D,h=c.stk[e].ymax-h*D,c.stk[e].xmin=Math.max(d.xmin,g),c.stk[e].xmax=Math.min(d.xmax,a),c.stk[e].ymin=Math.max(d.ymin,f),c.stk[e].ymax=Math.min(d.ymax,h),b.refresh())}}(this);this.throttledOnTouchMove=
q.throttle(this._Gx.scroll_time_interval,this.ontouchmove);s.addEventListener(u,"touchmove",this.throttledOnTouchMove,!1);this.ontouchend=function(b){return function(a){var c=b._Gx,d=b._Mx;a.preventDefault();console.log("on touch end ",a.targetTouches.length);c.panning=void 0;b._Mx.scrollbar_x.action=0;b._Mx.scrollbar_y.action=0;d.touch_distance=void 0;s.widget_callback(d,a);d.touchClear=window.setTimeout(function(){d.touches=void 0;d.touchClear=void 0},100)}}(this);s.addEventListener(u,"touchend",
this.ontouchend,!1);this.docMouseUp=function(b){return function(a){var c=b._Gx;1===a.which&&(c.panning=void 0,b._Mx.scrollbar_x.action=0,b._Mx.scrollbar_y.action=0);c.stillPanning&&(window.clearTimeout(c.stillPanning),c.stillPanning=void 0);c.repeatPanning&&(window.clearInterval(c.repeatPanning),c.repeatPanning=void 0);return!1}}(this);document.addEventListener("mouseup",this.docMouseUp,!1);this.mouseup=function(b){return function(a){a.preventDefault();var c=b._Gx,d=b._Mx;s.ifevent(b._Mx,a);var e=
document.createEvent("Event");e.initEvent("mup",!0,!0);e.xpos=d.xpos;e.ypos=d.ypos;e.x=c.retx;e.y=c.rety;e.which=a.which;if((e=s.dispatchEvent(d,e))&&!(d.warpbox||d.widget||d.prompt))if(1===a.which)e=F(b),e.inCenterRegion?" "!==e.command&&Z(b,e.command,0,a):1===c.cntrls&&(c.xmrk=c.retx,c.ymrk=c.rety,e=document.createEvent("Event"),e.initEvent("mtag",!0,!0),e.x=c.xmrk,e.y=c.ymrk,e.xpos=a.x||a.clientX,e.ypos=a.y||a.clientY,e.w=void 0,e.h=void 0,e.shift=a.shiftKey,s.dispatchEvent(d,e),b.redraw());else if(2===
a.which){if(c.nomenu&&(e=document.createEvent("Event"),e.initEvent("showmenu",!0,!0),e.x=a.x||a.clientX,e.y=a.y||a.clientY,e=s.dispatchEvent(d,e))){a.stopPropagation&&a.stopPropagation();a.cancelBubble=!0;s.removeEventListener(d,"mousedown",b.onmousedown,!1);var g=function(){try{var a=document.createEvent("Event");a.initEvent("hidemenu",!0,!0);s.dispatchEvent(d,a)&&s.addEventListener(d,"mousedown",b.onmousedown,!1)}finally{document.removeEventListener("mouseup",g,!1)}};document.addEventListener("mouseup",
g,!1)}}else 3===a.which&&(a.preventDefault(),b.unzoom(1),b.refresh())}}(this);s.addEventListener(u,"mouseup",this.mouseup,!1);this.mouseclick=function(b){return function(a){a.preventDefault();var c=b._Gx,d=b._Mx;s.ifevent(b._Mx,a);var e=document.createEvent("Event");e.initEvent("mclick",!0,!0);e.xpos=d.xpos;e.ypos=d.ypos;e.x=c.retx;e.y=c.rety;e.which=a.which;s.dispatchEvent(d,e);return!1}}(this);s.addEventListener(u,"click",this.mouseclick,!1);this.mousedblclick=function(b){return function(a){a.preventDefault();
var c=b._Gx,d=b._Mx;s.ifevent(b._Mx,a);var e=document.createEvent("Event");e.initEvent("mdblclick",!0,!0);e.xpos=d.xpos;e.ypos=d.ypos;e.x=c.retx;e.y=c.rety;e.which=a.which;s.dispatchEvent(d,e);return!1}}(this);s.addEventListener(u,"dblclick",this.mousedblclick,!1);this.dragMouseDownHandler=function(b){return function(a){var c=b._Mx,d=b._Gx,e=p(b);if(e.inPanRegion&&(a.preventDefault()," "!==e.command)){var g;"XPAN"===e.command?g=c.scrollbar_x:"YPAN"===e.command&&(g=c.scrollbar_y);var f={x:c.xpos,y:c.ypos};
void 0!==g&&h(f,g)&&1===a.which&&(d.panning={axis:e.command,xpos:a.screenX,ypos:a.screenY,xmin:c.stk[c.level].xmin,xmax:c.stk[c.level].xmax,ymin:c.stk[c.level].ymin,ymax:c.stk[c.level].ymax})}}}(this);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);this.dragMouseMoveHandler=function(b){return function(a){var c=b._Gx;if(void 0!==c.panning)try{U(b,c.panning.axis,a)}catch(d){console.log("Error: "+d)}}}(this);this.throttledDragOnMouseMove=q.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler);
window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);this.dragMouseUpHandler=function(b){return function(a){var c=b._Gx;1===a.which&&(c.panning=void 0)}}(this);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);this.onresize=function(b){return function(a){s.checkresize(b._Mx)&&b.refresh()}}(this);this.wheelHandler=function(b){var a=b._Mx,c=b._Gx,d=q.throttle(100,function(d){var e;"XPAN"===d.command?e=a.scrollbar_x:"YPAN"===d.command&&(e=a.scrollbar_y);e.action=c.wheelscroll_mode_natural?
0>event.deltaY?s.SB_WHEELDOWN:s.SB_WHEELUP:0>event.deltaY?s.SB_WHEELUP:s.SB_WHEELDOWN;e.step=0.1*e.srange;e.page=9*e.step;s.scroll(a,e,s.XW_COMMAND,void 0,e);n(b,e.smin,e.smin+e.srange,d.command.slice(0,1))}),e=q.throttle(100,function(){var a=c.wheelZoomPercent||0.2;c.wheelscroll_mode_natural?0<event.deltaY&&(a*=-1):0>event.deltaY&&(a*=-1);"x"===c.wheelZoom?b.percent_zoom(a,1,!0):"y"===c.wheelZoom?b.percent_zoom(1,a,!0):b.percent_zoom(a,a,!0)});return function(g){s.ifevent(a,g);var f=p(b);b.mouseOnCanvas&&
(g.preventDefault(),f.inPanRegion?d(f):c.wheelZoom&&e())}}(this);window.addWheelListener(window,this.wheelHandler,!1);window.addEventListener("resize",this.onresize,!1);D.nokeypress||(this.onkeypress=function(a){return function(c){var e=a._Mx,g=a._Gx;if(a.mouseOnCanvas&&(!e.widget||"MENU"!==e.widget.type))if(e.widget&&"ONESHOT"===e.widget.type)e.widget=null,a.refresh();else{var h=$.getKeyCode(c),D=document.createEvent("Event");D.initEvent("plotkeypress",!0,!0);D.keyCode=h;D.shiftKey=c.shiftKey;D.ctrlKey=
c.ctrlKey;D.altKey=c.altKey;D.metaKey=c.metaKey;if(D=s.dispatchEvent(e,D))if(97===h)g.iabsc=(g.iabsc+1)%4,M(a);else if(108===h)a.change_settings({legend:!g.legend});else if(103===h)a.change_settings({grid:!g.grid});else if(98===h||2===h)e.warpbox&&(e.warpbox.mode="box"===e.warpbox.mode?"horizontal":"horizontal"===e.warpbox.mode?"vertical":"box",s.redraw_warpbox(e));else if(99===h)a.change_settings({xcnt:-1*g.cntrls});else if(114===h)a.change_settings({show_readout:!g.show_readout});else if(115===
h)a.change_settings({specs:!g.specs});else if(112===h)1!==g.lyr[0].hcb["class"]&&(g.p_press=!0,g.lyr[0].buf.length===g.lyr[0].hcb.subsize?a.change_settings({enabled_streaming_pcut:!g.enabled_streaming_pcut}):a.change_settings({p_cuts:!g.p_cuts}));else if(120===h)if(g.x_cut_press_on){g.x_cut_press_on=!1;g.ylabel=g.ylabel_stash;g.xlabel=g.xlabel_stash;for(e=0;e<g.xcut_layer;e++)a._Gx.lyr[e].display=!a._Gx.lyr[e].display;z(a,a._Gx.xcut_layer);a.rescale();a.refresh();g.xcut_layer=void 0;a.change_settings({drawmode:g.old_drawmode,
autol:g.old_autol})}else if("pop-up"===g.xyKeys)g.x_pop_now?g.x_pop_now=!1:(b(a),g.x_pop_now=!0);else if(1===g.lyr[0].hcb["class"]&&"automatic"===g.xyKeys)g.x_pop_now?g.x_pop_now=!1:(b(a),g.x_pop_now=!0);else{if("disable"!==g.xyKeys&&2===g.lyr[0].hcb["class"]&&!g.y_cut_press_on){g.p_cuts||(g.x_cut_data=[],D=e.r-e.l,h=g.lyr[0].lps,c=g.lyr[0].xframe,e=Math.floor(h*(e.ypos-e.t)/(e.b-e.t))*c,g.x_cut_data=g.lyr[0].zbuf.slice(e,e+c));e=[];for(c=0;c<g.x_cut_data.length;c++)h=g.x_cut_data[c],h*=-1,e.push(h);
g.old_drawmode=g.lyr[0].drawmode;g.old_autol=g.autol;a.change_settings({drawmode:"undefined",autol:-1});g.ylabel_stash=g.ylabel;c=0<g.lyr.length&&g.lyr[0].cx;g.ylabel=1===g.cmode?q.UNITS[28][0]:2===g.cmode?g.plab:3===g.cmode&&c?q.UNITS[21][0]:4===g.cmode?q.UNITS[22][0]:5===g.cmode?q.UNITS[22][0]:6===g.cmode?q.UNITS[26][0]:7===g.cmode?q.UNITS[27][0]:"Intensity";g.xlabel_stash=g.xlabel;g.xlabel="None"!==q.UNITS[g.xlab][0]&&"Unknown"!==q.UNITS[g.xlab][0]?q.UNITS[g.xlab][0]:"Frequency";g.xlabel+="    CURRENTLY IN X_CUT MODE";
g.xcut_layer=a.overlay_array(e,null,{name:"x_cut_data",line:3});g.xcut_layer=g.lyr.length-1;for(e=0;e<g.xcut_layer;e++)a._Gx.lyr[e].display=!a._Gx.lyr[e].display;g.x_cut_press_on=!0;a.rescale()}}else if(121===h)if(g.y_cut_press_on){g.y_cut_press_on=!1;g.ylabel=g.ylabel_stash;g.xlabel=g.xlabel_stash;for(e=0;e<g.ycut_layer;e++)a._Gx.lyr[e].display=!a._Gx.lyr[e].display;z(a,a._Gx.ycut_layer);a.rescale();a.refresh();g.ycut_layer=void 0;a.change_settings({drawmode:g.old_drawmode,autol:g.old_autol})}else if("pop-up"===
g.xyKeys)g.y_pop_now?g.y_pop_now=!1:(d(a),g.y_pop_now=!0);else if(1===g.lyr[0].hcb["class"]&&"automatic"===g.xyKeys)g.y_pop_now?g.y_pop_now=!1:(d(a),g.y_pop_now=!0);else{if("disable"!==g.xyKeys&&2===g.lyr[0].hcb["class"]&&!g.x_cut_press_on){if(!g.p_cuts)for(g.y_cut_data=[],D=e.r-e.l,h=g.lyr[0].lps,c=g.lyr[0].xframe,g.y_cut_data=[],e=Math.floor(c*(e.xpos-e.l)/D);e<c*h;e+=c)g.y_cut_data.push(g.lyr[0].zbuf[e]);e=[];for(c=0;c<g.y_cut_data.length;c++)h=g.y_cut_data[c],h*=-1,e.push(h);g.old_drawmode=g.lyr[0].drawmode;
g.old_autol=g.autol;a.change_settings({drawmode:"undefined",autol:-1});g.ylabel_stash=g.ylabel;c=0<g.lyr.length&&g.lyr[0].cx;g.ylabel=1===g.cmode?q.UNITS[28][0]:2===g.cmode?g.plab:3===g.cmode&&c?q.UNITS[21][0]:4===g.cmode?q.UNITS[22][0]:5===g.cmode?q.UNITS[22][0]:6===g.cmode?q.UNITS[26][0]:7===g.cmode?q.UNITS[27][0]:"Intensity";g.xlabel_stash=g.xlabel;g.xlabel="None"!==q.UNITS[g.ylab][0]&&"Unknown"!==q.UNITS[g.ylab][0]?q.UNITS[g.ylab][0]:"Time";g.xlabel+="    CURRENTLY IN Y_CUT MODE";g.ycut_layer=
a.overlay_array(e,null,{name:"y_cut_data",line:3});g.ycut_layer=g.lyr.length-1;for(e=0;e<g.ycut_layer;e++)a._Gx.lyr[e].display=!a._Gx.lyr[e].display;g.y_cut_press_on=!0;a.rescale()}}else 122===h?(g=a._Gx,e=a._Mx,g.zmin&&g.zmax&&(c="",c=1===g.lyr.length?"Z = "+g.lyr[0].get_z(g.retx,g.rety).toString():"TODO",s.message(e,c))):116===h?(g=a._Gx,e=a._Mx,0<g.lyr.length&&(c=g.lyr[0].hcb,1!==c["class"]||1!==c.xunits&&4!==c.xunits?2!==c["class"]||1!==c.yunits&&4!==c.yunits?s.message(e,"Time = UNK"):s.message(e,
"Time = "+q.sec2tod(c.timecode+g.rety),!0):s.message(e,"Time = "+q.sec2tod(c.timecode+g.retx),!0))):109===h?g.nomenu||(D=document.createEvent("Event"),D.initEvent("showmenu",!0,!0),D.x=e.x,D.y=e.y,(D=s.dispatchEvent(e,D))&&f(a)):63===h?s.message(e,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the 'M' key to open the main menu.View the function of all keypresses by selecting 'Keypress Info' from the main menu."):
102===h?(c=0,g.p_cuts&&(a.change_settings({p_cuts:!g.p_cuts}),c=1),s.fullscreen(e),a.refresh(),1===c&&a.change_settings({p_cuts:!g.p_cuts})):9===h&&c.ctrlKey?a.change_settings({invert:null}):107===h&&(g.show_marker=!g.show_marker,a.redraw())}}}(this),$.setKeypressHandler(this.onkeypress));return this};a.Plot.prototype={add_plugin:function(b,a){void 0===a&&(a=Number.MAX_VALUE);if(0>=a)throw"Invalid plugin zorder";b.init(this);var c=document.createElement("canvas");c.width=this._Mx.canvas.width;c.height=
this._Mx.canvas.height;this._Gx.plugins.push({impl:b,zorder:a,canvas:c});this._Gx.plugins.sort(function(b,a){return b.zorder-a.zorder});this.refresh()},remove_plugin:function(b){for(var a=this._Gx.plugins.length;a--;)this._Gx.plugins[a].impl===b&&(b.dispose&&b.dispose(),this._Gx.plugins[a].canvas.parentNode&&this._Gx.plugins[a].canvas.parentNode.removeElement(this._Gx.plugins[a].canvas),this._Gx.plugins.splice(a,1));this._Gx.plugins.sort(function(b,a){return b.zorder-a.zorder});this.refresh()},addListener:function(b,
a){s.addEventListener(this._Mx,b,a,!1)},removeListener:function(b,a){s.removeEventListener(this._Mx,b,a,!1)},change_settings:function(b){for(var a=this._Gx,c=this._Mx,d=0;d<a.lyr.length;d++)a.lyr[d].change_settings(b);void 0!==b.xyKeys&&(a.xyKeys=null===b.xyKeys?"automatic":b.xyKeys);void 0!==b.grid&&(a.grid=null===b.grid?!a.grid:b.grid);void 0!==b.gridBackground&&(a.gridBackground=b.gridBackground);void 0!==b.gridStyle&&(a.gridStyle=b.gridStyle);void 0!==b.wheelZoom&&(a.wheelZoom=b.wheelZoom);void 0!==
b.wheelZoomPercent&&(a.wheelZoomPercent=b.wheelZoomPercent);void 0!==b.autol&&(a.autol=b.autol);void 0!==b.index&&b.index!==a.index&&(a.index=null===b.index?!a.index:b.index,a.index&&1!==a.iabsc?a.iabsc=1:a.index||1!==a.iabsc||(a.iabsc=0),W(this,{get_data:!1},void 0,void 0),this.unzoom());void 0!==b.all&&(a.all=null===b.all?!a.all:b.all);void 0!==b.show_x_axis&&(a.show_x_axis=null===b.show_x_axis?!a.show_x_axis:b.show_x_axis,a.specs=a.show_x_axis||a.show_y_axis||a.show_readout);void 0!==b.show_y_axis&&
(a.show_y_axis=null===b.show_y_axis?!a.show_y_axis:b.show_y_axis,a.specs=a.show_x_axis||a.show_y_axis||a.show_readout);void 0!==b.show_readout&&(a.show_readout=null===b.show_readout?!a.show_readout:b.show_readout,a.specs=a.show_x_axis||a.show_y_axis||a.show_readout);void 0!==b.specs&&(a.specs=null===b.specs?!a.specs:b.specs,a.specs?(a.show_x_axis=!0,a.show_y_axis=!0,a.show_readout=!0):(a.show_x_axis=!1,a.show_y_axis=!1,a.show_readout=!1));void 0!==b.xcnt&&(a.cntrls="leftmouse"===b.xcnt?1:"continuous"===
b.xcnt?2:"disable"===b.xcnt&&0<a.cntrls?-1*a.cntrls:"enable"===b.xcnt&&0>a.cntrls?-1*a.cntrls:b.xcnt);void 0!==b.legend&&(a.legend=null===b.legend?!a.legend:b.legend);void 0!==b.pan&&(a.pan=null===b.pan?!a.pan:b.pan);void 0!==b.cross&&(a.cross=null===b.cross?!a.cross:b.cross,a.cross?(a.cross_xpos=void 0,a.cross_ypos=void 0,!c.warpbox&&this.mouseOnCanvas&&J(this)):(void 0!==a.cross_xpos&&s.rubberline(c,a.cross_xpos,c.t,a.cross_xpos,c.b),void 0!==a.cross_ypos&&s.rubberline(c,c.l,a.cross_ypos,c.r,a.cross_ypos),
a.cross_xpos=void 0,a.cross_ypos=void 0));d=void 0===b.cmode?"":b.cmode;"string"===typeof d&&(d=(d+"").toUpperCase());if(void 0!==b.cmode){a.cmode=0<a.lyr.length&&a.lyr[0].cx?1:3;if("MA"===d||"INMA"===d||"ABMA"===d||"__MA"===d||"MAGNITUDE"===d||1===d)a.cmode=1;if("PH"===d||"INPH"===d||"ABPH"===d||"__PH"===d||"PHASE"===d||2===d)a.cmode=2;if("RE"===d||"INRE"===d||"ABRE"===d||"__RE"===d||"REAL"===d||3===d)a.cmode=3;if("IM"===d||"INIM"===d||"ABIM"===d||"__IM"===d||"IMAGINARY"===d||4===d)a.cmode=4;if("LO"===
d||"D1"===d||"INLO"===d||"IND1"===d||"ABIM"===d||"ABD1"===d||"__LO"===d||"__D1"===d||"10*LOG10"===d||6===d)a.cmode=6;if("L2"===d||"D2"===d||"INL2"===d||"IND2"===d||"ABLO"===d||"ABD2"===d||"__L2"===d||"__D2"===d||"20*LOG10"===d||7===d)a.cmode=7;if("RI"===d||"IR"===d||"INRI"===d||"INIR"===d||"ABRI"===d||"ABIR"===d||"__RI"===d||"__IR"===d||"IMAG/REAL"===d||"REAL/IMAG"===d||5===d)a.index?alert("Imag/Real mode not permitted in INDEX mode"):a.cmode=5;a.basemode=a.cmode;da(this,a.cmode)}if(void 0!==b.phunits){var e=
b.phunits,d=this._Gx,g=this._Mx,f=d.plab;"R"===e?f=23:"D"===e&&(f=24);"C"===e&&(f=25);if(f!==d.plab&&(e=[Math.PI,180,0.5],e=e[f-23]/e[d.plab-23],d.plab=f,2===d.cmode)){for(f=0;f<=g.level;f++)g.stk[f].ymin*=e,g.stk[f].ymax*=e,g.stk[f].yscl*=e;d.panymin*=e;d.panymax*=e;this.refresh()}}void 0!==b.rubberbox_action&&(a.default_rubberbox_action=b.rubberbox_action);void 0!==b.rubberbox_mode&&(a.default_rubberbox_mode=b.rubberbox_mode);void 0!==b.rightclick_rubberbox_action&&(a.default_rightclick_rubberbox_action=
b.rightclick_rubberbox_action);void 0!==b.rightclick_rubberbox_mode&&(a.default_rightclick_rubberbox_mode=b.rightclick_rubberbox_mode);void 0!==b.wheelscroll_mode_natural&&(a.wheelscroll_mode_natural=b.wheelscroll_mode_natural);void 0!==b.colors&&(b.colors.fg||(b.colors.fg=c.fg),b.colors.bg||(b.colors.bg=c.bg),s.setbgfg(c,b.colors.bg,b.colors.fg,c.xi));void 0!==b.cmap&&(a.cmap=null===b.cmap?2===a.cmode?2:1:b.cmap,m(this,a.cmap));void 0!==b.yinv&&(c.origin=b.yinv?4:1);void 0!==b.rasterSmoothing&&(a.rasterSmoothing=
null===b.rasterSmoothing?!a.rasterSmoothing:b.rasterSmoothing);void 0!==b.fillStyle&&(a.fillStyle=b.fillStyle);void 0!==b.invert&&(null===b.invert?s.invertbgfg(c):!0===b.invert?s.setbgfg(this,"white","black"):s.setbgfg(this,"black","white"));void 0!==b.nomenu&&(a.nomenu=null===b.nomenu?!a.nomenu:b.nomenu);void 0!==b.ymax&&(null===b.ymax?(a.autoy|=2,a.panymax=void 0,W(this,{}),a.ymax=a.panymax):(a.autoy&=13,a.ymax=b.ymax,n(this,c.stk[0].ymin,b.ymax,"Y"),this.redraw()));void 0!==b.ymin&&(null===b.ymin?
(a.autoy|=1,a.panymin=void 0,W(this,{}),a.ymin=a.panymin):(a.autoy&=14,a.ymin=b.ymin,n(this,b.ymin,c.stk[0].ymax,"Y"),this.redraw()));void 0!==b.autoy&&(a.autoy=b.autoy,0!==(a.autoy&1)&&(a.ymin=void 0),0!==(a.autoy&2)&&(a.ymax=void 0));void 0!==b.xmin&&(n(this,b.xmin,c.stk[0].xmax,"X"),a.autox&=2,this.redraw());void 0!==b.xmax&&(n(this,c.stk[0].xmin,b.xmax,"X"),a.autox&=1,this.redraw());void 0!==b.zmin&&(a.zmin=b.zmin,a.autoz&=2);void 0!==b.zmax&&(a.zmax=b.zmax,a.autoz&=1);void 0!==b.autoz&&(a.autoz=
b.autoz,0!==(a.autoz&1)&&(a.zmin=void 0),0!==(a.autoz&2)&&(a.zmax=void 0));void 0!==b.note&&(a.note=b.note);void 0!==b.lg_colorbar&&(a.lg_colorbar=!a.lg_colorbar);void 0!==b.enabled_streaming_pcut&&(a.enabled_streaming_pcut=!a.enabled_streaming_pcut,!1===a.enabled_streaming_pcut&&(a.lyr[0].zbuf=[],null===a.element1.parentNode&&document.getElementById(this._Gx.parent.id).appendChild(this._Gx.element1),null===a.element2.parentNode&&document.getElementById(this._Gx.parent.id).appendChild(this._Gx.element2),
a.element1.parentNode.removeChild(a.element1),a.element2.parentNode.removeChild(a.element2),a.ycut=void 0,a.xcut=void 0),a.parent.setAttribute("style","position:relative"));void 0!==b.p_cuts&&(a.p_cuts=!a.p_cuts,!1===a.p_cuts&&(null===a.element1.parentNode&&document.getElementById(this._Gx.parent.id).appendChild(this._Gx.element1),null===a.element2.parentNode&&document.getElementById(this._Gx.parent.id).appendChild(this._Gx.element2),a.element1.parentNode.removeChild(a.element1),a.element2.parentNode.removeChild(a.element2),
a.ycut=void 0,a.xcut=void 0),a.parent.setAttribute("style","position:relative"));void 0!==b.xcut_now&&(a.xcut_now=!a.xcut_now);void 0!==b.ycut_now&&(a.ycut_now=!a.ycut_now);this.refresh();void 0!==b.pan&&M(this)},reread:function(){for(var a=this._Gx,b=[],c=0;c<a.lyr.length;c++)b[c]=a.lyr[c];c=a.HCB.slice();this.deoverlay();for(var d=0;d<c.length;d++)this.overlay_bluefile(c[d]);for(c=0;c<a.lyr.length;c++)a.lyr[c].symbol=b[c].symbol,a.lyr[c].radius=b[c].radius;this.refresh();a=document.createEvent("Event");
a.initEvent("reread",!0,!0);s.dispatchEvent(this._Mx,a)},cleanup:function(){},reload:function(a,b,c,d){var e=this._Mx,g=this._Gx;0>a||a>=g.lyr.length||void 0===g.lyr[a].reload||(a=g.lyr[a].reload(b,c),0===e.level&&W(this,{get_data:!1},a.xmin,a.xmax),d?this._refresh():this.refresh())},rescale:function(){0===this._Mx.level&&W(this,{get_data:!1},void 0,void 0);this.refresh()},headermod:function(a,b){this.change_settings(b);this.push(a,[],b)},push:function(a,b,c,d,e){var g=this._Mx,f=this._Gx;if(!(0>
a||a>=f.lyr.length)&&void 0!==f.lyr[a].push&&!1!==f.lyr[a].display){var h=c;c&&(h=JSON.parse(JSON.stringify(c)),0===b.length&&(h.xmin=g.stk[a].xmin,h.xmax=g.stk[a].xmax,h.ymin=g.stk[a].ymin,h.ymax=g.stk[a].ymax));a=f.lyr[a].push(b,h,d);0===g.level&&a&&W(this,{get_data:!1});e?(f.enabled_streaming_pcut&&H(this),this._refresh()):(f.enabled_streaming_pcut&&H(this),this.refresh())}},overlay_array:function(a,b,c){q.log.debug("Overlay array");a=q.initialize(a,b);return this.overlay_bluefile(a,c)},overlay_pipe:function(a,
b){q.log.debug("Overlay pipe");a||(a={});a.pipe=!0;var c=q.initialize(null,a);return this.overlay_bluefile(c,b)},overlay_websocket:function(a,b,c){q.log.debug("Overlay websocket: "+a);a=new WebSocket(a,"plot-data");a.binaryType="arraybuffer";var d=this;b||(b={});b.pipe=!0;var e=q.initialize(null,b);e.ws=a;var g=this.overlay_bluefile(e,c);a.onopen=function(a){};a.onmessage=function(a){return function(a){a.data instanceof ArrayBuffer?(a=e.createArray(a.data),d.push(g,a)):"string"===typeof a.data&&(d._Gx.lyr[g].hcb||
q.log.warning("Couldn't find header for layer "+g),a=JSON.parse(a.data),d.push(g,[],a))}}(a);return g},overlay_href:function(a,b,c){q.log.debug("Overlay href: "+a);try{this.show_spinner();var d=function(b,d){return function(e){try{if(e){var g;g=a.endsWith(".mat")?b.overlay_matfile(e,c):b.overlay_bluefile(e,c);d&&d(e,g)}else alert("Failed to load data")}finally{b.hide_spinner()}}}(this,b);(a.endsWith(".mat")?new u.MatFileReader:new g.BlueFileReader).read_http(a,d)}catch(e){console.error(e),alert("Failed to load data"),
this.hide_spinner()}},show_spinner:function(){this._Gx.spinner||(ha.color=this._Mx.xwfg,this._Gx.spinner=(new v(ha)).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop();this._Gx.spinner=void 0},add_layer:function(a){var b=this._Gx,c=this._Mx,d=document.createEvent("Event");d.initEvent("lyradd",!0,!0);d.index=b.lyr.length;d.name=a.name;d.layer=a;s.dispatchEvent(c,d)&&b.lyr.push(a)},get_layer:function(a){var b=this._Gx;return 0<=a&&a<b.lyr.length?b.lyr[a]:null},
overlay_matfile:function(a,b){q.log.debug("Overlay matfile: "+a.file_name);return this.overlay_array(a.dview)},overlay_bluefile:function(a,b){q.log.debug("Overlay bluefile: "+a.file_name);var c=this._Mx,d=this._Gx;b=b||{};var e=0===d.HCB.length;d.HCB.push(a);1===d.HCB.length&&w(this,!0);var g=d.lyr.length;void 0===b.layerType?1===a["class"]?fa.overlay(this,a,b):2===a["class"]&&ga.overlay(this,a,b):"1D"===b.layerType?fa.overlay(this,a,b):"2D"===b.layerType?ga.overlay(this,a,b):b.layerType.overlay(this,
a,b);da(this,d.cmode);if(e||b.expand)if(0===d.HCB.length)w(this,!1);else{d.basemode=d.cmode;var f,h;0===(d.autox&1)&&(f=d.xmin);0===(d.autox&2)&&(h=d.xmin);W(this,{get_data:!0},f,h);c.level=0;0!==(d.autox&1)&&(d.xmin=c.stk[0].xmin);0!==(d.autox&2)&&(d.xmax=c.stk[0].xmax);0!==(d.autoy&1)&&(d.ymin=c.stk[0].ymin);0!==(d.autoy&2)&&(d.ymax=c.stk[0].ymax);c.resize=!0;c.origin=d.lyr[0].preferred_origin?d.lyr[0].preferred_origin:1}else for(c=g;c<d.lyr.length;c++)G(this,c);C(this);this.refresh();return d.HCB.length-
1},load_files:function(a,b){for(var c=function(a){return function(c){a.overlay_bluefile(c,b)}}(this),d=0;d<a.length;d++){var e=a[d];(new g.BlueFileReader).read(e,c)}},deoverlay:function(a){var b=this._Gx;if(0<b.HCB.length)if(void 0===a)for(a=b.HCB.length-1;0<=a;a--)this.remove_layer(a);else if(0>a){a=b.HCB.length+a;if(0>a)return;this.remove_layer(a)}else a<b.HCB.length&&this.remove_layer(a);0===b.lyr.length&&(w(this,!1),W(this,{}))},remove_layer:function(a){var b=this._Gx,c="",d=null;if(0<=a&&a<b.HCB.length){c=
b.HCB[a].file_name;d=b.HCB[a];for(b.HCB[a]=null;a<b.HCB.length-1;a++)b.HCB[a]=b.HCB[a+1];b.HCB.length-=1}for(a=b.lyr.length-1;0<=a;a--)b.lyr[a].hcb===d&&z(this,a);C(this);this.refresh();b=document.createEvent("Event");b.initEvent("file_deoverlayed",!0,!0);""!==c&&(b.fileName=c);s.dispatchEvent(this._Mx,b)},pixel_zoom:function(a,b,c,d,e){a=l(this,a,b);c=l(this,c,d);this.zoom(a,c,e)},percent_zoom:function(a,b,c){var d=this._Mx,e=this._Gx,g=0;1>Math.abs(a)&&(g=Math.abs(d.stk[d.level].xmax-d.stk[d.level].xmin),
g=g*a/2);a=0;1>Math.abs(b)&&(a=Math.abs(d.stk[d.level].ymax-d.stk[d.level].ymin),a=a*b/2);b={x:Math.max(d.stk[d.level].xmin+g,e.panxmin),y:Math.max(d.stk[d.level].ymin+a,e.panymin)};d={x:Math.min(d.stk[d.level].xmax-g,e.panxmax),y:Math.min(d.stk[d.level].ymax-a,e.panymax)};this.zoom(b,d,c)},zoom:function(a,b,c){var d=this._Mx,e=this._Gx;if(!(9<=d.level)){void 0===a.x&&(a.x=d.stk[d.level].xmin);void 0===a.y&&(a.y=d.stk[d.level].ymin);void 0===b.x&&(b.x=d.stk[d.level].xmax);void 0===b.y&&(b.y=d.stk[d.level].ymax);
if(b.x<a.x){var g=b.x;b.x=a.x;a.x=g}b.y<a.y&&(g=b.y,b.y=a.y,a.y=g);g={};g.xscl=d.stk[d.level].xscl;g.yscl=d.stk[d.level].yscl;g.xmin=a.x;g.xmax=b.x;g.ymin=a.y;g.ymax=b.y;e.index&&(g.xmin=Math.min(g.xmin/e.xdelta),g.xmax=Math.min(g.xmax/e.xdelta));c&&e.inContinuousZoom?d.stk[d.level]=g:(d.stk.push(g),d.level=d.stk.length-1);e.inContinuousZoom=c;this.inZoom=!0;a=document.createEvent("Event");a.initEvent("zoom",!0,!0);a.level=d.level;a.inContinuousZoom=e.inContinuousZoom;a.xmin=d.stk[d.level].xmin;a.ymin=
d.stk[d.level].ymin;a.xmax=d.stk[d.level].xmax;a.ymax=d.stk[d.level].ymax;s.dispatchEvent(d,a);this.inZoom=!1;this.refresh()}},unzoom:function(a){var b=this._Mx,c=this._Gx;if(0!==b.level){a||(a=b.stk.length);for(;0<a&&0!==b.level;)b.stk.pop(),b.level=b.stk.length-1,a-=1;0===b.level&&this.rescale();c.inContinuousZoom=!1;this.inZoom=!0;a=document.createEvent("Event");a.initEvent("unzoom",!0,!0);a.level=b.level;a.xmin=b.stk[b.level].xmin;a.ymin=b.stk[b.level].ymin;a.xmax=b.stk[b.level].xmax;a.ymax=b.stk[b.level].ymax;
s.dispatchEvent(b,a);this.inZoom=!1;this.refresh()}},mimic:function(a,b){var c=this;if(!b)throw"mimic must be called with at least one event mask";b.zoom?a.addListener("zoom",function(a){c.inZoom||c.zoom({x:a.xmin,y:a.ymin},{x:a.xmax,y:a.ymax},a.inContinuousZoom)}):b.xzoom?a.addListener("zoom",function(a){c.inZoom||c.zoom({x:a.xmin,y:void 0},{x:a.xmax,y:void 0},a.inContinuousZoom)}):b.yzoom&&a.addListener("zoom",function(a){c.inZoom||c.zoom({x:void 0,y:a.ymin},{x:void 0,y:a.ymax},a.inContinuousZoom)});
b.unzoom&&a.addListener("unzoom",function(a){c.inZoom||a.level<c._Mx.level&&c.unzoom(c._Mx.level-a.level)});(b.pan||b.xpan)&&a.addListener("xpan",function(a){c.inPan||n(c,a.xmin,a.xmax,"X")});(b.pan||b.ypan)&&a.addListener("ypan",function(a){c.inPan||n(c,a.ymin,a.ymax,"Y")})},redraw:function(){var a=this._Gx,b=this._Mx,c=b.canvas.getContext("2d");a.plotData.valid?(c.drawImage(a.plotData,b.l-1,b.t-1,b.r-b.l+2,b.b-b.t+2,b.l-1,b.t-1,b.r-b.l+2,b.b-b.t+2),I(this),a.cross_xpos=void 0,a.cross_ypos=void 0,
!b.warpbox&&this.mouseOnCanvas&&J(this),(a.always_show_marker||a.show_marker)&&S(this)):this.refresh()},refresh:function(){var a=this;s.render(this._Mx,function(){a._refresh()})},enable_listeners:function(){var a=this._Mx;s.addEventListener(a,"mousedown",this.onmousedown,!1);s.addEventListener(a,"mousemove",this.throttledOnMouseMove,!1);window.addEventListener("mouseup",a.onmouseup,!1);window.addEventListener("keydown",a.onkeydown,!1);window.addEventListener("keyup",a.onkeyup,!1);window.addEventListener("resize",
this.onresize,!1);document.addEventListener("mouseup",this.docMouseUp,!1);s.addEventListener(a,"mouseup",this.mouseup,!1);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);window.addEventListener("wheel",this.wheelHandler,!1);window.addEventListener("mousewheel",this.wheelHandler,!1);window.addEventListener("DOMMouseScroll",this.wheelHandler,!1);window.addEventListener("keypress",
this.onkeypress,!1)},disable_listeners:function(){var a=this._Mx;s.removeEventListener(a,"mousedown",this.onmousedown,!1);s.removeEventListener(a,"mousemove",this.throttledOnMouseMove,!1);s.removeEventListener(a,"mouseup",this.mouseup,!1);window.removeEventListener("mouseup",a.onmouseup,!1);window.removeEventListener("keydown",a.onkeydown,!1);window.removeEventListener("keyup",a.onkeyup,!1);window.removeEventListener("resize",this.onresize,!1);document.removeEventListener("mouseup",this.docMouseUp,
!1);window.removeEventListener("mousedown",this.dragMouseDownHandler,!1);window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.removeEventListener("mouseup",this.dragMouseUpHandler,!1);window.removeEventListener("wheel",this.wheelHandler,!1);window.removeEventListener("mousewheel",this.wheelHandler,!1);window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1);window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){s.checkresize(this._Mx)&&
this.refresh()},_refresh:function(){var a=this._Mx,b=this._Gx;a.canvas.getContext("2d");if(!b.hold){s.set_font(a,Math.min(8,a.width/64));b.pthk=1.5*a.text_w;if(b.specs){var c=!1;4===b.ylab&&(c=!0);!0===b.show_y_axis?(a.l=6*a.text_w,c&&(31536E3<=Math.abs(a.stk[0].ymin)||31536E3<=Math.abs(a.stk[0].ymax))&&(a.l=11*a.text_w)):a.l=1;a.r=!0===b.pan?a.width-(b.pthk+2*a.text_w):a.width-5;b.show_readout?(a.t=2*a.text_h,a.b=b.show_x_axis?a.height-4*a.text_h:a.height-3*a.text_h):"bottom"===b.x_scrollbar_location?
(a.t=2*a.text_h,a.b=b.pan?b.show_x_axis?a.height-3*a.text_h:a.height-2*a.text_h:b.show_x_axis?a.height-2*a.text_h:a.height-5):(a.t=b.pan?b.pthk+2*a.text_w:1,a.b=b.show_x_axis?a.height-3*a.text_h/2:a.height-2);b.pl=b.show_readout?50*a.text_w:"bottom"===b.x_scrollbar_location?a.l:35*a.text_w;b.pr=Math.max(b.pl+9*a.text_w,a.r);b.pt=b.show_readout?b.show_x_axis?a.b+a.text_h+(a.height-a.b-a.text_h-b.pthk)/2:a.b+(a.height-a.b-b.pthk)/2:"bottom"===b.x_scrollbar_location?b.show_x_axis?a.b+a.text_h+(a.height-
a.b-a.text_h-b.pthk)/2:a.b+(a.height-a.b-b.pthk)/2:(a.t-b.pthk)/2;b.lbtn=a.text_h+a.text_w+2}else b.pan?(a.t=b.pthk+2*a.text_w,a.r=a.width-(b.pthk+a.text_w)):(a.t=1,a.r=a.width-2),a.b=a.height-2,a.l=1,b.pl=a.l,b.pr=a.r,b.pt=(a.t-b.pthk)/2,b.lbtn=0;b.pyl=a.r+(a.width-a.r-b.pthk)/2+1;b.lg_colorbar&&2===b.lyr[0].hcb["class"]&&(c=a.r,a.r=c-100);(b.p_cuts||b.enabled_streaming_pcut)&&2===b.lyr[0].hcb["class"]&&(b.cross=!0,c=a.r,a.r=c-100,a.b-=100);b.xcut_now&&(a.canvas.width=b.x_box_w-1,a.canvas.height=
b.x_box_h,a.r=b.x_box_w-1,a.l=0,a.b=b.x_box_h,a.t=0);b.ycut_now&&(a.canvas.width=b.y_box_h-1,a.canvas.height=b.y_box_w,a.r=b.y_box_h-1,a.l=0,a.b=b.y_box_w,a.t=0);c=a.level;a.stk[c].x1=a.l;a.stk[c].y1=a.t;a.stk[c].x2=a.r;a.stk[c].y2=a.b;a.stk[c].xscl=(a.stk[c].xmax-a.stk[c].xmin)/(a.r-a.l);a.stk[c].yscl=(a.stk[c].ymax-a.stk[c].ymin)/(a.b-a.t);c=l(this,a.xpos,a.ypos);b.retx=c.x;b.rety=c.y;if(0===b.panning||0!==b.panning)b.plotData.valid=!1,s.clear_window(a);var c=b.xlab,d=b.ylab;void 0===c&&(c=30);
b.index&&(c=0);void 0===d&&(d=0<b.lyr.length&&b.lyr[0].cx,1===b.cmode?d=28:2===b.cmode?d=b.plab:3===b.cmode&&d?d=21:4===b.cmode?d=22:5===b.cmode?(d=22,c=21):d=6===b.cmode?26:7===b.cmode?27:0);if(b.specs){if(0===b.sections){var e={grid:b.grid};2===b.panning&&(e.noxtlab=!0);b.show_x_axis||(e.noxtics=!0,e.noxtlab=!0,e.noxplab=!0);b.show_y_axis||(e.noytics=!0,e.noytlab=!0,e.noyplab=!0);!b.specs||b.show_readout||b.pan||(e.noyplab=!0,e.noxplab=!0);b.gridBackground&&(e.fillStyle=b.gridBackground);b.gridStyle&&
(e.gridStyle=b.gridStyle);b.xmult&&(e.xmult=b.xmult);b.ymult&&(e.ymult=b.ymult);4===c&&(e.xtimecode=!0);4===d&&(e.ytimecode=!0);void 0!==b.xlabel&&(e.xlabel=b.xlabel);void 0!==b.ylabel&&(e.ylabel=b.ylabel);s.drawaxis(b,a,b.xdiv,b.ydiv,c,d,e)}c=b.lbtn-2;b.show_readout&&b.pan&&!b.no_legend_button?(b.legend?(b.legendBtnLocation={x:a.width-b.lbtn,y:2,width:c,height:c},s.shadowbox(a,a.width-b.lbtn,2,c,c,1,-2,"L")):(b.legendBtnLocation={x:a.width-b.lbtn,y:2,width:c,height:c},s.shadowbox(a,a.width-b.lbtn,
2,c,c,1,2,"L")),M(this)):b.legendBtnLocation=null}else b.grid&&0<=b.sections&&(e={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0},s.drawaxis(b,a,b.xdiv,b.ydiv,c,d,e));for(c=0;c<b.lyr.length;c++)G(this,c);c=this._Mx;d=this._Gx;d.show_readout&&!d.hide_note&&s.text(c,c.width-d.lbtn-(d.note.length+1)*c.text_w,c.text_h,d.note);aa(this);if(d.legend){for(var c=this._Mx,d=this._Gx,g=c.canvas.getContext("2d"),f=0,h=0,k=0,u=0,n=f=0,p=0,m=0,t=h=0,v=0,f=c.text_w,m=23*f,
h=(d.lyr.length+1)*c.text_h,n=c.r-m,p=c.t,e=n+2,z=p+2,m=m-5,w=h-5,x=k=0,h=0;h<d.lyr.length;h++)u=g.measureText(d.lyr[h].name).width,u>k&&(k=u);98<k&&(x=k-98,m+=x,e-=x);g.strokeStyle=c.fg;g.fillStyle=c.bg;g.fillRect(e,z,m,w);g.strokeRect(e,z,m,w);for(h=0;h<d.lyr.length;h++)k=n+4*f,u=p+h*c.text_h+c.text_h,h===d.modlayer&&s.text(c,n+f-x,u+Math.floor(c.text_w/2),"**"),d.lyr[h].display&&(v=d.lyr[h].color,0<d.lyr[h].line&&(t=q.sign(Math.min(f,Math.abs(d.lyr[h].thick)),d.lyr[h].thick),0>t||t===s.L_dashed?
s.draw_line(c,v,k-x,u-3,k+2*f-x,u-3,Math.abs(t),{mode:"dashed",on:4,off:4}):s.draw_line(c,v,k-x,u-3,k+2*f-x,u-3,Math.abs(t))),0<d.lyr[h].symbol&&(t=0>d.lyr[h].radius?-q.trunc(0.6*f):Math.min(d.lyr[h].radius,q.trunc(0.6*f)),s.draw_symbol(c,v,k+f-x,u-3,d.lyr[h].symbol,t)),2===d.lyr[h].hcb["class"]&&s.legend_colorbar(c,e+10,z+w/4,m/4-10,w/2)),k+=3*f,u+=0.3*c.text_h,s.text(c,k-x,u,d.lyr[h].name);g=w/d.lyr.length;for(f=0;f<d.lyr.length;f++)e<=c.xpos&&e+m>=c.xpos&&z<=c.ypos&&z+g>=c.ypos&&r(this,f),z+=g}I(this);
b.cross_xpos=void 0;b.cross_ypos=void 0;!a.warpbox&&this.mouseOnCanvas&&(J(this),b.y_cut_press_on||b.x_cut_press_on||2!==b.lyr[0].hcb["class"]||H(this));(b.always_show_marker||b.show_marker)&&S(this)}}};var ha={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"auto",left:"auto"},ja="Ma Ph Re Im IR Lo L2".split(" "),ka=["(absc)","(indx)","(1/ab)","(dydx)"];Q.exports=a})()},{"./bluefile":2,"./common":3,"./m":4,
"./matfile":5,"./mx":6,"./sigplot.layer1d":8,"./sigplot.layer2d":9,spin:11}],8:[function(T,Q,$){(function(){var a=T("./m"),k=T("./mx"),m=function(a){this.plot=a;this.ybuf=this.xbuf=void 0;this.xmax=this.xmin=this.imin=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=void 0;this.size=0;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=this.opacity=1;this.pointbufsize=
0;this.ypoint=this.xpoint=this.yptr=this.xptr=null;this.options={}};m.prototype={init:function(b,c){this.hcb=b;this.hcb.buf_type="D";this.ybufn=this.xbufn=this.size=this.offset=0;this.hcb.pipe?2===b["class"]&&(a.force1000(b),this.size=b.subsize):2===b["class"]?(a.force1000(b),this.size=b.subsize):this.size=b.size;c.framesize&&(this.size=c.framesize);if(this.hcb.pipe&&!this.size)throw"1D layer could not determine appropriate size for pipe, use framesize option";2>=b["class"]&&(this.xsub=-1,this.ysub=
1,this.cx="C"===b.format[0]);this.skip=1;this.cx&&(this.skip=2);this.xstart=b.xstart;this.xdelta=b.xdelta;var f=b.xstart+b.xdelta*(this.size-1);this.xmin=Math.min(b.xstart,f);this.xmax=Math.max(b.xstart,f);this.xlab=b.xunits;this.ylab=b.yunits;if(this.hcb.pipe){this.drawmode="scrolling";this.position=0;this.tle=c.tl;this.ybufn=this.size*Math.max(this.skip*a.PointArray.BYTES_PER_ELEMENT,a.PointArray.BYTES_PER_ELEMENT);this.ybuf=new ArrayBuffer(this.ybufn);var k=this;a.addPipeWriteListener(this.hcb,
function(){k._onpipewrite()})}},_onpipewrite:function(){var b=new a.PointArray(this.ybuf),c=this.tle;if(void 0===c)c=Math.floor(a.pavail(this.hcb))/this.hcb.spa;else if(a.pavail(this.hcb)<c*this.hcb.spa)return;var f=c*this.hcb.spa;if("lefttoright"===this.drawmode)this.position=0,b.set(b.subarray(0,this.size-f),f);else if("righttoleft"===this.drawmode)this.position=this.size-c,b.set(b.subarray(f),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";c=Math.min(c,this.size-this.position);
0!==a.grabx(this.hcb,b,c*this.hcb.spa,this.position*this.hcb.spa)&&(this.position=(this.position+c)%this.size,0!==this.plot._Gx.autol&&this.plot.rescale())},get_data:function(b,c){var f=this.plot._Gx,k=this.hcb,e=this.skip,m;m=2===k["class"]?k.subsize:k.size;var w=0,e=0;f.index?(w=Math.floor(b),e=Math.floor(c+0.5)):0<=k.xdelta?(w=Math.floor((b-k.xstart)/k.xdelta)-1,e=Math.floor((c-k.xstart)/k.xdelta+0.5)):(w=Math.floor((c-k.xstart)/k.xdelta)-1,e=Math.floor((b-k.xstart)/k.xdelta+0.5));w=Math.max(0,
w);e=Math.min(m,e);f=Math.max(0,Math.min(e-w+1,f.bufmax));0>k.xdelta&&(w=e-f+1);if(!(w>=this.imin&&w+f<=this.imin+this.size&&void 0!==this.ybuf||this.modified)&&2>=k["class"]){m=this.offset+w;e=this.skip;this.ybufn=f*Math.max(e*a.PointArray.BYTES_PER_ELEMENT,a.PointArray.BYTES_PER_ELEMENT);if(void 0===this.ybuf||this.ybuf.byteLength<this.ybufn)this.ybuf=new ArrayBuffer(this.ybufn);e=new a.PointArray(this.ybuf);f=a.grab(k,e,m,f);this.imin=w;this.xstart=k.xstart+w*this.xdelta;this.size=f}},change_settings:function(b){if(void 0!==
b.index)if(b.index)this.xmin=this.xdelta=this.xstart=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta;this.xdelta=this.hcb.xdelta;var c=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,c);this.xmax=Math.max(this.hcb.xstart,c)}void 0!==b.drawmode&&(this.drawmode=b.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*a.PointArray.BYTES_PER_ELEMENT,a.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn))},reload:function(b,
c){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var f=this.hcb.dview.length!==b.length||c;if(c)for(var k in c)if(this.hcb[k]=c[k],"xstart"===k||"xdelta"===k)f=!0;this.hcb.setData(b);this.imin=0;this.xstart=void 0;this.size=0;k=this.xmin;var e=this.xmax;f&&(2===this.hcb["class"]&&a.force1000(this.hcb),f=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1),this.xmin=Math.min(this.hcb.xstart,f),this.xmax=Math.max(this.hcb.xstart,f),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,
e=k=void 0);return{xmin:k,xmax:e}},push:function(b,c,f){if(c){for(var k in c)this.hcb[k]=c[k],"type"===k&&(this.hcb["class"]=c[k]/1E3);c.subsize&&2===this.hcb["class"]&&(a.force1000(this.hcb),this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*a.PointArray.BYTES_PER_ELEMENT,a.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));k=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,k);this.xmax=this.hcb.xmax||
Math.max(this.hcb.xstart,k);this.xdelta=this.hcb.xdelta;this.xstart=this.hcb.xstart}0<b.length&&a.filad(this.hcb,b,f);return c?!0:!1},prep:function(b,c){var f=this.plot._Gx,k=this.plot._Mx,e=Math.ceil(this.size),m=this.skip;if(0===e)return{num:0,start:0,end:0};e*a.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=e*a.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new a.PointArray(this.xptr),this.ypoint=
new a.PointArray(this.yptr));var w=new a.PointArray(this.ybuf),I=this.xmin,C=this.xmax,G,z,H;if(5===f.cmode||0<this.xsub)0>=e?(I=f.panxmin,C=f.panxmax):5!==f.cmode?this.xpoint=new a.PointArray(this.xbuf):this.cx?a.vmov(w,m,this.xpoint,1,e):0!==this.line?(H=a.vmxmn(w,e),this.xpoint[0]=H.smax,this.xpoint[1]=H.smin,G=0,e=z=2):this.xpoint=w,0<e&&(H=a.vmxmn(this.xpoint,e),C=H.smax,I=H.smin,G=0,z=e);else if(0<e){H=this.xstart;var J=this.xdelta;z=e;f.index?(G=0,z=e-1):0<=J?(G=Math.max(1,Math.min(z,Math.round((b-
H)/J)))-1,z=Math.max(1,Math.min(z,Math.round((c-H)/J)+2))-1):(G=Math.max(1,Math.min(z,Math.round((c-H)/J)-1))-1,z=Math.max(1,Math.min(z,Math.round((b-H)/J)+2))-1);e=z-G+1;0>e&&(a.log.debug("Nothing to plot"),e=0);w=(new a.PointArray(this.ybuf)).subarray(G*m);H+=J*G;for(var S=0;S<e;S++)this.xpoint[S]=f.index?this.imin+S+1:H+S*J}f.panxmin>f.panxmax?(f.panxmin=I,f.panxmax=C):(f.panxmin=Math.min(f.panxmin,I),f.panxmax=Math.max(f.panxmax,C));if(0>=e)return a.log.debug("Nothing to plot"),{num:e,start:G,
end:z};if(this.cx)1===f.cmode?a.cvmag(w,this.ypoint,e):2===f.cmode?25===f.plab?(a.cvpha(w,this.ypoint,e),a.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,e)):24!==f.plab?a.cvpha(w,this.ypoint,e):a.cvphad(w,this.ypoint,e):3===f.cmode?a.vmov(w,m,this.ypoint,1,e):6<=f.cmode?a.cvmag2(w,this.ypoint,e):4<=f.cmode&&a.vmov(w.subarray(1),m,this.ypoint,1,e);else if(5===f.cmode)a.vfill(this.ypoint,0,e);else if(1===f.cmode||6<=f.cmode)for(S=0;S<e;S++)this.ypoint[S]=Math.abs(w[S]);else for(S=0;S<e;S++)this.ypoint[S]=
w[S];6<=f.cmode&&(a.vlog10(this.ypoint,f.dbmin,this.ypoint),I=10,7===f.cmode&&(I=20),0<f.lyr.length&&f.lyr[0].cx&&(I/=2),a.vsmul(this.ypoint,I,this.ypoint));H=a.vmxmn(this.ypoint,e);C=H.smax;I=H.smin;m=C-I;0>m&&(C=I,I=C+m,m=-m);1E-20>=m?(I-=1,C+=1):(I-=0.02*m,C+=0.02*m);0===k.level&&(f.panymin>f.panymax?(f.panymin=I,f.panymax=C):(f.panymin=Math.min(f.panymin,I),f.panymax=Math.max(f.panymax,C)),1<f.autol&&(I=1/Math.max(f.autol,1),f.panymin=f.panymin*I+k.stk[0].ymin*(1-I),f.panymax=f.panymax*I+k.stk[0].ymax*
(1-I)));return{num:e,start:G,end:z}},draw:function(){var b=this.plot._Mx,c=this.plot._Gx,f=this.color,m=this.symbol,e=this.radius,x=0,w={};w.fillStyle=c.fillStyle;this.options&&(w.highlight=this.options.highlight,w.noclip=this.options.noclip);0===this.line?x=0:(x=1,0<this.thick?x=this.thick:0>this.thick&&(x=Math.abs(this.thick),w.dashed=!0),1===this.line&&(w.vertsym=!0),2===this.line&&(w.horzsym=!0),4===this.line&&(w.horzsym=!0,w.vertsym=!0));var I=c.segment&&5!==c.cmode&&0<this.xsub&&!0,C=this.xdelta,
G,z;this.xdata?(G=this.xmin,z=this.xmax):(G=Math.max(this.xmin,b.stk[b.level].xmin),z=Math.min(this.xmax,b.stk[b.level].xmax),G>=z&&(c.panxmin=Math.min(c.panxmin,this.xmin),c.panxmax=Math.max(c.panxmax,this.xmax)));if(!c.all){var H=(c.bufmax-1)*C;-0<=H?z=Math.min(z,G+H):G=Math.max(G,z+H)}if(0!==x||0!==m){for(;G<z;)this.hcb.pipe||this.get_data(G,z),H=this.prep(G,z),0<H.num&&!I&&k.trace(b,f,new a.PointArray(this.xptr),new a.PointArray(this.yptr),H.num,H.start,1,x,m,e,w),c.all?0===this.size?G=z:c.index?
G+=H.num:0<=C?G+=this.size*C:z+=this.size*C:G=z;this.position&&"scrolling"===this.drawmode&&(c=k.real_to_pixel(b,this.position*this.xdelta,0),c.x>b.l&&c.x<b.r&&k.draw_line(b,"white",c.x,b.t,c.x,b.b))}},add_highlight:function(a){this.options.highlight||(this.options.highlight=[]);var b=a.xstart,f=a.xend,k=isNaN(b),e=isNaN(f);if(!0===k||null===b||void 0===b)this.options.highlight=[];if(!0===e||null===f||void 0===f)this.options.highlight=[];a instanceof Array?this.options.highlight.push.apply(this.options.highlight,
a):this.options.highlight.push(a);this.plot.refresh()},remove_highlight:function(a){if(this.options.highlight){for(var b=this.options.highlight.length;b--;)a!==this.options.highlight[b]&&a!==this.options.highlight[b].id||this.options.highlight.splice(b,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=void 0,this.plot.refresh())}};var b=[0,53,27,80,13,40,67,
93,7,60,33,87,20,47,73,100];m.overlay=function(d,c,f){var r=d._Gx,e=d._Mx;2===c["class"]&&a.force1000(c);c.buf_type="D";var x=1;2===c["class"]&&0<c.size&&(x=Math.min(c.size/c.subsize,16-r.lyr.length));var w=f.name;delete f.name;for(var I=0;I<x;I++){var C=new m(d);C.init(c,f);C.color=k.getcolor(e,a.Mc.colormap[3].colors,b[r.lyr.length%b.length]);2===c["class"]?(void 0!==w&&(Array.isArray(w)?C.name=w[I]:(C.name=w,C.name=C.name+"."+k.pad((I+1).toString(),3,"0"))),C.name||(C.name=c.file_name?a.trim_name(c.file_name):
"layer_"+r.lyr.length,C.name=C.name+"."+k.pad((I+1).toString(),3,"0")),C.offset=I*c.subsize):(C.name=void 0!==w?w:c.file_name?a.trim_name(c.file_name):"layer_"+r.lyr.length,C.offset=0);for(var G in f)void 0!==C[G]&&(C[G]=f[G]);d.add_layer(C)}};Q.exports=m})()},{"./m":4,"./mx":6}],9:[function(T,Q,$){(function(){var a=T("./m"),k=T("./mx"),m=function(a){this.plot=a;this.xmax=this.xmin=this.imin=this.ydelta=this.ystart=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=void 0;this.display=
!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=4;this.opacity=1;this.lpb=void 0;this.yc=1;this.options={}};m.prototype={init:function(b){var d=this.plot._Gx,c=this.plot._Mx;this.hcb=b;this.hcb.buf_type="D";if(this.hcb.pipe){var f=this;this.frame=this.position=0;this.lps=this.hcb.lps||Math.ceil(Math.max(1,c.b-c.t));a.addPipeWriteListener(this.hcb,function(){f._onpipewrite()})}else this.lps=this.hcb.lps||
Math.ceil(b.size);this.ybufn=this.xbufn=this.offset=0;this.drawmode="scrolling";2>=b["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===b.format[0]);this.skip=1;this.cx&&(this.skip=2);d.index?(this.xmin=this.xdelta=this.xstart=1,this.xmax=b.subsize,this.ymin=this.ydelta=this.ystart=1,this.ymax=this.size):(this.xstart=b.xstart,this.xdelta=b.xdelta,d=b.xstart+b.xdelta*(b.subsize-1),this.xmin=this.hcb.xmin||Math.min(b.xstart,d),this.xmax=this.hcb.xmax||Math.max(b.xstart,d),this.ystart=b.ystart,this.ydelta=
b.ydelta,d=b.ystart+b.ydelta*(this.lps-1),this.ymin=this.hcb.ymin||Math.min(b.ystart,d),this.ymax=this.hcb.ymax||Math.max(b.ystart,d));this.xframe=this.hcb.subsize;this.yframe=this.lps*this.hcb.subsize/this.xframe;0===this.lpb&&(this.lpb=this.yframe);if(!this.lpb||0>=this.lpb)this.lpb=16;this.lpb=Math.max(1,this.lpb/this.yc)*this.yc;this.xlab=b.xunits;this.ylab=b.yunits},_onpipewrite:function(){var b=this.plot._Gx,d=this.plot._Mx;if(!(a.pavail(this.hcb)<this.hcb.subsize*this.hcb.spa)){"scrolling"!==
this.drawmode&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart);if("falling"===this.drawmode)this.position=0,this.img&&k.shift_image_rows(d,this.img,1);else if("rising"===this.drawmode)this.position=this.lps-1,this.img&&k.shift_image_rows(d,this.img,-1);else if("scrolling"===this.drawmode){var c=Math.abs(this.ymax-this.ymin);this.ymin=this.ystart=0;this.ymax=c;this.position>=this.lps&&(this.position=0)}else throw"Invalid draw mode";
if(this.buf)if(0===a.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa))a.log.error("Internal error");else{c=new a.PointArray(this.hcb.subsize);this.cx?1===b.cmode?a.cvmag(this.buf,c,c.length):2===b.cmode?25===b.plab?(a.cvpha(this.buf,c,c.length),a.vsmul(c,1/(2*Math.PI),c,c.length)):24!==b.plab?a.cvpha(this.buf,c,c.length):a.cvphad(this.buf,c,c.length):3===b.cmode?a.vmov(this.buf,this.skip,c,1,c.length):4===b.cmode?a.vmov(this.buf.subarray(1),this.skip,c,1,c.length):5===b.cmode?a.vfill(c,0,c.length):
6===b.cmode?a.cvmag2logscale(this.buf,b.dbmin,10,c):7===b.cmode&&a.cvmag2logscale(this.buf,b.dbmin,20,c):1===b.cmode?a.vabs(this.buf,c):2===b.cmode?a.vfill(c,0,c.length):3===b.cmode?a.vmov(this.buf,this.skip,c,1,c.length):4===b.cmode?a.vfill(c,0,c.length):5===b.cmode?a.vfill(c,0,c.length):6===b.cmode?a.vlogscale(this.buf,b.dbmin,10,c):7===b.cmode&&a.vlogscale(this.buf,b.dbmin,20,c);for(var f=c[0],m=c[0],e=0;e<c.length;e++)c[e]<f&&(f=c[e]),c[e]>m&&(m=c[e]);var x,w;1===b.autol?(x=f,w=m):1<b.autol?(e=
1/Math.max(b.autol,1),x=b.zmin*e+f*(1-e),w=b.zmax*e+m*(1-e)):0>b.autol&&(e=1/Math.max(5,1),x=b.zmin*e+f*(1-e),w=b.zmax*e+m*(1-e));0!==(b.autoz&1)&&(b.zmin=x);0!==(b.autoz&2)&&(b.zmax=w);if(b.enabled_streaming_pcut){this.zbuf.length!==this.lps*this.hcb.subsize&&(this.zbuf=[],this.zbuf=new a.PointArray(this.hcb.subsize*this.lps));if("scrolling"===this.drawmode)for(e=this.position*this.hcb.subsize,x=e+this.hcb.subsize,f=0;e<x;e++)this.zbuf[e]=c[f],f++;if("falling"===this.drawmode){e=(this.lps-1)*this.hcb.subsize;
x=this.zbuf.slice(0,e);this.zbuf=[];for(e=0;e<this.hcb.subsize;e++)this.zbuf.push(c[e]);this.zbuf.push.apply(this.zbuf,x)}if("rising"===this.drawmode)for(e=this.lps*this.hcb.subsize,x=this.zbuf.slice(this.hcb.subsize,e),this.zbuf=[],this.zbuf.push.apply(this.zbuf,x),e=0;e<this.hcb.subsize;e++)this.zbuf.push(c[e])}this.img&&k.update_image_row(d,this.img,c,this.position,b.zmin,b.zmax,b.xcompression);this.frame+=1;"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps);0===d.level&&(b.panymin=
this.ymin,b.panymax=this.ymax,d.stk[0].ymin=this.ymin,d.stk[0].ymax=this.ymax)}}},get_data:function(){var b=this.hcb;this.buf||(this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new a.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new a.PointArray(this.lps*this.hcb.subsize)));this.hcb.pipe||a.grab(b,this.buf,0,b.subsize)},get_z:function(a,d){return this.zbuf[Math.floor(d/this.hcb.ydelta)*
this.hcb.subsize+Math.floor(a/this.hcb.xdelta)]},change_settings:function(b){var d=this.plot._Gx;void 0!==b.cmode&&(this.img=void 0,0!==(d.autoz&1)&&(d.zmin=void 0),0!==(d.autoz&2)&&(d.zmax=void 0));if(void 0!==b.zmin||void 0!==b.zmax||void 0!==b.autoz)this.img=void 0;void 0!==b.cmap&&(this.img=void 0);if(void 0!==b.drawmode||void 0!==b.xmin||void 0!==b.xmax||void 0!==b.xdelta||void 0!==b.xstart)void 0===b.drawmode&&(b.drawmode=this.drawmode),this.drawmode=b.drawmode,this.frame=this.position=0,this.hcb.pipe?
(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new a.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new a.PointArray(this.lps*this.hcb.subsize)),this.img=void 0,this.preferred_origin="falling"===this.drawmode?this.plot._Mx.origin=1:this.plot._Mx.origin=4;void 0!==b.opacity&&(this.opacity=b.opacity)},push:function(b,d,c){var f=!1,k=null;if(d){d.timestamp&&(k=d.timestamp,delete d.timestamp);d.subsize&&
d.subsize!==this.hcb.subsize&&(this.hcb.subsize=d.subsize,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new a.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new a.PointArray(this.lps*this.hcb.subsize)),f=!0);for(var e in d)this.hcb[e]!==d[e]&&(this.hcb[e]=d[e],"type"===e&&(this.hcb["class"]=d[e]/1E3),f=!0);d.lps&&(this.lps=d.lps);f&&(d=this.hcb.xstart+this.hcb.xdelta*(this.hcb.subsize-
1),this.xmin=Math.min(this.hcb.xstart,d),this.xmax=Math.max(this.hcb.xstart,d),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,d=this.hcb.ystart+this.hcb.ydelta*(this.lps-1),this.ymin=Math.min(this.hcb.ystart,d),this.ymax=Math.max(this.hcb.ystart,d))}1!==this.hcb.yunits&&4!==this.hcb.yunits||this.hcb.timecode||!k||(this.hcb.timecode=a.j1970toj1950(k),this.hcb.ystart=0,f=!0);0<b.length&&a.filad(this.hcb,b,c);return f},prep:function(b,
d){var c=this.plot._Gx,f=this.plot._Mx,m=this.lps,e=this.xmin,x=this.xmax,w,I=this.hcb.subsize;0<c.xcompression&&(I=Math.ceil(f.r-f.l));this.get_data(b,d);if(this.hcb.pipe)c.panxmin>c.panxmax?(c.panxmin=e,c.panxmax=x):(c.panxmin=Math.min(c.panxmin,e),c.panxmax=Math.max(c.panxmax,x)),c.panymin>c.panxmax?(c.panymin=this.ymin,c.panymax=this.ymax):(c.panymin=Math.min(c.panymin,this.ymin),c.panymax=Math.max(c.panymax,this.ymax)),this.img||(void 0===c.zmin&&(c.zmin=0),void 0===c.zmax&&(c.zmax=0),this.img=
k.create_image(f,null,this.hcb.subsize,I,this.lps,c.zmin+c.zoff,c.zmax+c.zoff,c.xcompression));else{if(!(5===c.cmode||0<this.xsub)&&0<m){var C=this.xstart,G=this.xdelta,z=m;c.index?(w=0,m-=1):0<=G?(w=Math.max(1,Math.min(z,Math.round((b-C)/G)))-1,m=Math.max(1,Math.min(z,Math.round((d-C)/G)+2))-1):(w=Math.max(1,Math.min(z,Math.round((d-C)/G)-1))-1,m=Math.max(1,Math.min(z,Math.round((b-C)/G)+2))-1);m=m-w+1;0>m&&(a.log.debug("Nothing to plot"),m=0)}c.panxmin>c.panxmax?(c.panxmin=e,c.panxmax=x):(c.panxmin=
Math.min(c.panxmin,e),c.panxmax=Math.max(c.panxmax,x));if(0>=m){a.log.debug("Nothing to plot");return}!(5===c.cmode||0<this.ysub)&&0<m&&(e=this.ystart,x=this.ydelta,z=m,c.index?(w=0,m-=1):0<=x?(w=Math.max(1,Math.min(z,Math.round((b-e)/x)))-1,m=Math.max(1,Math.min(z,Math.round((d-e)/x)+2))-1):(w=Math.max(1,Math.min(z,Math.round((d-e)/x)-1))-1,m=Math.max(1,Math.min(z,Math.round((b-e)/x)+2))-1),m=m-w+1,0>m&&(a.log.debug("Nothing to plot"),m=0));c.panymin>c.panxmax?(c.panymin=this.ymin,c.panymax=this.ymax):
(c.panymin=Math.min(c.panymin,this.ymin),c.panymax=Math.max(c.panymax,this.ymax));this.cx?1===c.cmode?a.cvmag(this.buf,this.zbuf,this.zbuf.length):2===c.cmode?25===c.plab?(a.cvpha(this.buf,this.zbuf,this.zbuf.length),a.vsmul(this.zbuf,1/(2*Math.PI),this.zbuf,this.zbuf.length)):24!==c.plab?a.cvpha(this.buf,this.zbuf,this.zbuf.length):a.cvphad(this.buf,this.zbuf,this.zbuf.length):3===c.cmode?a.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===c.cmode?a.vmov(this.buf.subarray(1),this.skip,this.zbuf,
1,this.zbuf.length):5===c.cmode?a.vfill(this.zbuf,0,this.zbuf.length):6===c.cmode?a.cvmag2logscale(this.buf,c.dbmin,10,this.zbuf):7===c.cmode&&a.cvmag2logscale(this.buf,c.dbmin,20,this.zbuf):1===c.cmode?a.vabs(this.buf,this.zbuf):2===c.cmode?a.vfill(this.zbuf,0,this.zbuf.length):3===c.cmode?a.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===c.cmode?a.vfill(this.zbuf,0,this.zbuf.length):5===c.cmode?a.vfill(this.zbuf,0,this.zbuf.length):6===c.cmode?a.vlogscale(this.buf,c.dbmin,10,this.zbuf):
7===c.cmode&&a.vlogscale(this.buf,c.dbmin,20,this.zbuf);z=this.zbuf;x=e=0;if(0>=c.autol||this.hcb.pipe){if(0<z.length)for(e=z[0],x=z[0],w=0;w<z.length&&!(w/this.xframe>=this.lpb);w++)z[w]<e&&(e=z[w]),z[w]>x&&(x=z[w]);0!==(c.autoz&1)&&(c.zmin=void 0!==c.zmin?Math.min(c.zmin,e):e);0!==(c.autoz&2)&&(c.zmax=void 0!==c.zmax?Math.min(c.zmax,x):x);this.img=k.create_image(f,this.zbuf,this.hcb.subsize,I,this.lps,c.zmin+c.zoff,c.zmax+c.zoff,c.xcompression)}else if(C=this.hcb.size,G=1/Math.max(c.autol,1),this.img||
(this.img=k.create_image(f,this.zbuf,this.hcb.subsize,I,this.lps,c.zmin+c.zoff,c.zmax+c.zoff)),c.zmin=0,c.zmax=0,0<z.length)for(var H=0;H<C;H++){var J=H*this.xframe,e=z[J],x=z[J];for(w=0;w<this.xframe;w++)e=Math.min(z[J+w],e),x=Math.max(z[J+w],x);2!==c.autoz&&void 0!==e&&(c.zmin=e*G+c.zmin*(1-G));1!==c.autoz&&void 0!==x&&(c.zmax=x*G+c.zmax*(1-G));k.update_image_row(f,this.img,z.subarray(J,J+this.xframe),H,c.zmin,c.zmax)}}this.img.cmode=c.cmode;this.img.cmap=c.cmap;this.img.origin=f.origin;if(this.hcb.pipe&&
this.frame<this.lps)if(c=new Uint32Array(this.img),"rising"===this.drawmode)for(w=0;w<c.length-this.frame*I;w++)c[w]=0;else for(w=this.frame*I;w<c.length;w++)c[w]=0;return m},draw:function(){var a=this.plot._Mx,d=this.plot._Gx,c=this.hcb;if(this.hcb.pipe){var f=this.hcb.lps||Math.ceil(Math.max(1,a.b-a.t));f!==this.lps&&this.buf&&(this.lps=f,this.position>=this.lps&&(this.position=0),f=c.ystart+c.ydelta*(this.lps-1),this.ymin=Math.min(c.ystart,f),this.ymax=Math.max(c.ystart,f),this.img=null,this.plot.rescale())}var f=
Math.max(this.xmin,a.stk[a.level].xmin),m=Math.min(this.xmax,a.stk[a.level].xmax);if(f>=m)d.panxmin=Math.min(d.panxmin,this.xmin),d.panxmax=Math.max(d.panxmax,this.xmax);else{var e=Math.max(this.ymin,a.stk[a.level].ymin),x=Math.min(this.ymax,a.stk[a.level].ymax),w=Math.abs(m-f)+1,I=Math.abs(x-e)+1,w=Math.floor(w/c.xdelta),I=Math.floor(I/c.ydelta),w=Math.min(w,c.subsize),I=Math.min(I,c.size),c=k.real_to_pixel(a,f,e),x=k.real_to_pixel(a,m,x),I=(x.y-c.y)/I;d.xe=Math.max(1,Math.round((x.x-c.x)/w));d.ye=
Math.max(1,Math.round(I));this.img&&this.buf&&d.cmode===this.img.cmode&&d.cmap===this.img.cmap&&a.origin===this.img.origin||this.prep(f,m);this.img&&k.draw_image(a,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,d.rasterSmoothing);null!==this.position&&"scrolling"===this.drawmode&&(d=k.real_to_pixel(a,0,this.position*this.ydelta),d.y>a.t&&d.y<a.b&&k.draw_line(a,"white",a.l,d.y,a.r,d.y))}}};m.overlay=function(b,d,c){var f=b._Gx;d.buf_type="D";var k=new m(b);k.init(d);k.name=d.file_name?
a.trim_name(d.file_name):"layer_"+f.lyr.length;k.change_settings(c);b.add_layer(k)};Q.exports=m})()},{"./m":4,"./mx":6}],10:[function(T,Q,$){(function(a,k){"object"===typeof Q&&Q.exports?Q.exports=k():a.log=k()})(this,function(){function a(a,b){var c=a[b];if("function"===typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch(d){return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function k(a,b){for(var d=0;d<r.length;d++){var e=r[d];this[e]=d<a?c:
this.methodFactory(e,a,b)}this.log=this.debug}function m(a,b,c){return function(){typeof console!==f&&(k.call(this,b,c),this[a].apply(this,arguments))}}function b(b,d,e){var k=b;"debug"===k&&(k="log");return(typeof console===f?!1:void 0!==console[k]?a(console,k):void 0!==console.log?a(console,"log"):c)||m.apply(this,arguments)}function d(a,c,d){function e(){var a;if(typeof window!==f){try{a=window.localStorage[x]}catch(b){}if(typeof a===f)try{var c=window.document.cookie,d=c.indexOf(encodeURIComponent(x)+
"=");d&&(a=/^([^;]+)/.exec(c.slice(d))[1])}catch(k){}void 0===m.levels[a]&&(a=void 0);return a}}var m=this,w,x="loglevel";a&&(x+=":"+a);m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};m.methodFactory=d||b;m.getLevel=function(){return w};m.setLevel=function(b,c){"string"===typeof b&&void 0!==m.levels[b.toUpperCase()]&&(b=m.levels[b.toUpperCase()]);if("number"===typeof b&&0<=b&&b<=m.levels.SILENT){w=b;if(!1!==c)a:{var d=(r[b]||"silent").toUpperCase();if(typeof window!==f){try{window.localStorage[x]=
d;break a}catch(e){}try{window.document.cookie=encodeURIComponent(x)+"="+d+";"}catch(z){}}}k.call(m,b,a);if(typeof console===f&&b<m.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+b;};m.setDefaultLevel=function(a){e()||m.setLevel(a,!1)};m.enableAll=function(a){m.setLevel(m.levels.TRACE,a)};m.disableAll=function(a){m.setLevel(m.levels.SILENT,a)};d=e();null==d&&(d=null==c?"WARN":c);m.setLevel(d,!1)}var c=function(){},f="undefined",r=["trace",
"debug","info","warn","error"],e=new d,x={};e.getLogger=function(a){if("string"!==typeof a||""===a)throw new TypeError("You must supply a name when creating a logger.");var b=x[a];b||(b=x[a]=new d(a,e.getLevel(),e.methodFactory));return b};var w=typeof window!==f?window.log:void 0;e.noConflict=function(){typeof window!==f&&window.log===e&&(window.log=w);return e};return e})},{}],11:[function(T,Q,$){function a(a,b){var c=document.createElement(a||"div"),d;for(d in b)c[d]=b[d];return c}function k(a){for(var b=
1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function m(a,b,c,d){var f=["opacity",b,~~(100*a),c,d].join("-");c=0.01+c/d*100;d=Math.max(1-(1-a)/b*(100-c),a);var k=x.substring(0,x.indexOf("Animation")).toLowerCase();e[f]||(w.insertRule("@"+(k&&"-"+k+"-"||"")+"keyframes "+f+"{0%{opacity:"+d+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+"}100%{opacity:"+d+"}}",0),e[f]=1);return f}function b(a,b){var c=a.style,d,e;if(void 0!==c[b])return b;b=b.charAt(0).toUpperCase()+
b.slice(1);for(e=0;e<r.length;e++)if(d=r[e]+b,void 0!==c[d])return d}function d(a,c){for(var d in c)a.style[b(a,d)||d]=c[d];return a}function c(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)void 0===a[d]&&(a[d]=c[d])}return a}function f(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var r=["webkit","Moz","ms","O"],e={},x,w=function(){var b=a("style");k(document.getElementsByTagName("head")[0],b);return b.sheet||b.styleSheet}(),
I={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},C=function z(a){if(!this.spin)return new z(a);this.opts=c(a||{},z.defaults,I)};C.defaults={};c(C.prototype,{spin:function(b){this.stop();var c=this,e=c.opts,k=c.el=d(a(0,{className:e.className}),{position:"relative",zIndex:e.zIndex}),m=e.radius+e.length+e.width,r,w;b&&(b.insertBefore(k,b.firstChild||null),w=f(b),r=f(k),d(k,{left:("auto"==e.left?
w.x-r.x+(b.offsetWidth>>1):e.left+m)+"px",top:("auto"==e.top?w.y-r.y+(b.offsetHeight>>1):e.top+m)+"px"}));k.setAttribute("aria-role","progressbar");c.lines(k,c.opts);if(!x){var C=0,y=e.fps,I=y/e.speed,Q=(1-e.opacity)/(I*e.trail/100),l=I/e.lines;!function N(){C++;for(var a=e.lines;a;a--){var b=Math.max(1-(C+a*l)%I*Q,e.opacity);c.opacity(k,e.lines-a,b,e)}c.timeout=c.el&&setTimeout(N,~~(1E3/y))}()}return c},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),
this.el=void 0);return this},lines:function(b,c){function e(b,k){return d(a(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:b,boxShadow:k,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*f+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.width>>1)+"px"})}for(var f=0,r;f<c.lines;f++)r=d(a(),{position:"absolute",top:1+~(c.width/2)+"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:x&&m(c.opacity,c.trail,f,c.lines)+" "+
1/c.speed+"s linear infinite"}),c.shadow&&k(r,d(e("#000","0 0 4px #000"),{top:"2px"})),k(b,k(r,e(c.color,"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});!function(){function c(b,d){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',d)}var e=d(a("group"),{behavior:"url(#default#VML)"});!b(e,"transform")&&e.adj?(w.addRule(".spin-vml","behavior:url(#default#VML)"),C.prototype.lines=function(a,b){function e(){return d(c("group",
{coordsize:r+" "+r,coordorigin:-m+" "+-m}),{width:r,height:r})}function f(a,l,r){k(x,k(d(e(),{rotation:360/b.lines*a+"deg",left:~~l}),k(d(c("roundrect",{arcsize:1}),{width:m,height:b.width,left:b.radius,top:-b.width>>1,filter:r}),c("fill",{color:b.color,opacity:b.opacity}),c("stroke",{opacity:0}))))}var m=b.length+b.width,r=2*m,w=2*-(b.width+b.length)+"px",x=d(e(),{position:"absolute",top:w,left:w});if(b.shadow)for(w=1;w<=b.lines;w++)f(w,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
for(w=1;w<=b.lines;w++)f(w);return k(a,x)},C.prototype.opacity=function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;a&&b+d<a.childNodes.length&&(a=(a=(a=a.childNodes[b+d])&&a.firstChild)&&a.firstChild)&&(a.opacity=c)}):x=b(e,"animation")}();Q.exports=C},{}],12:[function(T,Q,$){(function(a){function k(c,d){var e,f,m,r,t;c=c?c:"";d=d||{};if(c instanceof k)return c;if(!(this instanceof k))return new k(c,d);f=c;t={r:0,g:0,b:0};var v=1;r=r=m=null;m=r=!1;if("string"==typeof f)a:{f=f.replace(l,"").replace(B,
"").toLowerCase();var w=!1;if(n[f])f=n[f],w=!0;else if("transparent"==f){f={r:0,g:0,b:0,a:0,format:"name"};break a}f=(e=ca.rgb.exec(f))?{r:e[1],g:e[2],b:e[3]}:(e=ca.rgba.exec(f))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=ca.hsl.exec(f))?{h:e[1],s:e[2],l:e[3]}:(e=ca.hsla.exec(f))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=ca.hsv.exec(f))?{h:e[1],s:e[2],v:e[3]}:(e=ca.hsva.exec(f))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=ca.hex8.exec(f))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4],16)/255,format:w?
"name":"hex8"}:(e=ca.hex6.exec(f))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),format:w?"name":"hex"}:(e=ca.hex4.exec(f))?{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),a:parseInt(e[4]+""+e[4],16)/255,format:w?"name":"hex8"}:(e=ca.hex3.exec(f))?{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),format:w?"name":"hex"}:!1}if("object"==typeof f){if(W(f.r)&&W(f.g)&&W(f.b))t=f.g,e=f.b,t={r:255*U(f.r,255),g:255*U(t,
255),b:255*U(e,255)},r=!0,m="%"===String(f.r).substr(-1)?"prgb":"rgb";else if(W(f.h)&&W(f.s)&&W(f.v)){m=M(f.s);r=M(f.v);w=f.h;e=m;t=r;w=6*U(w,360);e=U(e,100);t=U(t,100);m=a.floor(w);var x=w-m;r=t*(1-e);w=t*(1-x*e);e=t*(1-(1-x)*e);m%=6;t={r:255*[t,w,r,r,e,t][m],g:255*[e,t,t,w,r,r][m],b:255*[r,r,e,t,t,w][m]};r=!0;m="hsv"}else W(f.h)&&W(f.s)&&W(f.l)&&(m=M(f.s),r=M(f.l),t=b(f.h,m,r),r=!0,m="hsl");f.hasOwnProperty("a")&&(v=f.a)}v=Z(v);e=r;f=f.format||m;m=F(255,h(t.r,0));r=F(255,h(t.g,0));t=F(255,h(t.b,
0));this._originalInput=c;this._r=m;this._g=r;this._b=t;this._a=v;this._roundA=p(100*this._a)/100;this._format=d.format||f;this._gradientType=d.gradientType;1>this._r&&(this._r=p(this._r));1>this._g&&(this._g=p(this._g));1>this._b&&(this._b=p(this._b));this._ok=e;this._tc_id=N++}function m(a,b,c){a=U(a,255);b=U(b,255);c=U(c,255);var d=h(a,b,c),e=F(a,b,c),f,k=(d+e)/2;if(d==e)f=e=0;else{var l=d-e,e=0.5<k?l/(2-d-e):l/(d+e);switch(d){case a:f=(b-c)/l+(b<c?6:0);break;case b:f=(c-a)/l+2;break;case c:f=
(a-b)/l+4}f/=6}return{h:f,s:e,l:k}}function b(a,b,c){function d(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}a=U(a,360);b=U(b,100);c=U(c,100);if(0===b)c=b=a=c;else{var e=0.5>c?c*(1+b):c+b-c*b,f=2*c-e;c=d(f,e,a+1/3);b=d(f,e,a);a=d(f,e,a-1/3)}return{r:255*c,g:255*b,b:255*a}}function d(a,b,c){a=U(a,255);b=U(b,255);c=U(c,255);var d=h(a,b,c),e=F(a,b,c),f,k=d-e;if(d==e)f=0;else{switch(d){case a:f=(b-c)/k+(b<c?6:0);break;case b:f=(c-a)/k+2;break;case c:f=(a-b)/
k+4}f/=6}return{h:f,s:0===d?0:k/d,v:d}}function c(a,b,c,d){a=[y(p(a).toString(16)),y(p(b).toString(16)),y(p(c).toString(16))];return d&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function f(b,c,d,e){return[y(a.round(255*parseFloat(e)).toString(16)),y(p(b).toString(16)),y(p(c).toString(16)),y(p(d).toString(16))].join("")}function r(a,b){b=0===b?0:b||10;var c=k(a).toHsl();c.s-=b/100;c.s=F(1,h(0,
c.s));return k(c)}function e(a,b){b=0===b?0:b||10;var c=k(a).toHsl();c.s+=b/100;c.s=F(1,h(0,c.s));return k(c)}function x(a){return k(a).desaturate(100)}function w(a,b){b=0===b?0:b||10;var c=k(a).toHsl();c.l+=b/100;c.l=F(1,h(0,c.l));return k(c)}function I(a,b){b=0===b?0:b||10;var c=k(a).toRgb();c.r=h(0,F(255,c.r-p(255*-(b/100))));c.g=h(0,F(255,c.g-p(255*-(b/100))));c.b=h(0,F(255,c.b-p(255*-(b/100))));return k(c)}function C(a,b){b=0===b?0:b||10;var c=k(a).toHsl();c.l-=b/100;c.l=F(1,h(0,c.l));return k(c)}
function G(a,b){var c=k(a).toHsl(),d=(c.h+b)%360;c.h=0>d?360+d:d;return k(c)}function z(a){a=k(a).toHsl();a.h=(a.h+180)%360;return k(a)}function H(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+120)%360,s:b.s,l:b.l}),k({h:(c+240)%360,s:b.s,l:b.l})]}function J(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+90)%360,s:b.s,l:b.l}),k({h:(c+180)%360,s:b.s,l:b.l}),k({h:(c+270)%360,s:b.s,l:b.l})]}function S(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+72)%360,s:b.s,l:b.l}),k({h:(c+216)%360,s:b.s,l:b.l})]}
function T(a,b,c){b=b||6;c=c||30;var d=k(a).toHsl();c=360/c;a=[k(a)];for(d.h=(d.h-(c*b>>1)+720)%360;--b;)d.h=(d.h+c)%360,a.push(k(d));return a}function $(a,b){b=b||6;for(var c=k(a).toHsv(),d=c.h,e=c.s,c=c.v,f=[],h=1/b;b--;)f.push(k({h:d,s:e,v:c})),c=(c+h)%1;return f}function Z(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function U(b,c){var d=b;"string"==typeof d&&-1!=d.indexOf(".")&&1===parseFloat(d)&&(b="100%");d="string"===typeof b&&-1!=b.indexOf("%");b=F(c,h(0,parseFloat(b)));d&&(b=parseInt(b*
c,10)/100);return 1E-6>a.abs(b-c)?1:b%c/parseFloat(c)}function y(a){return 1==a.length?"0"+a:""+a}function M(a){1>=a&&(a=100*a+"%");return a}function W(a){return!!ca.CSS_UNIT.exec(a)}var l=/^\s+/,B=/\s+$/,N=0,p=a.round,F=a.min,h=a.max,t=a.random;k.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},
getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1E3},getLuminance:function(){var b=this.toRgb(),c,d;c=b.r/255;d=b.g/255;b=b.b/255;c=0.03928>=c?c/12.92:a.pow((c+0.055)/1.055,2.4);d=0.03928>=d?d/12.92:a.pow((d+0.055)/1.055,2.4);b=0.03928>=b?b/12.92:a.pow((b+0.055)/1.055,2.4);return 0.2126*c+0.7152*d+0.0722*b},setAlpha:function(a){this._a=Z(a);this._roundA=p(100*this._a)/100;return this},toHsv:function(){var a=d(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},
toHsvString:function(){var a=d(this._r,this._g,this._b),b=p(360*a.h),c=p(100*a.s),a=p(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+a+"%)":"hsva("+b+", "+c+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var a=m(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=m(this._r,this._g,this._b),b=p(360*a.h),c=p(100*a.s),a=p(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+a+"%)":"hsla("+b+", "+c+"%, "+a+"%, "+this._roundA+")"},toHex:function(a){return c(this._r,
this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(b){var c=this._g,d=this._b,e=this._a,c=[y(p(this._r).toString(16)),y(p(c).toString(16)),y(p(d).toString(16)),y(a.round(255*parseFloat(e)).toString(16))];b=b&&c[0].charAt(0)==c[0].charAt(1)&&c[1].charAt(0)==c[1].charAt(1)&&c[2].charAt(0)==c[2].charAt(1)&&c[3].charAt(0)==c[3].charAt(1)?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0)+c[3].charAt(0):c.join("");return b},toHex8String:function(a){return"#"+this.toHex8(a)},
toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*U(this._r,255))+"%",g:p(100*U(this._g,255))+"%",b:p(100*U(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+p(100*U(this._r,255))+"%, "+p(100*U(this._g,255))+"%, "+p(100*U(this._b,
255))+"%)":"rgba("+p(100*U(this._r,255))+"%, "+p(100*U(this._g,255))+"%, "+p(100*U(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:v[c(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var b="#"+f(this._r,this._g,this._b,this._a),c=b,d=this._gradientType?"GradientType = 1, ":"";a&&(a=k(a),c="#"+f(a._r,a._g,a._b,a._a));return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=
!!a;a=a||this._format;var c=!1,d=1>this._a&&0<=this._a;if(!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"hex4"===a||"hex8"===a||"name"===a))return"name"===a&&0===this._a?this.toName():this.toRgbString();"rgb"===a&&(c=this.toRgbString());"prgb"===a&&(c=this.toPercentageRgbString());if("hex"===a||"hex6"===a)c=this.toHexString();"hex3"===a&&(c=this.toHexString(!0));"hex4"===a&&(c=this.toHex8String(!0));"hex8"===a&&(c=this.toHex8String());"name"===a&&(c=this.toName());"hsl"===a&&(c=this.toHslString());"hsv"===
a&&(c=this.toHsvString());return c||this.toHexString()},clone:function(){return k(this.toString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));this._r=c._r;this._g=c._g;this._b=c._b;this.setAlpha(c._a);return this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(I,arguments)},darken:function(){return this._applyModification(C,arguments)},desaturate:function(){return this._applyModification(r,
arguments)},saturate:function(){return this._applyModification(e,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(G,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(z,arguments)},monochromatic:function(){return this._applyCombination($,arguments)},splitcomplement:function(){return this._applyCombination(S,
arguments)},triad:function(){return this._applyCombination(H,arguments)},tetrad:function(){return this._applyCombination(J,arguments)}};k.fromRatio=function(a,b){if("object"==typeof a){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]="a"===d?a[d]:M(a[d]));a=c}return k(a,b)};k.equals=function(a,b){return a&&b?k(a).toRgbString()==k(b).toRgbString():!1};k.random=function(){return k.fromRatio({r:t(),g:t(),b:t()})};k.mix=function(a,b,c){c=0===c?0:c||50;a=k(a).toRgb();b=k(b).toRgb();c/=100;return k({r:(b.r-
a.r)*c+a.r,g:(b.g-a.g)*c+a.g,b:(b.b-a.b)*c+a.b,a:(b.a-a.a)*c+a.a})};k.readability=function(b,c){var d=k(b),e=k(c);return(a.max(d.getLuminance(),e.getLuminance())+0.05)/(a.min(d.getLuminance(),e.getLuminance())+0.05)};k.isReadable=function(a,b,c){a=k.readability(a,b);b=!1;var d;d=c||{level:"AA",size:"small"};c=(d.level||"AA").toUpperCase();d=(d.size||"small").toLowerCase();"AA"!==c&&"AAA"!==c&&(c="AA");"small"!==d&&"large"!==d&&(d="small");switch(c+d){case "AAsmall":case "AAAlarge":b=4.5<=a;break;
case "AAlarge":b=3<=a;break;case "AAAsmall":b=7<=a}return b};k.mostReadable=function(a,b,c){var d=null,e=0,f,h,l,m;c=c||{};h=c.includeFallbackColors;l=c.level;m=c.size;for(var n=0;n<b.length;n++)f=k.readability(a,b[n]),f>e&&(e=f,d=k(b[n]));if(k.isReadable(a,d,{level:l,size:m})||!h)return d;c.includeFallbackColors=!1;return k.mostReadable(a,["#fff","#000"],c)};var n=k.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",
blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",
darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",
ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",
mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",
papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",
turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},v=k.hexNames=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(n),ca={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsva:RegExp("hsva[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};
"undefined"!==typeof Q&&Q.exports?Q.exports=k:window.tinycolor=k})(Math)},{}]},{},[7])(7)});
